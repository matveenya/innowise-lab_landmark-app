(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Of(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const le={},qo=[],$i=()=>{},ev=()=>!1,Qu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xf=e=>e.startsWith("onUpdate:"),cn=Object.assign,Mf=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},wb=Object.prototype.hasOwnProperty,pe=(e,t)=>wb.call(e,t),Rt=Array.isArray,Go=e=>Hl(e)==="[object Map]",pa=e=>Hl(e)==="[object Set]",Fp=e=>Hl(e)==="[object Date]",jt=e=>typeof e=="function",Xe=e=>typeof e=="string",yi=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",nv=e=>(Te(e)||jt(e))&&jt(e.then)&&jt(e.catch),iv=Object.prototype.toString,Hl=e=>iv.call(e),Eb=e=>Hl(e).slice(8,-1),rv=e=>Hl(e)==="[object Object]",Nf=e=>Xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,al=Of(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xu=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Tb=/-\w/g,Ar=Xu(e=>e.replace(Tb,t=>t.slice(1).toUpperCase())),Ib=/\B([A-Z])/g,gs=Xu(e=>e.replace(Ib,"-$1").toLowerCase()),sv=Xu(e=>e.charAt(0).toUpperCase()+e.slice(1)),td=Xu(e=>e?`on${sv(e)}`:""),Dn=(e,t)=>!Object.is(e,t),eu=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ov=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},_u=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Up;const Ju=()=>Up||(Up=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Df(e){if(Rt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Xe(i)?Sb(i):Df(i);if(r)for(const o in r)t[o]=r[o]}return t}else if(Xe(e)||Te(e))return e}const bb=/;(?![^(]*\))/g,Pb=/:([^]+)/,Ab=/\/\*[^]*?\*\//g;function Sb(e){const t={};return e.replace(Ab,"").split(bb).forEach(n=>{if(n){const i=n.split(Pb);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Zn(e){let t="";if(Xe(e))t=e;else if(Rt(e))for(let n=0;n<e.length;n++){const i=Zn(e[n]);i&&(t+=i+" ")}else if(Te(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Cb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",kb=Of(Cb);function av(e){return!!e||e===""}function Lb(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Zs(e[i],t[i]);return n}function Zs(e,t){if(e===t)return!0;let n=Fp(e),i=Fp(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=yi(e),i=yi(t),n||i)return e===t;if(n=Rt(e),i=Rt(t),n||i)return n&&i?Lb(e,t):!1;if(n=Te(e),i=Te(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const a in e){const c=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(c&&!u||!c&&u||!Zs(e[a],t[a]))return!1}}return String(e)===String(t)}function Vf(e,t){return e.findIndex(n=>Zs(n,t))}const lv=e=>!!(e&&e.__v_isRef===!0),yt=e=>Xe(e)?e:e==null?"":Rt(e)||Te(e)&&(e.toString===iv||!jt(e.toString))?lv(e)?yt(e.value):JSON.stringify(e,cv,2):String(e),cv=(e,t)=>lv(t)?cv(e,t.value):Go(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],o)=>(n[ed(i,o)+" =>"]=r,n),{})}:pa(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ed(n))}:yi(t)?ed(t):Te(t)&&!Rt(t)&&!rv(t)?String(t):t,ed=(e,t="")=>{var n;return yi(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pn;class uv{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pn,!t&&pn&&(this.index=(pn.scopes||(pn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=pn;try{return pn=this,t()}finally{pn=n}}}on(){++this._on===1&&(this.prevScope=pn,pn=this)}off(){this._on>0&&--this._on===0&&(pn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ff(e){return new uv(e)}function hv(){return pn}function Rb(e,t=!1){pn&&pn.cleanups.push(e)}let Pe;const nd=new WeakSet;class dv{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pn&&pn.active&&pn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nd.has(this)&&(nd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bp(this),pv(this);const t=Pe,n=gi;Pe=this,gi=!0;try{return this.fn()}finally{_v(this),Pe=t,gi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)$f(t);this.deps=this.depsTail=void 0,Bp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Od(this)&&this.run()}get dirty(){return Od(this)}}let fv=0,ll,cl;function mv(e,t=!1){if(e.flags|=8,t){e.next=cl,cl=e;return}e.next=ll,ll=e}function Uf(){fv++}function Bf(){if(--fv>0)return;if(cl){let t=cl;for(cl=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ll;){let t=ll;for(ll=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function pv(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _v(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),$f(i),Ob(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function Od(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gv(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gv(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Tl)||(e.globalVersion=Tl,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Od(e))))return;e.flags|=2;const t=e.dep,n=Pe,i=gi;Pe=e,gi=!0;try{pv(e);const r=e.fn(e._value);(t.version===0||Dn(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Pe=n,gi=i,_v(e),e.flags&=-3}}function $f(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)$f(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ob(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let gi=!0;const yv=[];function Sr(){yv.push(gi),gi=!1}function Cr(){const e=yv.pop();gi=e===void 0?!0:e}function Bp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Pe;Pe=void 0;try{t()}finally{Pe=n}}}let Tl=0;class xb{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class th{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pe||!gi||Pe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Pe)n=this.activeLink=new xb(Pe,this),Pe.deps?(n.prevDep=Pe.depsTail,Pe.depsTail.nextDep=n,Pe.depsTail=n):Pe.deps=Pe.depsTail=n,vv(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Pe.depsTail,n.nextDep=void 0,Pe.depsTail.nextDep=n,Pe.depsTail=n,Pe.deps===n&&(Pe.deps=i)}return n}trigger(t){this.version++,Tl++,this.notify(t)}notify(t){Uf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Bf()}}}function vv(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)vv(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const gu=new WeakMap,Hs=Symbol(""),xd=Symbol(""),Il=Symbol("");function gn(e,t,n){if(gi&&Pe){let i=gu.get(e);i||gu.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new th),r.map=i,r.key=n),r.track()}}function gr(e,t,n,i,r,o){const a=gu.get(e);if(!a){Tl++;return}const c=u=>{u&&u.trigger()};if(Uf(),t==="clear")a.forEach(c);else{const u=Rt(e),f=u&&Nf(n);if(u&&n==="length"){const m=Number(i);a.forEach((_,y)=>{(y==="length"||y===Il||!yi(y)&&y>=m)&&c(_)})}else switch((n!==void 0||a.has(void 0))&&c(a.get(n)),f&&c(a.get(Il)),t){case"add":u?f&&c(a.get("length")):(c(a.get(Hs)),Go(e)&&c(a.get(xd)));break;case"delete":u||(c(a.get(Hs)),Go(e)&&c(a.get(xd)));break;case"set":Go(e)&&c(a.get(Hs));break}}Bf()}function Mb(e,t){const n=gu.get(e);return n&&n.get(t)}function No(e){const t=oe(e);return t===e?t:(gn(t,"iterate",Il),oi(e)?t:t.map(an))}function eh(e){return gn(e=oe(e),"iterate",Il),e}const Nb={__proto__:null,[Symbol.iterator](){return id(this,Symbol.iterator,an)},concat(...e){return No(this).concat(...e.map(t=>Rt(t)?No(t):t))},entries(){return id(this,"entries",e=>(e[1]=an(e[1]),e))},every(e,t){return fr(this,"every",e,t,void 0,arguments)},filter(e,t){return fr(this,"filter",e,t,n=>n.map(an),arguments)},find(e,t){return fr(this,"find",e,t,an,arguments)},findIndex(e,t){return fr(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return fr(this,"findLast",e,t,an,arguments)},findLastIndex(e,t){return fr(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return fr(this,"forEach",e,t,void 0,arguments)},includes(...e){return rd(this,"includes",e)},indexOf(...e){return rd(this,"indexOf",e)},join(e){return No(this).join(e)},lastIndexOf(...e){return rd(this,"lastIndexOf",e)},map(e,t){return fr(this,"map",e,t,void 0,arguments)},pop(){return Wa(this,"pop")},push(...e){return Wa(this,"push",e)},reduce(e,...t){return $p(this,"reduce",e,t)},reduceRight(e,...t){return $p(this,"reduceRight",e,t)},shift(){return Wa(this,"shift")},some(e,t){return fr(this,"some",e,t,void 0,arguments)},splice(...e){return Wa(this,"splice",e)},toReversed(){return No(this).toReversed()},toSorted(e){return No(this).toSorted(e)},toSpliced(...e){return No(this).toSpliced(...e)},unshift(...e){return Wa(this,"unshift",e)},values(){return id(this,"values",an)}};function id(e,t,n){const i=eh(e),r=i[t]();return i!==e&&!oi(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.done||(o.value=n(o.value)),o}),r}const Db=Array.prototype;function fr(e,t,n,i,r,o){const a=eh(e),c=a!==e&&!oi(e),u=a[t];if(u!==Db[t]){const _=u.apply(e,o);return c?an(_):_}let f=n;a!==e&&(c?f=function(_,y){return n.call(this,an(_),y,e)}:n.length>2&&(f=function(_,y){return n.call(this,_,y,e)}));const m=u.call(a,f,i);return c&&r?r(m):m}function $p(e,t,n,i){const r=eh(e);let o=n;return r!==e&&(oi(e)?n.length>3&&(o=function(a,c,u){return n.call(this,a,c,u,e)}):o=function(a,c,u){return n.call(this,a,an(c),u,e)}),r[t](o,...i)}function rd(e,t,n){const i=oe(e);gn(i,"iterate",Il);const r=i[t](...n);return(r===-1||r===!1)&&Hf(n[0])?(n[0]=oe(n[0]),i[t](...n)):r}function Wa(e,t,n=[]){Sr(),Uf();const i=oe(e)[t].apply(e,n);return Bf(),Cr(),i}const Vb=Of("__proto__,__v_isRef,__isVue"),wv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yi));function Fb(e){yi(e)||(e=String(e));const t=oe(this);return gn(t,"has",e),t.hasOwnProperty(e)}class Ev{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(r?o?Zb:Pv:o?bv:Iv).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=Rt(t);if(!r){let u;if(a&&(u=Nb[n]))return u;if(n==="hasOwnProperty")return Fb}const c=Reflect.get(t,n,Fe(t)?t:i);if((yi(n)?wv.has(n):Vb(n))||(r||gn(t,"get",n),o))return c;if(Fe(c)){const u=a&&Nf(n)?c:c.value;return r&&Te(u)?Nd(u):u}return Te(c)?r?Nd(c):Qi(c):c}}class Tv extends Ev{constructor(t=!1){super(!1,t)}set(t,n,i,r){let o=t[n];if(!this._isShallow){const u=as(o);if(!oi(i)&&!as(i)&&(o=oe(o),i=oe(i)),!Rt(t)&&Fe(o)&&!Fe(i))return u||(o.value=i),!0}const a=Rt(t)&&Nf(n)?Number(n)<t.length:pe(t,n),c=Reflect.set(t,n,i,Fe(t)?t:r);return t===oe(r)&&(a?Dn(i,o)&&gr(t,"set",n,i):gr(t,"add",n,i)),c}deleteProperty(t,n){const i=pe(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&gr(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!yi(n)||!wv.has(n))&&gn(t,"has",n),i}ownKeys(t){return gn(t,"iterate",Rt(t)?"length":Hs),Reflect.ownKeys(t)}}class Ub extends Ev{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Bb=new Tv,$b=new Ub,zb=new Tv(!0);const Md=e=>e,Dc=e=>Reflect.getPrototypeOf(e);function jb(e,t,n){return function(...i){const r=this.__v_raw,o=oe(r),a=Go(o),c=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=r[e](...i),m=n?Md:t?yu:an;return!t&&gn(o,"iterate",u?xd:Hs),{next(){const{value:_,done:y}=f.next();return y?{value:_,done:y}:{value:c?[m(_[0]),m(_[1])]:m(_),done:y}},[Symbol.iterator](){return this}}}}function Vc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hb(e,t){const n={get(r){const o=this.__v_raw,a=oe(o),c=oe(r);e||(Dn(r,c)&&gn(a,"get",r),gn(a,"get",c));const{has:u}=Dc(a),f=t?Md:e?yu:an;if(u.call(a,r))return f(o.get(r));if(u.call(a,c))return f(o.get(c));o!==a&&o.get(r)},get size(){const r=this.__v_raw;return!e&&gn(oe(r),"iterate",Hs),r.size},has(r){const o=this.__v_raw,a=oe(o),c=oe(r);return e||(Dn(r,c)&&gn(a,"has",r),gn(a,"has",c)),r===c?o.has(r):o.has(r)||o.has(c)},forEach(r,o){const a=this,c=a.__v_raw,u=oe(c),f=t?Md:e?yu:an;return!e&&gn(u,"iterate",Hs),c.forEach((m,_)=>r.call(o,f(m),f(_),a))}};return cn(n,e?{add:Vc("add"),set:Vc("set"),delete:Vc("delete"),clear:Vc("clear")}:{add(r){!t&&!oi(r)&&!as(r)&&(r=oe(r));const o=oe(this);return Dc(o).has.call(o,r)||(o.add(r),gr(o,"add",r,r)),this},set(r,o){!t&&!oi(o)&&!as(o)&&(o=oe(o));const a=oe(this),{has:c,get:u}=Dc(a);let f=c.call(a,r);f||(r=oe(r),f=c.call(a,r));const m=u.call(a,r);return a.set(r,o),f?Dn(o,m)&&gr(a,"set",r,o):gr(a,"add",r,o),this},delete(r){const o=oe(this),{has:a,get:c}=Dc(o);let u=a.call(o,r);u||(r=oe(r),u=a.call(o,r)),c&&c.call(o,r);const f=o.delete(r);return u&&gr(o,"delete",r,void 0),f},clear(){const r=oe(this),o=r.size!==0,a=r.clear();return o&&gr(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=jb(r,e,t)}),n}function zf(e,t){const n=Hb(e,t);return(i,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(pe(n,r)&&r in i?n:i,r,o)}const Wb={get:zf(!1,!1)},qb={get:zf(!1,!0)},Gb={get:zf(!0,!1)};const Iv=new WeakMap,bv=new WeakMap,Pv=new WeakMap,Zb=new WeakMap;function Kb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yb(e){return e.__v_skip||!Object.isExtensible(e)?0:Kb(Eb(e))}function Qi(e){return as(e)?e:jf(e,!1,Bb,Wb,Iv)}function Av(e){return jf(e,!1,zb,qb,bv)}function Nd(e){return jf(e,!0,$b,Gb,Pv)}function jf(e,t,n,i,r){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Yb(e);if(o===0)return e;const a=r.get(e);if(a)return a;const c=new Proxy(e,o===2?i:n);return r.set(e,c),c}function es(e){return as(e)?es(e.__v_raw):!!(e&&e.__v_isReactive)}function as(e){return!!(e&&e.__v_isReadonly)}function oi(e){return!!(e&&e.__v_isShallow)}function Hf(e){return e?!!e.__v_raw:!1}function oe(e){const t=e&&e.__v_raw;return t?oe(t):e}function Wf(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&ov(e,"__v_skip",!0),e}const an=e=>Te(e)?Qi(e):e,yu=e=>Te(e)?Nd(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function Le(e){return Cv(e,!1)}function Sv(e){return Cv(e,!0)}function Cv(e,t){return Fe(e)?e:new Qb(e,t)}class Qb{constructor(t,n){this.dep=new th,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:oe(t),this._value=n?t:an(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||oi(t)||as(t);t=i?t:oe(t),Dn(t,n)&&(this._rawValue=t,this._value=i?t:an(t),this.dep.trigger())}}function wn(e){return Fe(e)?e.value:e}const Xb={get:(e,t,n)=>t==="__v_raw"?e:wn(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Fe(r)&&!Fe(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function kv(e){return es(e)?e:new Proxy(e,Xb)}class Jb{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new th,{get:i,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function tP(e){return new Jb(e)}function eP(e){const t=Rt(e)?new Array(e.length):{};for(const n in e)t[n]=iP(e,n);return t}class nP{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Mb(oe(this._object),this._key)}}function iP(e,t,n){const i=e[t];return Fe(i)?i:new nP(e,t,n)}class rP{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new th(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Tl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return mv(this,!0),!0}get value(){const t=this.dep.track();return gv(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sP(e,t,n=!1){let i,r;return jt(e)?i=e:(i=e.get,r=e.set),new rP(i,r,n)}const Fc={},vu=new WeakMap;let Bs;function oP(e,t=!1,n=Bs){if(n){let i=vu.get(n);i||vu.set(n,i=[]),i.push(e)}}function aP(e,t,n=le){const{immediate:i,deep:r,once:o,scheduler:a,augmentJob:c,call:u}=n,f=z=>r?z:oi(z)||r===!1||r===0?yr(z,1):yr(z);let m,_,y,w,b=!1,I=!1;if(Fe(e)?(_=()=>e.value,b=oi(e)):es(e)?(_=()=>f(e),b=!0):Rt(e)?(I=!0,b=e.some(z=>es(z)||oi(z)),_=()=>e.map(z=>{if(Fe(z))return z.value;if(es(z))return f(z);if(jt(z))return u?u(z,2):z()})):jt(e)?t?_=u?()=>u(e,2):e:_=()=>{if(y){Sr();try{y()}finally{Cr()}}const z=Bs;Bs=m;try{return u?u(e,3,[w]):e(w)}finally{Bs=z}}:_=$i,t&&r){const z=_,Q=r===!0?1/0:r;_=()=>yr(z(),Q)}const M=hv(),A=()=>{m.stop(),M&&M.active&&Mf(M.effects,m)};if(o&&t){const z=t;t=(...Q)=>{z(...Q),A()}}let D=I?new Array(e.length).fill(Fc):Fc;const B=z=>{if(!(!(m.flags&1)||!m.dirty&&!z))if(t){const Q=m.run();if(r||b||(I?Q.some((rt,S)=>Dn(rt,D[S])):Dn(Q,D))){y&&y();const rt=Bs;Bs=m;try{const S=[Q,D===Fc?void 0:I&&D[0]===Fc?[]:D,w];D=Q,u?u(t,3,S):t(...S)}finally{Bs=rt}}}else m.run()};return c&&c(B),m=new dv(_),m.scheduler=a?()=>a(B,!1):B,w=z=>oP(z,!1,m),y=m.onStop=()=>{const z=vu.get(m);if(z){if(u)u(z,4);else for(const Q of z)Q();vu.delete(m)}},t?i?B(!0):D=m.run():a?a(B.bind(null,!0),!0):m.run(),A.pause=m.pause.bind(m),A.resume=m.resume.bind(m),A.stop=A,A}function yr(e,t=1/0,n){if(t<=0||!Te(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Fe(e))yr(e.value,t,n);else if(Rt(e))for(let i=0;i<e.length;i++)yr(e[i],t,n);else if(pa(e)||Go(e))e.forEach(i=>{yr(i,t,n)});else if(rv(e)){for(const i in e)yr(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&yr(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wl(e,t,n,i){try{return i?e(...i):e()}catch(r){nh(r,t,n)}}function Xi(e,t,n,i){if(jt(e)){const r=Wl(e,t,n,i);return r&&nv(r)&&r.catch(o=>{nh(o,t,n)}),r}if(Rt(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Xi(e[o],t,n,i));return r}}function nh(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||le;if(t){let c=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const m=c.ec;if(m){for(let _=0;_<m.length;_++)if(m[_](e,u,f)===!1)return}c=c.parent}if(o){Sr(),Wl(o,null,10,[e,u,f]),Cr();return}}lP(e,n,r,i,a)}function lP(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const Cn=[];let Di=-1;const Zo=[];let qr=null,Vo=0;const Lv=Promise.resolve();let wu=null;function ih(e){const t=wu||Lv;return e?t.then(this?e.bind(this):e):t}function cP(e){let t=Di+1,n=Cn.length;for(;t<n;){const i=t+n>>>1,r=Cn[i],o=bl(r);o<e||o===e&&r.flags&2?t=i+1:n=i}return t}function qf(e){if(!(e.flags&1)){const t=bl(e),n=Cn[Cn.length-1];!n||!(e.flags&2)&&t>=bl(n)?Cn.push(e):Cn.splice(cP(t),0,e),e.flags|=1,Rv()}}function Rv(){wu||(wu=Lv.then(xv))}function uP(e){Rt(e)?Zo.push(...e):qr&&e.id===-1?qr.splice(Vo+1,0,e):e.flags&1||(Zo.push(e),e.flags|=1),Rv()}function zp(e,t,n=Di+1){for(;n<Cn.length;n++){const i=Cn[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Cn.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Ov(e){if(Zo.length){const t=[...new Set(Zo)].sort((n,i)=>bl(n)-bl(i));if(Zo.length=0,qr){qr.push(...t);return}for(qr=t,Vo=0;Vo<qr.length;Vo++){const n=qr[Vo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}qr=null,Vo=0}}const bl=e=>e.id==null?e.flags&2?-1:1/0:e.id;function xv(e){try{for(Di=0;Di<Cn.length;Di++){const t=Cn[Di];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wl(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Di<Cn.length;Di++){const t=Cn[Di];t&&(t.flags&=-2)}Di=-1,Cn.length=0,Ov(),wu=null,(Cn.length||Zo.length)&&xv()}}let vn=null,Mv=null;function Eu(e){const t=vn;return vn=e,Mv=e&&e.type.__scopeId||null,t}function Ks(e,t=vn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Au(-1);const o=Eu(t);let a;try{a=e(...r)}finally{Eu(o),i._d&&Au(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function Tu(e,t){if(vn===null)return e;const n=ah(vn),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,a,c,u=le]=t[r];o&&(jt(o)&&(o={mounted:o,updated:o}),o.deep&&yr(a),i.push({dir:o,instance:n,value:a,oldValue:void 0,arg:c,modifiers:u}))}return e}function Fs(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let a=0;a<r.length;a++){const c=r[a];o&&(c.oldValue=o[a].value);let u=c.dir[i];u&&(Sr(),Xi(u,n,8,[e.el,c,e,t]),Cr())}}const hP=Symbol("_vte"),dP=e=>e.__isTeleport,fP=Symbol("_leaveCb");function Gf(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Gf(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ue(e,t){return jt(e)?cn({name:e.name},t,{setup:e}):e}function Nv(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Iu=new WeakMap;function ul(e,t,n,i,r=!1){if(Rt(e)){e.forEach((b,I)=>ul(b,t&&(Rt(t)?t[I]:t),n,i,r));return}if(Ko(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ul(e,t,n,i.component.subTree);return}const o=i.shapeFlag&4?ah(i.component):i.el,a=r?null:o,{i:c,r:u}=e,f=t&&t.r,m=c.refs===le?c.refs={}:c.refs,_=c.setupState,y=oe(_),w=_===le?ev:b=>pe(y,b);if(f!=null&&f!==u){if(jp(t),Xe(f))m[f]=null,w(f)&&(_[f]=null);else if(Fe(f)){f.value=null;const b=t;b.k&&(m[b.k]=null)}}if(jt(u))Wl(u,c,12,[a,m]);else{const b=Xe(u),I=Fe(u);if(b||I){const M=()=>{if(e.f){const A=b?w(u)?_[u]:m[u]:u.value;if(r)Rt(A)&&Mf(A,o);else if(Rt(A))A.includes(o)||A.push(o);else if(b)m[u]=[o],w(u)&&(_[u]=m[u]);else{const D=[o];u.value=D,e.k&&(m[e.k]=D)}}else b?(m[u]=a,w(u)&&(_[u]=a)):I&&(u.value=a,e.k&&(m[e.k]=a))};if(a){const A=()=>{M(),Iu.delete(e)};A.id=-1,Iu.set(e,A),$n(A,n)}else jp(e),M()}}}function jp(e){const t=Iu.get(e);t&&(t.flags|=8,Iu.delete(e))}Ju().requestIdleCallback;Ju().cancelIdleCallback;const Ko=e=>!!e.type.__asyncLoader,Dv=e=>e.type.__isKeepAlive;function mP(e,t){Vv(e,"a",t)}function pP(e,t){Vv(e,"da",t)}function Vv(e,t,n=kn){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(rh(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Dv(r.parent.vnode)&&_P(i,t,n,r),r=r.parent}}function _P(e,t,n,i){const r=rh(t,e,i,!0);io(()=>{Mf(i[t],r)},n)}function rh(e,t,n=kn,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{Sr();const c=Gl(n),u=Xi(t,n,e,a);return c(),Cr(),u});return i?r.unshift(o):r.push(o),o}}const Mr=e=>(t,n=kn)=>{(!Sl||e==="sp")&&rh(e,(...i)=>t(...i),n)},gP=Mr("bm"),ys=Mr("m"),yP=Mr("bu"),vP=Mr("u"),wP=Mr("bum"),io=Mr("um"),EP=Mr("sp"),TP=Mr("rtg"),IP=Mr("rtc");function bP(e,t=kn){rh("ec",e,t)}const PP=Symbol.for("v-ndc");function ro(e,t,n,i){let r;const o=n,a=Rt(e);if(a||Xe(e)){const c=a&&es(e);let u=!1,f=!1;c&&(u=!oi(e),f=as(e),e=eh(e)),r=new Array(e.length);for(let m=0,_=e.length;m<_;m++)r[m]=t(u?f?yu(an(e[m])):an(e[m]):e[m],m,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let c=0;c<e;c++)r[c]=t(c+1,c,void 0,o)}else if(Te(e))if(e[Symbol.iterator])r=Array.from(e,(c,u)=>t(c,u,void 0,o));else{const c=Object.keys(e);r=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const m=c[u];r[u]=t(e[m],m,u,o)}}else r=[];return r}function AP(e,t,n={},i,r){if(vn.ce||vn.parent&&Ko(vn.parent)&&vn.parent.ce){const f=Object.keys(n).length>0;return _t(),Ui(Ne,null,[Ft("slot",n,i)],f?-2:64)}let o=e[t];o&&o._c&&(o._d=!1),_t();const a=o&&Fv(o(n)),c=n.key||a&&a.key,u=Ui(Ne,{key:(c&&!yi(c)?c:`_${t}`)+(!a&&i?"_fb":"")},a||[],a&&e._===1?64:-2);return o&&o._c&&(o._d=!0),u}function Fv(e){return e.some(t=>Al(t)?!(t.type===kr||t.type===Ne&&!Fv(t.children)):!0)?e:null}const Dd=e=>e?rw(e)?ah(e):Dd(e.parent):null,hl=cn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Dd(e.parent),$root:e=>Dd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Bv(e),$forceUpdate:e=>e.f||(e.f=()=>{qf(e.update)}),$nextTick:e=>e.n||(e.n=ih.bind(e.proxy)),$watch:e=>KP.bind(e)}),sd=(e,t)=>e!==le&&!e.__isScriptSetup&&pe(e,t),SP={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:o,accessCache:a,type:c,appContext:u}=e;let f;if(t[0]!=="$"){const w=a[t];if(w!==void 0)switch(w){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(sd(i,t))return a[t]=1,i[t];if(r!==le&&pe(r,t))return a[t]=2,r[t];if((f=e.propsOptions[0])&&pe(f,t))return a[t]=3,o[t];if(n!==le&&pe(n,t))return a[t]=4,n[t];Vd&&(a[t]=0)}}const m=hl[t];let _,y;if(m)return t==="$attrs"&&gn(e.attrs,"get",""),m(e);if((_=c.__cssModules)&&(_=_[t]))return _;if(n!==le&&pe(n,t))return a[t]=4,n[t];if(y=u.config.globalProperties,pe(y,t))return y[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;return sd(r,t)?(r[t]=n,!0):i!==le&&pe(i,t)?(i[t]=n,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o,type:a}},c){let u,f;return!!(n[c]||e!==le&&c[0]!=="$"&&pe(e,c)||sd(t,c)||(u=o[0])&&pe(u,c)||pe(i,c)||pe(hl,c)||pe(r.config.globalProperties,c)||(f=a.__cssModules)&&f[c])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function bu(e){return Rt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Zf(e,t){return!e||!t?e||t:Rt(e)&&Rt(t)?e.concat(t):cn({},bu(e),bu(t))}let Vd=!0;function CP(e){const t=Bv(e),n=e.proxy,i=e.ctx;Vd=!1,t.beforeCreate&&Hp(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:a,watch:c,provide:u,inject:f,created:m,beforeMount:_,mounted:y,beforeUpdate:w,updated:b,activated:I,deactivated:M,beforeDestroy:A,beforeUnmount:D,destroyed:B,unmounted:z,render:Q,renderTracked:rt,renderTriggered:S,errorCaptured:C,serverPrefetch:O,expose:F,inheritAttrs:x,components:j,directives:V,filters:Kt}=t;if(f&&kP(f,i,null),a)for(const Lt in a){const dt=a[Lt];jt(dt)&&(i[Lt]=dt.bind(n))}if(r){const Lt=r.call(n,n);Te(Lt)&&(e.data=Qi(Lt))}if(Vd=!0,o)for(const Lt in o){const dt=o[Lt],we=jt(dt)?dt.bind(n,n):jt(dt.get)?dt.get.bind(n,n):$i,At=!jt(dt)&&jt(dt.set)?dt.set.bind(n):$i,zt=ee({get:we,set:At});Object.defineProperty(i,Lt,{enumerable:!0,configurable:!0,get:()=>zt.value,set:Yt=>zt.value=Yt})}if(c)for(const Lt in c)Uv(c[Lt],i,n,Lt);if(u){const Lt=jt(u)?u.call(n):u;Reflect.ownKeys(Lt).forEach(dt=>{nu(dt,Lt[dt])})}m&&Hp(m,e,"c");function Ut(Lt,dt){Rt(dt)?dt.forEach(we=>Lt(we.bind(n))):dt&&Lt(dt.bind(n))}if(Ut(gP,_),Ut(ys,y),Ut(yP,w),Ut(vP,b),Ut(mP,I),Ut(pP,M),Ut(bP,C),Ut(IP,rt),Ut(TP,S),Ut(wP,D),Ut(io,z),Ut(EP,O),Rt(F))if(F.length){const Lt=e.exposed||(e.exposed={});F.forEach(dt=>{Object.defineProperty(Lt,dt,{get:()=>n[dt],set:we=>n[dt]=we,enumerable:!0})})}else e.exposed||(e.exposed={});Q&&e.render===$i&&(e.render=Q),x!=null&&(e.inheritAttrs=x),j&&(e.components=j),V&&(e.directives=V),O&&Nv(e)}function kP(e,t,n=$i){Rt(e)&&(e=Fd(e));for(const i in e){const r=e[i];let o;Te(r)?"default"in r?o=qn(r.from||i,r.default,!0):o=qn(r.from||i):o=qn(r),Fe(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[i]=o}}function Hp(e,t,n){Xi(Rt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Uv(e,t,n,i){let r=i.includes(".")?Xv(n,i):()=>n[i];if(Xe(e)){const o=t[e];jt(o)&&Gn(r,o)}else if(jt(e))Gn(r,e.bind(n));else if(Te(e))if(Rt(e))e.forEach(o=>Uv(o,t,n,i));else{const o=jt(e.handler)?e.handler.bind(n):t[e.handler];jt(o)&&Gn(r,o,e)}}function Bv(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,c=o.get(t);let u;return c?u=c:!r.length&&!n&&!i?u=t:(u={},r.length&&r.forEach(f=>Pu(u,f,a,!0)),Pu(u,t,a)),Te(t)&&o.set(t,u),u}function Pu(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&Pu(e,o,n,!0),r&&r.forEach(a=>Pu(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const c=LP[a]||n&&n[a];e[a]=c?c(e[a],t[a]):t[a]}return e}const LP={data:Wp,props:qp,emits:qp,methods:Xa,computed:Xa,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:Xa,directives:Xa,watch:OP,provide:Wp,inject:RP};function Wp(e,t){return t?e?function(){return cn(jt(e)?e.call(this,this):e,jt(t)?t.call(this,this):t)}:t:e}function RP(e,t){return Xa(Fd(e),Fd(t))}function Fd(e){if(Rt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function An(e,t){return e?[...new Set([].concat(e,t))]:t}function Xa(e,t){return e?cn(Object.create(null),e,t):t}function qp(e,t){return e?Rt(e)&&Rt(t)?[...new Set([...e,...t])]:cn(Object.create(null),bu(e),bu(t??{})):t}function OP(e,t){if(!e)return t;if(!t)return e;const n=cn(Object.create(null),e);for(const i in t)n[i]=An(e[i],t[i]);return n}function $v(){return{app:null,config:{isNativeTag:ev,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xP=0;function MP(e,t){return function(i,r=null){jt(i)||(i=cn({},i)),r!=null&&!Te(r)&&(r=null);const o=$v(),a=new WeakSet,c=[];let u=!1;const f=o.app={_uid:xP++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:pA,get config(){return o.config},set config(m){},use(m,..._){return a.has(m)||(m&&jt(m.install)?(a.add(m),m.install(f,..._)):jt(m)&&(a.add(m),m(f,..._))),f},mixin(m){return o.mixins.includes(m)||o.mixins.push(m),f},component(m,_){return _?(o.components[m]=_,f):o.components[m]},directive(m,_){return _?(o.directives[m]=_,f):o.directives[m]},mount(m,_,y){if(!u){const w=f._ceVNode||Ft(i,r);return w.appContext=o,y===!0?y="svg":y===!1&&(y=void 0),e(w,m,y),u=!0,f._container=m,m.__vue_app__=f,ah(w.component)}},onUnmount(m){c.push(m)},unmount(){u&&(Xi(c,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(m,_){return o.provides[m]=_,f},runWithContext(m){const _=Ws;Ws=f;try{return m()}finally{Ws=_}}};return f}}let Ws=null;function nu(e,t){if(kn){let n=kn.provides;const i=kn.parent&&kn.parent.provides;i===n&&(n=kn.provides=Object.create(i)),n[e]=t}}function qn(e,t,n=!1){const i=ls();if(i||Ws){let r=Ws?Ws._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&jt(t)?t.call(i&&i.proxy):t}}function NP(){return!!(ls()||Ws)}const zv={},jv=()=>Object.create(zv),Hv=e=>Object.getPrototypeOf(e)===zv;function DP(e,t,n,i=!1){const r={},o=jv();e.propsDefaults=Object.create(null),Wv(e,t,r,o);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=i?r:Av(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function VP(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:a}}=e,c=oe(r),[u]=e.propsOptions;let f=!1;if((i||a>0)&&!(a&16)){if(a&8){const m=e.vnode.dynamicProps;for(let _=0;_<m.length;_++){let y=m[_];if(oh(e.emitsOptions,y))continue;const w=t[y];if(u)if(pe(o,y))w!==o[y]&&(o[y]=w,f=!0);else{const b=Ar(y);r[b]=Ud(u,c,b,w,e,!1)}else w!==o[y]&&(o[y]=w,f=!0)}}}else{Wv(e,t,r,o)&&(f=!0);let m;for(const _ in c)(!t||!pe(t,_)&&((m=gs(_))===_||!pe(t,m)))&&(u?n&&(n[_]!==void 0||n[m]!==void 0)&&(r[_]=Ud(u,c,_,void 0,e,!0)):delete r[_]);if(o!==c)for(const _ in o)(!t||!pe(t,_))&&(delete o[_],f=!0)}f&&gr(e.attrs,"set","")}function Wv(e,t,n,i){const[r,o]=e.propsOptions;let a=!1,c;if(t)for(let u in t){if(al(u))continue;const f=t[u];let m;r&&pe(r,m=Ar(u))?!o||!o.includes(m)?n[m]=f:(c||(c={}))[m]=f:oh(e.emitsOptions,u)||(!(u in i)||f!==i[u])&&(i[u]=f,a=!0)}if(o){const u=oe(n),f=c||le;for(let m=0;m<o.length;m++){const _=o[m];n[_]=Ud(r,u,_,f[_],e,!pe(f,_))}}return a}function Ud(e,t,n,i,r,o){const a=e[n];if(a!=null){const c=pe(a,"default");if(c&&i===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&jt(u)){const{propsDefaults:f}=r;if(n in f)i=f[n];else{const m=Gl(r);i=f[n]=u.call(null,t),m()}}else i=u;r.ce&&r.ce._setProp(n,i)}a[0]&&(o&&!c?i=!1:a[1]&&(i===""||i===gs(n))&&(i=!0))}return i}const FP=new WeakMap;function qv(e,t,n=!1){const i=n?FP:t.propsCache,r=i.get(e);if(r)return r;const o=e.props,a={},c=[];let u=!1;if(!jt(e)){const m=_=>{u=!0;const[y,w]=qv(_,t,!0);cn(a,y),w&&c.push(...w)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!o&&!u)return Te(e)&&i.set(e,qo),qo;if(Rt(o))for(let m=0;m<o.length;m++){const _=Ar(o[m]);Gp(_)&&(a[_]=le)}else if(o)for(const m in o){const _=Ar(m);if(Gp(_)){const y=o[m],w=a[_]=Rt(y)||jt(y)?{type:y}:cn({},y),b=w.type;let I=!1,M=!0;if(Rt(b))for(let A=0;A<b.length;++A){const D=b[A],B=jt(D)&&D.name;if(B==="Boolean"){I=!0;break}else B==="String"&&(M=!1)}else I=jt(b)&&b.name==="Boolean";w[0]=I,w[1]=M,(I||pe(w,"default"))&&c.push(_)}}const f=[a,c];return Te(e)&&i.set(e,f),f}function Gp(e){return e[0]!=="$"&&!al(e)}const Kf=e=>e==="_"||e==="_ctx"||e==="$stable",Yf=e=>Rt(e)?e.map(Fi):[Fi(e)],UP=(e,t,n)=>{if(t._n)return t;const i=Ks((...r)=>Yf(t(...r)),n);return i._c=!1,i},Gv=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Kf(r))continue;const o=e[r];if(jt(o))t[r]=UP(r,o,i);else if(o!=null){const a=Yf(o);t[r]=()=>a}}},Zv=(e,t)=>{const n=Yf(t);e.slots.default=()=>n},Kv=(e,t,n)=>{for(const i in t)(n||!Kf(i))&&(e[i]=t[i])},BP=(e,t,n)=>{const i=e.slots=jv();if(e.vnode.shapeFlag&32){const r=t._;r?(Kv(i,t,n),n&&ov(i,"_",r,!0)):Gv(t,i)}else t&&Zv(e,t)},$P=(e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,a=le;if(i.shapeFlag&32){const c=t._;c?n&&c===1?o=!1:Kv(r,t,n):(o=!t.$stable,Gv(t,r)),a=t}else t&&(Zv(e,t),a={default:1});if(o)for(const c in r)!Kf(c)&&a[c]==null&&delete r[c]},$n=nA;function zP(e){return jP(e)}function jP(e,t){const n=Ju();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:a,createText:c,createComment:u,setText:f,setElementText:m,parentNode:_,nextSibling:y,setScopeId:w=$i,insertStaticContent:b}=e,I=(N,U,q,it=null,st=null,et=null,k=void 0,R=null,H=!!U.dynamicChildren)=>{if(N===U)return;N&&!qa(N,U)&&(it=tt(N),Yt(N,st,et,!0),N=null),U.patchFlag===-2&&(H=!1,U.dynamicChildren=null);const{type:Z,ref:pt,shapeFlag:ot}=U;switch(Z){case ql:M(N,U,q,it);break;case kr:A(N,U,q,it);break;case ad:N==null&&D(U,q,it,k);break;case Ne:j(N,U,q,it,st,et,k,R,H);break;default:ot&1?Q(N,U,q,it,st,et,k,R,H):ot&6?V(N,U,q,it,st,et,k,R,H):(ot&64||ot&128)&&Z.process(N,U,q,it,st,et,k,R,H,wt)}pt!=null&&st?ul(pt,N&&N.ref,et,U||N,!U):pt==null&&N&&N.ref!=null&&ul(N.ref,null,et,N,!0)},M=(N,U,q,it)=>{if(N==null)i(U.el=c(U.children),q,it);else{const st=U.el=N.el;U.children!==N.children&&f(st,U.children)}},A=(N,U,q,it)=>{N==null?i(U.el=u(U.children||""),q,it):U.el=N.el},D=(N,U,q,it)=>{[N.el,N.anchor]=b(N.children,U,q,it,N.el,N.anchor)},B=({el:N,anchor:U},q,it)=>{let st;for(;N&&N!==U;)st=y(N),i(N,q,it),N=st;i(U,q,it)},z=({el:N,anchor:U})=>{let q;for(;N&&N!==U;)q=y(N),r(N),N=q;r(U)},Q=(N,U,q,it,st,et,k,R,H)=>{U.type==="svg"?k="svg":U.type==="math"&&(k="mathml"),N==null?rt(U,q,it,st,et,k,R,H):O(N,U,st,et,k,R,H)},rt=(N,U,q,it,st,et,k,R)=>{let H,Z;const{props:pt,shapeFlag:ot,transition:W,dirs:X}=N;if(H=N.el=a(N.type,et,pt&&pt.is,pt),ot&8?m(H,N.children):ot&16&&C(N.children,H,null,it,st,od(N,et),k,R),X&&Fs(N,null,it,"created"),S(H,N,N.scopeId,k,it),pt){for(const kt in pt)kt!=="value"&&!al(kt)&&o(H,kt,null,pt[kt],et,it);"value"in pt&&o(H,"value",null,pt.value,et),(Z=pt.onVnodeBeforeMount)&&Oi(Z,it,N)}X&&Fs(N,null,it,"beforeMount");const vt=HP(st,W);vt&&W.beforeEnter(H),i(H,U,q),((Z=pt&&pt.onVnodeMounted)||vt||X)&&$n(()=>{Z&&Oi(Z,it,N),vt&&W.enter(H),X&&Fs(N,null,it,"mounted")},st)},S=(N,U,q,it,st)=>{if(q&&w(N,q),it)for(let et=0;et<it.length;et++)w(N,it[et]);if(st){let et=st.subTree;if(U===et||ew(et.type)&&(et.ssContent===U||et.ssFallback===U)){const k=st.vnode;S(N,k,k.scopeId,k.slotScopeIds,st.parent)}}},C=(N,U,q,it,st,et,k,R,H=0)=>{for(let Z=H;Z<N.length;Z++){const pt=N[Z]=R?Gr(N[Z]):Fi(N[Z]);I(null,pt,U,q,it,st,et,k,R)}},O=(N,U,q,it,st,et,k)=>{const R=U.el=N.el;let{patchFlag:H,dynamicChildren:Z,dirs:pt}=U;H|=N.patchFlag&16;const ot=N.props||le,W=U.props||le;let X;if(q&&Us(q,!1),(X=W.onVnodeBeforeUpdate)&&Oi(X,q,U,N),pt&&Fs(U,N,q,"beforeUpdate"),q&&Us(q,!0),(ot.innerHTML&&W.innerHTML==null||ot.textContent&&W.textContent==null)&&m(R,""),Z?F(N.dynamicChildren,Z,R,q,it,od(U,st),et):k||dt(N,U,R,null,q,it,od(U,st),et,!1),H>0){if(H&16)x(R,ot,W,q,st);else if(H&2&&ot.class!==W.class&&o(R,"class",null,W.class,st),H&4&&o(R,"style",ot.style,W.style,st),H&8){const vt=U.dynamicProps;for(let kt=0;kt<vt.length;kt++){const Bt=vt[kt],ke=ot[Bt],Ie=W[Bt];(Ie!==ke||Bt==="value")&&o(R,Bt,ke,Ie,st,q)}}H&1&&N.children!==U.children&&m(R,U.children)}else!k&&Z==null&&x(R,ot,W,q,st);((X=W.onVnodeUpdated)||pt)&&$n(()=>{X&&Oi(X,q,U,N),pt&&Fs(U,N,q,"updated")},it)},F=(N,U,q,it,st,et,k)=>{for(let R=0;R<U.length;R++){const H=N[R],Z=U[R],pt=H.el&&(H.type===Ne||!qa(H,Z)||H.shapeFlag&198)?_(H.el):q;I(H,Z,pt,null,it,st,et,k,!0)}},x=(N,U,q,it,st)=>{if(U!==q){if(U!==le)for(const et in U)!al(et)&&!(et in q)&&o(N,et,U[et],null,st,it);for(const et in q){if(al(et))continue;const k=q[et],R=U[et];k!==R&&et!=="value"&&o(N,et,R,k,st,it)}"value"in q&&o(N,"value",U.value,q.value,st)}},j=(N,U,q,it,st,et,k,R,H)=>{const Z=U.el=N?N.el:c(""),pt=U.anchor=N?N.anchor:c("");let{patchFlag:ot,dynamicChildren:W,slotScopeIds:X}=U;X&&(R=R?R.concat(X):X),N==null?(i(Z,q,it),i(pt,q,it),C(U.children||[],q,pt,st,et,k,R,H)):ot>0&&ot&64&&W&&N.dynamicChildren?(F(N.dynamicChildren,W,q,st,et,k,R),(U.key!=null||st&&U===st.subTree)&&Yv(N,U,!0)):dt(N,U,q,pt,st,et,k,R,H)},V=(N,U,q,it,st,et,k,R,H)=>{U.slotScopeIds=R,N==null?U.shapeFlag&512?st.ctx.activate(U,q,it,k,H):Kt(U,q,it,st,et,k,H):xe(N,U,H)},Kt=(N,U,q,it,st,et,k)=>{const R=N.component=cA(N,it,st);if(Dv(N)&&(R.ctx.renderer=wt),uA(R,!1,k),R.asyncDep){if(st&&st.registerDep(R,Ut,k),!N.el){const H=R.subTree=Ft(kr);A(null,H,U,q),N.placeholder=H.el}}else Ut(R,N,U,q,st,et,k)},xe=(N,U,q)=>{const it=U.component=N.component;if(tA(N,U,q))if(it.asyncDep&&!it.asyncResolved){Lt(it,U,q);return}else it.next=U,it.update();else U.el=N.el,it.vnode=U},Ut=(N,U,q,it,st,et,k)=>{const R=()=>{if(N.isMounted){let{next:ot,bu:W,u:X,parent:vt,vnode:kt}=N;{const hn=Qv(N);if(hn){ot&&(ot.el=kt.el,Lt(N,ot,k)),hn.asyncDep.then(()=>{N.isUnmounted||R()});return}}let Bt=ot,ke;Us(N,!1),ot?(ot.el=kt.el,Lt(N,ot,k)):ot=kt,W&&eu(W),(ke=ot.props&&ot.props.onVnodeBeforeUpdate)&&Oi(ke,vt,ot,kt),Us(N,!0);const Ie=Kp(N),en=N.subTree;N.subTree=Ie,I(en,Ie,_(en.el),tt(en),N,st,et),ot.el=Ie.el,Bt===null&&eA(N,Ie.el),X&&$n(X,st),(ke=ot.props&&ot.props.onVnodeUpdated)&&$n(()=>Oi(ke,vt,ot,kt),st)}else{let ot;const{el:W,props:X}=U,{bm:vt,m:kt,parent:Bt,root:ke,type:Ie}=N,en=Ko(U);Us(N,!1),vt&&eu(vt),!en&&(ot=X&&X.onVnodeBeforeMount)&&Oi(ot,Bt,U),Us(N,!0);{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle(Ie);const hn=N.subTree=Kp(N);I(null,hn,q,it,N,st,et),U.el=hn.el}if(kt&&$n(kt,st),!en&&(ot=X&&X.onVnodeMounted)){const hn=U;$n(()=>Oi(ot,Bt,hn),st)}(U.shapeFlag&256||Bt&&Ko(Bt.vnode)&&Bt.vnode.shapeFlag&256)&&N.a&&$n(N.a,st),N.isMounted=!0,U=q=it=null}};N.scope.on();const H=N.effect=new dv(R);N.scope.off();const Z=N.update=H.run.bind(H),pt=N.job=H.runIfDirty.bind(H);pt.i=N,pt.id=N.uid,H.scheduler=()=>qf(pt),Us(N,!0),Z()},Lt=(N,U,q)=>{U.component=N;const it=N.vnode.props;N.vnode=U,N.next=null,VP(N,U.props,it,q),$P(N,U.children,q),Sr(),zp(N),Cr()},dt=(N,U,q,it,st,et,k,R,H=!1)=>{const Z=N&&N.children,pt=N?N.shapeFlag:0,ot=U.children,{patchFlag:W,shapeFlag:X}=U;if(W>0){if(W&128){At(Z,ot,q,it,st,et,k,R,H);return}else if(W&256){we(Z,ot,q,it,st,et,k,R,H);return}}X&8?(pt&16&&Ct(Z,st,et),ot!==Z&&m(q,ot)):pt&16?X&16?At(Z,ot,q,it,st,et,k,R,H):Ct(Z,st,et,!0):(pt&8&&m(q,""),X&16&&C(ot,q,it,st,et,k,R,H))},we=(N,U,q,it,st,et,k,R,H)=>{N=N||qo,U=U||qo;const Z=N.length,pt=U.length,ot=Math.min(Z,pt);let W;for(W=0;W<ot;W++){const X=U[W]=H?Gr(U[W]):Fi(U[W]);I(N[W],X,q,null,st,et,k,R,H)}Z>pt?Ct(N,st,et,!0,!1,ot):C(U,q,it,st,et,k,R,H,ot)},At=(N,U,q,it,st,et,k,R,H)=>{let Z=0;const pt=U.length;let ot=N.length-1,W=pt-1;for(;Z<=ot&&Z<=W;){const X=N[Z],vt=U[Z]=H?Gr(U[Z]):Fi(U[Z]);if(qa(X,vt))I(X,vt,q,null,st,et,k,R,H);else break;Z++}for(;Z<=ot&&Z<=W;){const X=N[ot],vt=U[W]=H?Gr(U[W]):Fi(U[W]);if(qa(X,vt))I(X,vt,q,null,st,et,k,R,H);else break;ot--,W--}if(Z>ot){if(Z<=W){const X=W+1,vt=X<pt?U[X].el:it;for(;Z<=W;)I(null,U[Z]=H?Gr(U[Z]):Fi(U[Z]),q,vt,st,et,k,R,H),Z++}}else if(Z>W)for(;Z<=ot;)Yt(N[Z],st,et,!0),Z++;else{const X=Z,vt=Z,kt=new Map;for(Z=vt;Z<=W;Z++){const He=U[Z]=H?Gr(U[Z]):Fi(U[Z]);He.key!=null&&kt.set(He.key,Z)}let Bt,ke=0;const Ie=W-vt+1;let en=!1,hn=0;const Ln=new Array(Ie);for(Z=0;Z<Ie;Z++)Ln[Z]=0;for(Z=X;Z<=ot;Z++){const He=N[Z];if(ke>=Ie){Yt(He,st,et,!0);continue}let We;if(He.key!=null)We=kt.get(He.key);else for(Bt=vt;Bt<=W;Bt++)if(Ln[Bt-vt]===0&&qa(He,U[Bt])){We=Bt;break}We===void 0?Yt(He,st,et,!0):(Ln[We-vt]=Z+1,We>=hn?hn=We:en=!0,I(He,U[We],q,null,st,et,k,R,H),ke++)}const Ii=en?WP(Ln):qo;for(Bt=Ii.length-1,Z=Ie-1;Z>=0;Z--){const He=vt+Z,We=U[He],ci=U[He+1],er=He+1<pt?ci.el||ci.placeholder:it;Ln[Z]===0?I(null,We,q,er,st,et,k,R,H):en&&(Bt<0||Z!==Ii[Bt]?zt(We,q,er,2):Bt--)}}},zt=(N,U,q,it,st=null)=>{const{el:et,type:k,transition:R,children:H,shapeFlag:Z}=N;if(Z&6){zt(N.component.subTree,U,q,it);return}if(Z&128){N.suspense.move(U,q,it);return}if(Z&64){k.move(N,U,q,wt);return}if(k===Ne){i(et,U,q);for(let ot=0;ot<H.length;ot++)zt(H[ot],U,q,it);i(N.anchor,U,q);return}if(k===ad){B(N,U,q);return}if(it!==2&&Z&1&&R)if(it===0)R.beforeEnter(et),i(et,U,q),$n(()=>R.enter(et),st);else{const{leave:ot,delayLeave:W,afterLeave:X}=R,vt=()=>{N.ctx.isUnmounted?r(et):i(et,U,q)},kt=()=>{et._isLeaving&&et[fP](!0),ot(et,()=>{vt(),X&&X()})};W?W(et,vt,kt):kt()}else i(et,U,q)},Yt=(N,U,q,it=!1,st=!1)=>{const{type:et,props:k,ref:R,children:H,dynamicChildren:Z,shapeFlag:pt,patchFlag:ot,dirs:W,cacheIndex:X}=N;if(ot===-2&&(st=!1),R!=null&&(Sr(),ul(R,null,q,N,!0),Cr()),X!=null&&(U.renderCache[X]=void 0),pt&256){U.ctx.deactivate(N);return}const vt=pt&1&&W,kt=!Ko(N);let Bt;if(kt&&(Bt=k&&k.onVnodeBeforeUnmount)&&Oi(Bt,U,N),pt&6)Ht(N.component,q,it);else{if(pt&128){N.suspense.unmount(q,it);return}vt&&Fs(N,null,U,"beforeUnmount"),pt&64?N.type.remove(N,U,q,wt,it):Z&&!Z.hasOnce&&(et!==Ne||ot>0&&ot&64)?Ct(Z,U,q,!1,!0):(et===Ne&&ot&384||!st&&pt&16)&&Ct(H,U,q),it&&ye(N)}(kt&&(Bt=k&&k.onVnodeUnmounted)||vt)&&$n(()=>{Bt&&Oi(Bt,U,N),vt&&Fs(N,null,U,"unmounted")},q)},ye=N=>{const{type:U,el:q,anchor:it,transition:st}=N;if(U===Ne){Qt(q,it);return}if(U===ad){z(N);return}const et=()=>{r(q),st&&!st.persisted&&st.afterLeave&&st.afterLeave()};if(N.shapeFlag&1&&st&&!st.persisted){const{leave:k,delayLeave:R}=st,H=()=>k(q,et);R?R(N.el,et,H):H()}else et()},Qt=(N,U)=>{let q;for(;N!==U;)q=y(N),r(N),N=q;r(U)},Ht=(N,U,q)=>{const{bum:it,scope:st,job:et,subTree:k,um:R,m:H,a:Z}=N;Zp(H),Zp(Z),it&&eu(it),st.stop(),et&&(et.flags|=8,Yt(k,N,U,q)),R&&$n(R,U),$n(()=>{N.isUnmounted=!0},U)},Ct=(N,U,q,it=!1,st=!1,et=0)=>{for(let k=et;k<N.length;k++)Yt(N[k],U,q,it,st)},tt=N=>{if(N.shapeFlag&6)return tt(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const U=y(N.anchor||N.el),q=U&&U[hP];return q?y(q):U};let ut=!1;const ft=(N,U,q)=>{N==null?U._vnode&&Yt(U._vnode,null,null,!0):I(U._vnode||null,N,U,null,null,null,q),U._vnode=N,ut||(ut=!0,zp(),Ov(),ut=!1)},wt={p:I,um:Yt,m:zt,r:ye,mt:Kt,mc:C,pc:dt,pbc:F,n:tt,o:e};return{render:ft,hydrate:void 0,createApp:MP(ft)}}function od({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Us({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function HP(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Yv(e,t,n=!1){const i=e.children,r=t.children;if(Rt(i)&&Rt(r))for(let o=0;o<i.length;o++){const a=i[o];let c=r[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[o]=Gr(r[o]),c.el=a.el),!n&&c.patchFlag!==-2&&Yv(a,c)),c.type===ql&&c.patchFlag!==-1&&(c.el=a.el),c.type===kr&&!c.el&&(c.el=a.el)}}function WP(e){const t=e.slice(),n=[0];let i,r,o,a,c;const u=e.length;for(i=0;i<u;i++){const f=e[i];if(f!==0){if(r=n[n.length-1],e[r]<f){t[i]=r,n.push(i);continue}for(o=0,a=n.length-1;o<a;)c=o+a>>1,e[n[c]]<f?o=c+1:a=c;f<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}function Qv(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Qv(t)}function Zp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const qP=Symbol.for("v-scx"),GP=()=>qn(qP);function ZP(e,t){return Qf(e,null,{flush:"sync"})}function Gn(e,t,n){return Qf(e,t,n)}function Qf(e,t,n=le){const{immediate:i,deep:r,flush:o,once:a}=n,c=cn({},n),u=t&&i||!t&&o!=="post";let f;if(Sl){if(o==="sync"){const w=GP();f=w.__watcherHandles||(w.__watcherHandles=[])}else if(!u){const w=()=>{};return w.stop=$i,w.resume=$i,w.pause=$i,w}}const m=kn;c.call=(w,b,I)=>Xi(w,m,b,I);let _=!1;o==="post"?c.scheduler=w=>{$n(w,m&&m.suspense)}:o!=="sync"&&(_=!0,c.scheduler=(w,b)=>{b?w():qf(w)}),c.augmentJob=w=>{t&&(w.flags|=4),_&&(w.flags|=2,m&&(w.id=m.uid,w.i=m))};const y=aP(e,t,c);return Sl&&(f?f.push(y):u&&y()),y}function KP(e,t,n){const i=this.proxy,r=Xe(e)?e.includes(".")?Xv(i,e):()=>i[e]:e.bind(i,i);let o;jt(t)?o=t:(o=t.handler,n=t);const a=Gl(this),c=Qf(r,o.bind(i),n);return a(),c}function Xv(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function sh(e,t,n=le){const i=ls(),r=Ar(t),o=gs(t),a=Jv(e,r),c=tP((u,f)=>{let m,_=le,y;return ZP(()=>{const w=e[r];Dn(m,w)&&(m=w,f())}),{get(){return u(),n.get?n.get(m):m},set(w){const b=n.set?n.set(w):w;if(!Dn(b,m)&&!(_!==le&&Dn(w,_)))return;const I=i.vnode.props;I&&(t in I||r in I||o in I)&&(`onUpdate:${t}`in I||`onUpdate:${r}`in I||`onUpdate:${o}`in I)||(m=w,f()),i.emit(`update:${t}`,b),Dn(w,b)&&Dn(w,_)&&!Dn(b,y)&&f(),_=w,y=b}}});return c[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?a||le:c,done:!1}:{done:!0}}}},c}const Jv=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ar(t)}Modifiers`]||e[`${gs(t)}Modifiers`];function YP(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||le;let r=n;const o=t.startsWith("update:"),a=o&&Jv(i,t.slice(7));a&&(a.trim&&(r=n.map(m=>Xe(m)?m.trim():m)),a.number&&(r=n.map(_u)));let c,u=i[c=td(t)]||i[c=td(Ar(t))];!u&&o&&(u=i[c=td(gs(t))]),u&&Xi(u,e,6,r);const f=i[c+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Xi(f,e,6,r)}}const QP=new WeakMap;function tw(e,t,n=!1){const i=n?QP:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const o=e.emits;let a={},c=!1;if(!jt(e)){const u=f=>{const m=tw(f,t,!0);m&&(c=!0,cn(a,m))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!c?(Te(e)&&i.set(e,null),null):(Rt(o)?o.forEach(u=>a[u]=null):cn(a,o),Te(e)&&i.set(e,a),a)}function oh(e,t){return!e||!Qu(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,gs(t))||pe(e,t))}function Kp(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[o],slots:a,attrs:c,emit:u,render:f,renderCache:m,props:_,data:y,setupState:w,ctx:b,inheritAttrs:I}=e,M=Eu(e);let A,D;try{if(n.shapeFlag&4){const z=r||i,Q=z;A=Fi(f.call(Q,z,m,_,w,y,b)),D=c}else{const z=t;A=Fi(z.length>1?z(_,{attrs:c,slots:a,emit:u}):z(_,null)),D=t.props?c:XP(c)}}catch(z){dl.length=0,nh(z,e,1),A=Ft(kr)}let B=A;if(D&&I!==!1){const z=Object.keys(D),{shapeFlag:Q}=B;z.length&&Q&7&&(o&&z.some(xf)&&(D=JP(D,o)),B=na(B,D,!1,!0))}return n.dirs&&(B=na(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&Gf(B,n.transition),A=B,Eu(M),A}const XP=e=>{let t;for(const n in e)(n==="class"||n==="style"||Qu(n))&&((t||(t={}))[n]=e[n]);return t},JP=(e,t)=>{const n={};for(const i in e)(!xf(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function tA(e,t,n){const{props:i,children:r,component:o}=e,{props:a,children:c,patchFlag:u}=t,f=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return i?Yp(i,a,f):!!a;if(u&8){const m=t.dynamicProps;for(let _=0;_<m.length;_++){const y=m[_];if(a[y]!==i[y]&&!oh(f,y))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:i===a?!1:i?a?Yp(i,a,f):!0:!!a;return!1}function Yp(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!oh(n,o))return!0}return!1}function eA({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const ew=e=>e.__isSuspense;function nA(e,t){t&&t.pendingBranch?Rt(e)?t.effects.push(...e):t.effects.push(e):uP(e)}const Ne=Symbol.for("v-fgt"),ql=Symbol.for("v-txt"),kr=Symbol.for("v-cmt"),ad=Symbol.for("v-stc"),dl=[];let jn=null;function _t(e=!1){dl.push(jn=e?null:[])}function iA(){dl.pop(),jn=dl[dl.length-1]||null}let Pl=1;function Au(e,t=!1){Pl+=e,e<0&&jn&&t&&(jn.hasOnce=!0)}function nw(e){return e.dynamicChildren=Pl>0?jn||qo:null,iA(),Pl>0&&jn&&jn.push(e),e}function bt(e,t,n,i,r,o){return nw(lt(e,t,n,i,r,o,!0))}function Ui(e,t,n,i,r){return nw(Ft(e,t,n,i,r,!0))}function Al(e){return e?e.__v_isVNode===!0:!1}function qa(e,t){return e.type===t.type&&e.key===t.key}const iw=({key:e})=>e??null,iu=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Xe(e)||Fe(e)||jt(e)?{i:vn,r:e,k:t,f:!!n}:e:null);function lt(e,t=null,n=null,i=0,r=null,o=e===Ne?0:1,a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&iw(t),ref:t&&iu(t),scopeId:Mv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vn};return c?(Xf(u,n),o&128&&e.normalize(u)):n&&(u.shapeFlag|=Xe(n)?8:16),Pl>0&&!a&&jn&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&jn.push(u),u}const Ft=rA;function rA(e,t=null,n=null,i=0,r=null,o=!1){if((!e||e===PP)&&(e=kr),Al(e)){const c=na(e,t,!0);return n&&Xf(c,n),Pl>0&&!o&&jn&&(c.shapeFlag&6?jn[jn.indexOf(e)]=c:jn.push(c)),c.patchFlag=-2,c}if(mA(e)&&(e=e.__vccOpts),t){t=sA(t);let{class:c,style:u}=t;c&&!Xe(c)&&(t.class=Zn(c)),Te(u)&&(Hf(u)&&!Rt(u)&&(u=cn({},u)),t.style=Df(u))}const a=Xe(e)?1:ew(e)?128:dP(e)?64:Te(e)?4:jt(e)?2:0;return lt(e,t,n,i,r,a,o,!0)}function sA(e){return e?Hf(e)||Hv(e)?cn({},e):e:null}function na(e,t,n=!1,i=!1){const{props:r,ref:o,patchFlag:a,children:c,transition:u}=e,f=t?oA(r||{},t):r,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&iw(f),ref:t&&t.ref?n&&o?Rt(o)?o.concat(iu(t)):[o,iu(t)]:iu(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ne?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&na(e.ssContent),ssFallback:e.ssFallback&&na(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&i&&Gf(m,u.clone(m)),m}function zi(e=" ",t=0){return Ft(ql,null,e,t)}function Ve(e="",t=!1){return t?(_t(),Ui(kr,null,e)):Ft(kr,null,e)}function Fi(e){return e==null||typeof e=="boolean"?Ft(kr):Rt(e)?Ft(Ne,null,e.slice()):Al(e)?Gr(e):Ft(ql,null,String(e))}function Gr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:na(e)}function Xf(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Rt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Xf(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Hv(t)?t._ctx=vn:r===3&&vn&&(vn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else jt(t)?(t={default:t,_ctx:vn},n=32):(t=String(t),i&64?(n=16,t=[zi(t)]):n=8);e.children=t,e.shapeFlag|=n}function oA(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Zn([t.class,i.class]));else if(r==="style")t.style=Df([t.style,i.style]);else if(Qu(r)){const o=t[r],a=i[r];a&&o!==a&&!(Rt(o)&&o.includes(a))&&(t[r]=o?[].concat(o,a):a)}else r!==""&&(t[r]=i[r])}return t}function Oi(e,t,n,i=null){Xi(e,t,7,[n,i])}const aA=$v();let lA=0;function cA(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||aA,o={uid:lA++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qv(i,r),emitsOptions:tw(i,r),emit:null,emitted:null,propsDefaults:le,inheritAttrs:i.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=YP.bind(null,o),e.ce&&e.ce(o),o}let kn=null;const ls=()=>kn||vn;let Su,Bd;{const e=Ju(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),o=>{r.length>1?r.forEach(a=>a(o)):r[0](o)}};Su=t("__VUE_INSTANCE_SETTERS__",n=>kn=n),Bd=t("__VUE_SSR_SETTERS__",n=>Sl=n)}const Gl=e=>{const t=kn;return Su(e),e.scope.on(),()=>{e.scope.off(),Su(t)}},Qp=()=>{kn&&kn.scope.off(),Su(null)};function rw(e){return e.vnode.shapeFlag&4}let Sl=!1;function uA(e,t=!1,n=!1){t&&Bd(t);const{props:i,children:r}=e.vnode,o=rw(e);DP(e,i,o,t),BP(e,r,n||t);const a=o?hA(e,t):void 0;return t&&Bd(!1),a}function hA(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,SP);const{setup:i}=n;if(i){Sr();const r=e.setupContext=i.length>1?fA(e):null,o=Gl(e),a=Wl(i,e,0,[e.props,r]),c=nv(a);if(Cr(),o(),(c||e.sp)&&!Ko(e)&&Nv(e),c){if(a.then(Qp,Qp),t)return a.then(u=>{Xp(e,u)}).catch(u=>{nh(u,e,0)});e.asyncDep=a}else Xp(e,a)}else sw(e)}function Xp(e,t,n){jt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=kv(t)),sw(e)}function sw(e,t,n){const i=e.type;e.render||(e.render=i.render||$i);{const r=Gl(e);Sr();try{CP(e)}finally{Cr(),r()}}}const dA={get(e,t){return gn(e,"get",""),e[t]}};function fA(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,dA),slots:e.slots,emit:e.emit,expose:t}}function ah(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kv(Wf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hl)return hl[n](e)},has(t,n){return n in t||n in hl}})):e.proxy}function mA(e){return jt(e)&&"__vccOpts"in e}const ee=(e,t)=>sP(e,t,Sl);function lh(e,t,n){try{Au(-1);const i=arguments.length;return i===2?Te(t)&&!Rt(t)?Al(t)?Ft(e,null,[t]):Ft(e,t):Ft(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Al(n)&&(n=[n]),Ft(e,t,n))}finally{Au(1)}}const pA="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $d;const Jp=typeof window<"u"&&window.trustedTypes;if(Jp)try{$d=Jp.createPolicy("vue",{createHTML:e=>e})}catch{}const ow=$d?e=>$d.createHTML(e):e=>e,_A="http://www.w3.org/2000/svg",gA="http://www.w3.org/1998/Math/MathML",_r=typeof document<"u"?document:null,t_=_r&&_r.createElement("template"),yA={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?_r.createElementNS(_A,e):t==="mathml"?_r.createElementNS(gA,e):n?_r.createElement(e,{is:n}):_r.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>_r.createTextNode(e),createComment:e=>_r.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_r.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const a=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{t_.innerHTML=ow(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const c=t_.content;if(i==="svg"||i==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}t.insertBefore(c,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vA=Symbol("_vtc");function wA(e,t,n){const i=e[vA];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const e_=Symbol("_vod"),EA=Symbol("_vsh"),TA=Symbol(""),IA=/(?:^|;)\s*display\s*:/;function bA(e,t,n){const i=e.style,r=Xe(n);let o=!1;if(n&&!r){if(t)if(Xe(t))for(const a of t.split(";")){const c=a.slice(0,a.indexOf(":")).trim();n[c]==null&&ru(i,c,"")}else for(const a in t)n[a]==null&&ru(i,a,"");for(const a in n)a==="display"&&(o=!0),ru(i,a,n[a])}else if(r){if(t!==n){const a=i[TA];a&&(n+=";"+a),i.cssText=n,o=IA.test(n)}}else t&&e.removeAttribute("style");e_ in e&&(e[e_]=o?i.display:"",e[EA]&&(i.display="none"))}const n_=/\s*!important$/;function ru(e,t,n){if(Rt(n))n.forEach(i=>ru(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=PA(e,t);n_.test(n)?e.setProperty(gs(i),n.replace(n_,""),"important"):e[i]=n}}const i_=["Webkit","Moz","ms"],ld={};function PA(e,t){const n=ld[t];if(n)return n;let i=Ar(t);if(i!=="filter"&&i in e)return ld[t]=i;i=sv(i);for(let r=0;r<i_.length;r++){const o=i_[r]+i;if(o in e)return ld[t]=o}return t}const r_="http://www.w3.org/1999/xlink";function s_(e,t,n,i,r,o=kb(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(r_,t.slice(6,t.length)):e.setAttributeNS(r_,t,n):n==null||o&&!av(n)?e.removeAttribute(t):e.setAttribute(t,o?"":yi(n)?String(n):n)}function o_(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ow(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(c!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=av(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(r||t)}function vr(e,t,n,i){e.addEventListener(t,n,i)}function AA(e,t,n,i){e.removeEventListener(t,n,i)}const a_=Symbol("_vei");function SA(e,t,n,i,r=null){const o=e[a_]||(e[a_]={}),a=o[t];if(i&&a)a.value=i;else{const[c,u]=CA(t);if(i){const f=o[t]=RA(i,r);vr(e,c,f,u)}else a&&(AA(e,c,a,u),o[t]=void 0)}}const l_=/(?:Once|Passive|Capture)$/;function CA(e){let t;if(l_.test(e)){t={};let i;for(;i=e.match(l_);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gs(e.slice(2)),t]}let cd=0;const kA=Promise.resolve(),LA=()=>cd||(kA.then(()=>cd=0),cd=Date.now());function RA(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Xi(OA(i,n.value),t,5,[i])};return n.value=e,n.attached=LA(),n}function OA(e,t){if(Rt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const c_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xA=(e,t,n,i,r,o)=>{const a=r==="svg";t==="class"?wA(e,i,a):t==="style"?bA(e,n,i):Qu(t)?xf(t)||SA(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):MA(e,t,i,a))?(o_(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&s_(e,t,i,a,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xe(i))?o_(e,Ar(t),i,o,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),s_(e,t,i,a))};function MA(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&c_(t)&&jt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return c_(t)&&Xe(n)?!1:t in e}const cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Rt(t)?n=>eu(t,n):t};function NA(e){e.target.composing=!0}function u_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ai=Symbol("_assign"),zd={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[ai]=cs(r);const o=i||r.props&&r.props.type==="number";vr(e,t?"change":"input",a=>{if(a.target.composing)return;let c=e.value;n&&(c=c.trim()),o&&(c=_u(c)),e[ai](c)}),n&&vr(e,"change",()=>{e.value=e.value.trim()}),t||(vr(e,"compositionstart",NA),vr(e,"compositionend",u_),vr(e,"change",u_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:o}},a){if(e[ai]=cs(a),e.composing)return;const c=(o||e.type==="number")&&!/^0\d/.test(e.value)?_u(e.value):e.value,u=t??"";c!==u&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===u)||(e.value=u))}},aw={deep:!0,created(e,t,n){e[ai]=cs(n),vr(e,"change",()=>{const i=e._modelValue,r=ia(e),o=e.checked,a=e[ai];if(Rt(i)){const c=Vf(i,r),u=c!==-1;if(o&&!u)a(i.concat(r));else if(!o&&u){const f=[...i];f.splice(c,1),a(f)}}else if(pa(i)){const c=new Set(i);o?c.add(r):c.delete(r),a(c)}else a(lw(e,o))})},mounted:h_,beforeUpdate(e,t,n){e[ai]=cs(n),h_(e,t,n)}};function h_(e,{value:t,oldValue:n},i){e._modelValue=t;let r;if(Rt(t))r=Vf(t,i.props.value)>-1;else if(pa(t))r=t.has(i.props.value);else{if(t===n)return;r=Zs(t,lw(e,!0))}e.checked!==r&&(e.checked=r)}const DA={created(e,{value:t},n){e.checked=Zs(t,n.props.value),e[ai]=cs(n),vr(e,"change",()=>{e[ai](ia(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[ai]=cs(i),t!==n&&(e.checked=Zs(t,i.props.value))}},VA={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=pa(t);vr(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?_u(ia(a)):ia(a));e[ai](e.multiple?r?new Set(o):o:o[0]),e._assigning=!0,ih(()=>{e._assigning=!1})}),e[ai]=cs(i)},mounted(e,{value:t}){d_(e,t)},beforeUpdate(e,t,n){e[ai]=cs(n)},updated(e,{value:t}){e._assigning||d_(e,t)}};function d_(e,t){const n=e.multiple,i=Rt(t);if(!(n&&!i&&!pa(t))){for(let r=0,o=e.options.length;r<o;r++){const a=e.options[r],c=ia(a);if(n)if(i){const u=typeof c;u==="string"||u==="number"?a.selected=t.some(f=>String(f)===String(c)):a.selected=Vf(t,c)>-1}else a.selected=t.has(c);else if(Zs(ia(a),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ia(e){return"_value"in e?e._value:e.value}function lw(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const cw={created(e,t,n){Uc(e,t,n,null,"created")},mounted(e,t,n){Uc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Uc(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Uc(e,t,n,i,"updated")}};function FA(e,t){switch(e){case"SELECT":return VA;case"TEXTAREA":return zd;default:switch(t){case"checkbox":return aw;case"radio":return DA;default:return zd}}}function Uc(e,t,n,i,r){const a=FA(e.tagName,n.props&&n.props.type)[r];a&&a(e,t,n,i)}const UA=["ctrl","shift","alt","meta"],BA={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>UA.some(n=>e[`${n}Key`]&&!t.includes(n))},_a=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...o)=>{for(let a=0;a<t.length;a++){const c=BA[t[a]];if(c&&c(r,t))return}return e(r,...o)}))},$A=cn({patchProp:xA},yA);let f_;function zA(){return f_||(f_=zP($A))}const jA=((...e)=>{const t=zA().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=WA(i);if(!r)return;const o=t._component;!jt(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=n(r,!1,HA(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t});function HA(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function WA(e){return Xe(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let uw;const ch=e=>uw=e,hw=Symbol();function jd(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var fl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(fl||(fl={}));function qA(){const e=Ff(!0),t=e.run(()=>Le({}));let n=[],i=[];const r=Wf({install(o){ch(r),r._a=o,o.provide(hw,r),o.config.globalProperties.$pinia=r,i.forEach(a=>n.push(a)),i=[]},use(o){return this._a?n.push(o):i.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const dw=()=>{};function m_(e,t,n,i=dw){e.push(t);const r=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),i())};return!n&&hv()&&Rb(r),r}function Do(e,...t){e.slice().forEach(n=>{n(...t)})}const GA=e=>e(),p_=Symbol(),ud=Symbol();function Hd(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],r=e[n];jd(r)&&jd(i)&&e.hasOwnProperty(n)&&!Fe(i)&&!es(i)?e[n]=Hd(r,i):e[n]=i}return e}const ZA=Symbol();function KA(e){return!jd(e)||!Object.prototype.hasOwnProperty.call(e,ZA)}const{assign:Wr}=Object;function YA(e){return!!(Fe(e)&&e.effect)}function QA(e,t,n,i){const{state:r,actions:o,getters:a}=t,c=n.state.value[e];let u;function f(){c||(n.state.value[e]=r?r():{});const m=eP(n.state.value[e]);return Wr(m,o,Object.keys(a||{}).reduce((_,y)=>(_[y]=Wf(ee(()=>{ch(n);const w=n._s.get(e);return a[y].call(w,w)})),_),{}))}return u=fw(e,f,t,n,i,!0),u}function fw(e,t,n={},i,r,o){let a;const c=Wr({actions:{}},n),u={deep:!0};let f,m,_=[],y=[],w;const b=i.state.value[e];!o&&!b&&(i.state.value[e]={}),Le({});let I;function M(C){let O;f=m=!1,typeof C=="function"?(C(i.state.value[e]),O={type:fl.patchFunction,storeId:e,events:w}):(Hd(i.state.value[e],C),O={type:fl.patchObject,payload:C,storeId:e,events:w});const F=I=Symbol();ih().then(()=>{I===F&&(f=!0)}),m=!0,Do(_,O,i.state.value[e])}const A=o?function(){const{state:O}=n,F=O?O():{};this.$patch(x=>{Wr(x,F)})}:dw;function D(){a.stop(),_=[],y=[],i._s.delete(e)}const B=(C,O="")=>{if(p_ in C)return C[ud]=O,C;const F=function(){ch(i);const x=Array.from(arguments),j=[],V=[];function Kt(Lt){j.push(Lt)}function xe(Lt){V.push(Lt)}Do(y,{args:x,name:F[ud],store:Q,after:Kt,onError:xe});let Ut;try{Ut=C.apply(this&&this.$id===e?this:Q,x)}catch(Lt){throw Do(V,Lt),Lt}return Ut instanceof Promise?Ut.then(Lt=>(Do(j,Lt),Lt)).catch(Lt=>(Do(V,Lt),Promise.reject(Lt))):(Do(j,Ut),Ut)};return F[p_]=!0,F[ud]=O,F},z={_p:i,$id:e,$onAction:m_.bind(null,y),$patch:M,$reset:A,$subscribe(C,O={}){const F=m_(_,C,O.detached,()=>x()),x=a.run(()=>Gn(()=>i.state.value[e],j=>{(O.flush==="sync"?m:f)&&C({storeId:e,type:fl.direct,events:w},j)},Wr({},u,O)));return F},$dispose:D},Q=Qi(z);i._s.set(e,Q);const S=(i._a&&i._a.runWithContext||GA)(()=>i._e.run(()=>(a=Ff()).run(()=>t({action:B}))));for(const C in S){const O=S[C];if(Fe(O)&&!YA(O)||es(O))o||(b&&KA(O)&&(Fe(O)?O.value=b[C]:Hd(O,b[C])),i.state.value[e][C]=O);else if(typeof O=="function"){const F=B(O,C);S[C]=F,c.actions[C]=O}}return Wr(Q,S),Wr(oe(Q),S),Object.defineProperty(Q,"$state",{get:()=>i.state.value[e],set:C=>{M(O=>{Wr(O,C)})}}),i._p.forEach(C=>{Wr(Q,a.run(()=>C({store:Q,app:i._a,pinia:i,options:c})))}),b&&o&&n.hydrate&&n.hydrate(Q.$state,b),f=!0,m=!0,Q}/*! #__NO_SIDE_EFFECTS__ */function Jf(e,t,n){let i;const r=typeof t=="function";i=r?n:t;function o(a,c){const u=NP();return a=a||(u?qn(hw,null):null),a&&ch(a),a=uw,a._s.has(e)||(r?fw(e,t,i,a):QA(e,i,a)),a._s.get(e)}return o.$id=e,o}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Fo=typeof document<"u";function mw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function XA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&mw(e.default)}const fe=Object.assign;function hd(e,t){const n={};for(const i in t){const r=t[i];n[i]=vi(r)?r.map(e):e(r)}return n}const ml=()=>{},vi=Array.isArray,pw=/#/g,JA=/&/g,tS=/\//g,eS=/=/g,nS=/\?/g,_w=/\+/g,iS=/%5B/g,rS=/%5D/g,gw=/%5E/g,sS=/%60/g,yw=/%7B/g,oS=/%7C/g,vw=/%7D/g,aS=/%20/g;function tm(e){return encodeURI(""+e).replace(oS,"|").replace(iS,"[").replace(rS,"]")}function lS(e){return tm(e).replace(yw,"{").replace(vw,"}").replace(gw,"^")}function Wd(e){return tm(e).replace(_w,"%2B").replace(aS,"+").replace(pw,"%23").replace(JA,"%26").replace(sS,"`").replace(yw,"{").replace(vw,"}").replace(gw,"^")}function cS(e){return Wd(e).replace(eS,"%3D")}function uS(e){return tm(e).replace(pw,"%23").replace(nS,"%3F")}function hS(e){return e==null?"":uS(e).replace(tS,"%2F")}function Cl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const dS=/\/$/,fS=e=>e.replace(dS,"");function dd(e,t,n="/"){let i,r={},o="",a="";const c=t.indexOf("#");let u=t.indexOf("?");return c<u&&c>=0&&(u=-1),u>-1&&(i=t.slice(0,u),o=t.slice(u+1,c>-1?c:t.length),r=e(o)),c>-1&&(i=i||t.slice(0,c),a=t.slice(c,t.length)),i=gS(i??t,n),{fullPath:i+(o&&"?")+o+a,path:i,query:r,hash:Cl(a)}}function mS(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function __(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function pS(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&ra(t.matched[i],n.matched[r])&&ww(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ra(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ww(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_S(e[n],t[n]))return!1;return!0}function _S(e,t){return vi(e)?g_(e,t):vi(t)?g_(t,e):e===t}function g_(e,t){return vi(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function gS(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let o=n.length-1,a,c;for(a=0;a<i.length;a++)if(c=i[a],c!==".")if(c==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+i.slice(a).join("/")}const jr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var kl;(function(e){e.pop="pop",e.push="push"})(kl||(kl={}));var pl;(function(e){e.back="back",e.forward="forward",e.unknown=""})(pl||(pl={}));function yS(e){if(!e)if(Fo){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),fS(e)}const vS=/^[^#]+#/;function wS(e,t){return e.replace(vS,"#")+t}function ES(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const uh=()=>({left:window.scrollX,top:window.scrollY});function TS(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=ES(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function y_(e,t){return(history.state?history.state.position-t:-1)+e}const qd=new Map;function IS(e,t){qd.set(e,t)}function bS(e){const t=qd.get(e);return qd.delete(e),t}let PS=()=>location.protocol+"//"+location.host;function Ew(e,t){const{pathname:n,search:i,hash:r}=t,o=e.indexOf("#");if(o>-1){let c=r.includes(e.slice(o))?e.slice(o).length:1,u=r.slice(c);return u[0]!=="/"&&(u="/"+u),__(u,"")}return __(n,e)+i+r}function AS(e,t,n,i){let r=[],o=[],a=null;const c=({state:y})=>{const w=Ew(e,location),b=n.value,I=t.value;let M=0;if(y){if(n.value=w,t.value=y,a&&a===b){a=null;return}M=I?y.position-I.position:0}else i(w);r.forEach(A=>{A(n.value,b,{delta:M,type:kl.pop,direction:M?M>0?pl.forward:pl.back:pl.unknown})})};function u(){a=n.value}function f(y){r.push(y);const w=()=>{const b=r.indexOf(y);b>-1&&r.splice(b,1)};return o.push(w),w}function m(){const{history:y}=window;y.state&&y.replaceState(fe({},y.state,{scroll:uh()}),"")}function _(){for(const y of o)y();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:u,listen:f,destroy:_}}function v_(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?uh():null}}function SS(e){const{history:t,location:n}=window,i={value:Ew(e,n)},r={value:t.state};r.value||o(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(u,f,m){const _=e.indexOf("#"),y=_>-1?(n.host&&document.querySelector("base")?e:e.slice(_))+u:PS()+e+u;try{t[m?"replaceState":"pushState"](f,"",y),r.value=f}catch(w){console.error(w),n[m?"replace":"assign"](y)}}function a(u,f){const m=fe({},t.state,v_(r.value.back,u,r.value.forward,!0),f,{position:r.value.position});o(u,m,!0),i.value=u}function c(u,f){const m=fe({},r.value,t.state,{forward:u,scroll:uh()});o(m.current,m,!0);const _=fe({},v_(i.value,u,null),{position:m.position+1},f);o(u,_,!1),i.value=u}return{location:i,state:r,push:c,replace:a}}function CS(e){e=yS(e);const t=SS(e),n=AS(e,t.state,t.location,t.replace);function i(o,a=!0){a||n.pauseListeners(),history.go(o)}const r=fe({location:"",base:e,go:i,createHref:wS.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function kS(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),CS(e)}function LS(e){return typeof e=="string"||e&&typeof e=="object"}function Tw(e){return typeof e=="string"||typeof e=="symbol"}const Iw=Symbol("");var w_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(w_||(w_={}));function sa(e,t){return fe(new Error,{type:e,[Iw]:!0},t)}function mr(e,t){return e instanceof Error&&Iw in e&&(t==null||!!(e.type&t))}const E_="[^/]+?",RS={sensitive:!1,strict:!1,start:!0,end:!0},OS=/[.+*?^${}()[\]/\\]/g;function xS(e,t){const n=fe({},RS,t),i=[];let r=n.start?"^":"";const o=[];for(const f of e){const m=f.length?[]:[90];n.strict&&!f.length&&(r+="/");for(let _=0;_<f.length;_++){const y=f[_];let w=40+(n.sensitive?.25:0);if(y.type===0)_||(r+="/"),r+=y.value.replace(OS,"\\$&"),w+=40;else if(y.type===1){const{value:b,repeatable:I,optional:M,regexp:A}=y;o.push({name:b,repeatable:I,optional:M});const D=A||E_;if(D!==E_){w+=10;try{new RegExp(`(${D})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${b}" (${D}): `+z.message)}}let B=I?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;_||(B=M&&f.length<2?`(?:/${B})`:"/"+B),M&&(B+="?"),r+=B,w+=20,M&&(w+=-8),I&&(w+=-20),D===".*"&&(w+=-50)}m.push(w)}i.push(m)}if(n.strict&&n.end){const f=i.length-1;i[f][i[f].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,n.sensitive?"":"i");function c(f){const m=f.match(a),_={};if(!m)return null;for(let y=1;y<m.length;y++){const w=m[y]||"",b=o[y-1];_[b.name]=w&&b.repeatable?w.split("/"):w}return _}function u(f){let m="",_=!1;for(const y of e){(!_||!m.endsWith("/"))&&(m+="/"),_=!1;for(const w of y)if(w.type===0)m+=w.value;else if(w.type===1){const{value:b,repeatable:I,optional:M}=w,A=b in f?f[b]:"";if(vi(A)&&!I)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const D=vi(A)?A.join("/"):A;if(!D)if(M)y.length<2&&(m.endsWith("/")?m=m.slice(0,-1):_=!0);else throw new Error(`Missing required param "${b}"`);m+=D}}return m||"/"}return{re:a,score:i,keys:o,parse:c,stringify:u}}function MS(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function bw(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const o=MS(i[n],r[n]);if(o)return o;n++}if(Math.abs(r.length-i.length)===1){if(T_(i))return 1;if(T_(r))return-1}return r.length-i.length}function T_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const NS={type:0,value:""},DS=/[a-zA-Z0-9_]/;function VS(e){if(!e)return[[]];if(e==="/")return[[NS]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(w){throw new Error(`ERR (${n})/"${f}": ${w}`)}let n=0,i=n;const r=[];let o;function a(){o&&r.push(o),o=[]}let c=0,u,f="",m="";function _(){f&&(n===0?o.push({type:0,value:f}):n===1||n===2||n===3?(o.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:m,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),f="")}function y(){f+=u}for(;c<e.length;){if(u=e[c++],u==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:u==="/"?(f&&_(),a()):u===":"?(_(),n=1):y();break;case 4:y(),n=i;break;case 1:u==="("?n=2:DS.test(u)?y():(_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&c--);break;case 2:u===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+u:n=3:m+=u;break;case 3:_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&c--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${f}"`),_(),a(),r}function FS(e,t,n){const i=xS(VS(e.path),n),r=fe(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function US(e,t){const n=[],i=new Map;t=A_({strict:!1,end:!0,sensitive:!1},t);function r(_){return i.get(_)}function o(_,y,w){const b=!w,I=b_(_);I.aliasOf=w&&w.record;const M=A_(t,_),A=[I];if("alias"in _){const z=typeof _.alias=="string"?[_.alias]:_.alias;for(const Q of z)A.push(b_(fe({},I,{components:w?w.record.components:I.components,path:Q,aliasOf:w?w.record:I})))}let D,B;for(const z of A){const{path:Q}=z;if(y&&Q[0]!=="/"){const rt=y.record.path,S=rt[rt.length-1]==="/"?"":"/";z.path=y.record.path+(Q&&S+Q)}if(D=FS(z,y,M),w?w.alias.push(D):(B=B||D,B!==D&&B.alias.push(D),b&&_.name&&!P_(D)&&a(_.name)),Pw(D)&&u(D),I.children){const rt=I.children;for(let S=0;S<rt.length;S++)o(rt[S],D,w&&w.children[S])}w=w||D}return B?()=>{a(B)}:ml}function a(_){if(Tw(_)){const y=i.get(_);y&&(i.delete(_),n.splice(n.indexOf(y),1),y.children.forEach(a),y.alias.forEach(a))}else{const y=n.indexOf(_);y>-1&&(n.splice(y,1),_.record.name&&i.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function c(){return n}function u(_){const y=zS(_,n);n.splice(y,0,_),_.record.name&&!P_(_)&&i.set(_.record.name,_)}function f(_,y){let w,b={},I,M;if("name"in _&&_.name){if(w=i.get(_.name),!w)throw sa(1,{location:_});M=w.record.name,b=fe(I_(y.params,w.keys.filter(B=>!B.optional).concat(w.parent?w.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),_.params&&I_(_.params,w.keys.map(B=>B.name))),I=w.stringify(b)}else if(_.path!=null)I=_.path,w=n.find(B=>B.re.test(I)),w&&(b=w.parse(I),M=w.record.name);else{if(w=y.name?i.get(y.name):n.find(B=>B.re.test(y.path)),!w)throw sa(1,{location:_,currentLocation:y});M=w.record.name,b=fe({},y.params,_.params),I=w.stringify(b)}const A=[];let D=w;for(;D;)A.unshift(D.record),D=D.parent;return{name:M,path:I,params:b,matched:A,meta:$S(A)}}e.forEach(_=>o(_));function m(){n.length=0,i.clear()}return{addRoute:o,resolve:f,removeRoute:a,clearRoutes:m,getRoutes:c,getRecordMatcher:r}}function I_(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function b_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:BS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function BS(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function P_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function $S(e){return e.reduce((t,n)=>fe(t,n.meta),{})}function A_(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function zS(e,t){let n=0,i=t.length;for(;n!==i;){const o=n+i>>1;bw(e,t[o])<0?i=o:n=o+1}const r=jS(e);return r&&(i=t.lastIndexOf(r,i-1)),i}function jS(e){let t=e;for(;t=t.parent;)if(Pw(t)&&bw(e,t)===0)return t}function Pw({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function HS(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const o=i[r].replace(_w," "),a=o.indexOf("="),c=Cl(a<0?o:o.slice(0,a)),u=a<0?null:Cl(o.slice(a+1));if(c in t){let f=t[c];vi(f)||(f=t[c]=[f]),f.push(u)}else t[c]=u}return t}function S_(e){let t="";for(let n in e){const i=e[n];if(n=cS(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(vi(i)?i.map(o=>o&&Wd(o)):[i&&Wd(i)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function WS(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=vi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const qS=Symbol(""),C_=Symbol(""),hh=Symbol(""),em=Symbol(""),Gd=Symbol("");function Ga(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Zr(e,t,n,i,r,o=a=>a()){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((c,u)=>{const f=y=>{y===!1?u(sa(4,{from:n,to:t})):y instanceof Error?u(y):LS(y)?u(sa(2,{from:t,to:y})):(a&&i.enterCallbacks[r]===a&&typeof y=="function"&&a.push(y),c())},m=o(()=>e.call(i&&i.instances[r],t,n,f));let _=Promise.resolve(m);e.length<3&&(_=_.then(f)),_.catch(y=>u(y))})}function fd(e,t,n,i,r=o=>o()){const o=[];for(const a of e)for(const c in a.components){let u=a.components[c];if(!(t!=="beforeRouteEnter"&&!a.instances[c]))if(mw(u)){const m=(u.__vccOpts||u)[t];m&&o.push(Zr(m,n,i,a,c,r))}else{let f=u();o.push(()=>f.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${c}" at "${a.path}"`);const _=XA(m)?m.default:m;a.mods[c]=m,a.components[c]=_;const w=(_.__vccOpts||_)[t];return w&&Zr(w,n,i,a,c,r)()}))}}return o}function k_(e){const t=qn(hh),n=qn(em),i=ee(()=>{const u=wn(e.to);return t.resolve(u)}),r=ee(()=>{const{matched:u}=i.value,{length:f}=u,m=u[f-1],_=n.matched;if(!m||!_.length)return-1;const y=_.findIndex(ra.bind(null,m));if(y>-1)return y;const w=L_(u[f-2]);return f>1&&L_(m)===w&&_[_.length-1].path!==w?_.findIndex(ra.bind(null,u[f-2])):y}),o=ee(()=>r.value>-1&&YS(n.params,i.value.params)),a=ee(()=>r.value>-1&&r.value===n.matched.length-1&&ww(n.params,i.value.params));function c(u={}){if(KS(u)){const f=t[wn(e.replace)?"replace":"push"](wn(e.to)).catch(ml);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:i,href:ee(()=>i.value.href),isActive:o,isExactActive:a,navigate:c}}function GS(e){return e.length===1?e[0]:e}const ZS=ue({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:k_,setup(e,{slots:t}){const n=Qi(k_(e)),{options:i}=qn(hh),r=ee(()=>({[R_(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[R_(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&GS(t.default(n));return e.custom?o:lh("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}}),nm=ZS;function KS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function YS(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!vi(r)||r.length!==i.length||i.some((o,a)=>o!==r[a]))return!1}return!0}function L_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const R_=(e,t,n)=>e??t??n,QS=ue({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=qn(Gd),r=ee(()=>e.route||i.value),o=qn(C_,0),a=ee(()=>{let f=wn(o);const{matched:m}=r.value;let _;for(;(_=m[f])&&!_.components;)f++;return f}),c=ee(()=>r.value.matched[a.value]);nu(C_,ee(()=>a.value+1)),nu(qS,c),nu(Gd,r);const u=Le();return Gn(()=>[u.value,c.value,e.name],([f,m,_],[y,w,b])=>{m&&(m.instances[_]=f,w&&w!==m&&f&&f===y&&(m.leaveGuards.size||(m.leaveGuards=w.leaveGuards),m.updateGuards.size||(m.updateGuards=w.updateGuards))),f&&m&&(!w||!ra(m,w)||!y)&&(m.enterCallbacks[_]||[]).forEach(I=>I(f))},{flush:"post"}),()=>{const f=r.value,m=e.name,_=c.value,y=_&&_.components[m];if(!y)return O_(n.default,{Component:y,route:f});const w=_.props[m],b=w?w===!0?f.params:typeof w=="function"?w(f):w:null,M=lh(y,fe({},b,t,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(_.instances[m]=null)},ref:u}));return O_(n.default,{Component:M,route:f})||M}}});function O_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Aw=QS;function XS(e){const t=US(e.routes,e),n=e.parseQuery||HS,i=e.stringifyQuery||S_,r=e.history,o=Ga(),a=Ga(),c=Ga(),u=Sv(jr);let f=jr;Fo&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=hd.bind(null,tt=>""+tt),_=hd.bind(null,hS),y=hd.bind(null,Cl);function w(tt,ut){let ft,wt;return Tw(tt)?(ft=t.getRecordMatcher(tt),wt=ut):wt=tt,t.addRoute(wt,ft)}function b(tt){const ut=t.getRecordMatcher(tt);ut&&t.removeRoute(ut)}function I(){return t.getRoutes().map(tt=>tt.record)}function M(tt){return!!t.getRecordMatcher(tt)}function A(tt,ut){if(ut=fe({},ut||u.value),typeof tt=="string"){const q=dd(n,tt,ut.path),it=t.resolve({path:q.path},ut),st=r.createHref(q.fullPath);return fe(q,it,{params:y(it.params),hash:Cl(q.hash),redirectedFrom:void 0,href:st})}let ft;if(tt.path!=null)ft=fe({},tt,{path:dd(n,tt.path,ut.path).path});else{const q=fe({},tt.params);for(const it in q)q[it]==null&&delete q[it];ft=fe({},tt,{params:_(q)}),ut.params=_(ut.params)}const wt=t.resolve(ft,ut),Gt=tt.hash||"";wt.params=m(y(wt.params));const N=mS(i,fe({},tt,{hash:lS(Gt),path:wt.path})),U=r.createHref(N);return fe({fullPath:N,hash:Gt,query:i===S_?WS(tt.query):tt.query||{}},wt,{redirectedFrom:void 0,href:U})}function D(tt){return typeof tt=="string"?dd(n,tt,u.value.path):fe({},tt)}function B(tt,ut){if(f!==tt)return sa(8,{from:ut,to:tt})}function z(tt){return S(tt)}function Q(tt){return z(fe(D(tt),{replace:!0}))}function rt(tt){const ut=tt.matched[tt.matched.length-1];if(ut&&ut.redirect){const{redirect:ft}=ut;let wt=typeof ft=="function"?ft(tt):ft;return typeof wt=="string"&&(wt=wt.includes("?")||wt.includes("#")?wt=D(wt):{path:wt},wt.params={}),fe({query:tt.query,hash:tt.hash,params:wt.path!=null?{}:tt.params},wt)}}function S(tt,ut){const ft=f=A(tt),wt=u.value,Gt=tt.state,N=tt.force,U=tt.replace===!0,q=rt(ft);if(q)return S(fe(D(q),{state:typeof q=="object"?fe({},Gt,q.state):Gt,force:N,replace:U}),ut||ft);const it=ft;it.redirectedFrom=ut;let st;return!N&&pS(i,wt,ft)&&(st=sa(16,{to:it,from:wt}),zt(wt,wt,!0,!1)),(st?Promise.resolve(st):F(it,wt)).catch(et=>mr(et)?mr(et,2)?et:At(et):dt(et,it,wt)).then(et=>{if(et){if(mr(et,2))return S(fe({replace:U},D(et.to),{state:typeof et.to=="object"?fe({},Gt,et.to.state):Gt,force:N}),ut||it)}else et=j(it,wt,!0,U,Gt);return x(it,wt,et),et})}function C(tt,ut){const ft=B(tt,ut);return ft?Promise.reject(ft):Promise.resolve()}function O(tt){const ut=Qt.values().next().value;return ut&&typeof ut.runWithContext=="function"?ut.runWithContext(tt):tt()}function F(tt,ut){let ft;const[wt,Gt,N]=JS(tt,ut);ft=fd(wt.reverse(),"beforeRouteLeave",tt,ut);for(const q of wt)q.leaveGuards.forEach(it=>{ft.push(Zr(it,tt,ut))});const U=C.bind(null,tt,ut);return ft.push(U),Ct(ft).then(()=>{ft=[];for(const q of o.list())ft.push(Zr(q,tt,ut));return ft.push(U),Ct(ft)}).then(()=>{ft=fd(Gt,"beforeRouteUpdate",tt,ut);for(const q of Gt)q.updateGuards.forEach(it=>{ft.push(Zr(it,tt,ut))});return ft.push(U),Ct(ft)}).then(()=>{ft=[];for(const q of N)if(q.beforeEnter)if(vi(q.beforeEnter))for(const it of q.beforeEnter)ft.push(Zr(it,tt,ut));else ft.push(Zr(q.beforeEnter,tt,ut));return ft.push(U),Ct(ft)}).then(()=>(tt.matched.forEach(q=>q.enterCallbacks={}),ft=fd(N,"beforeRouteEnter",tt,ut,O),ft.push(U),Ct(ft))).then(()=>{ft=[];for(const q of a.list())ft.push(Zr(q,tt,ut));return ft.push(U),Ct(ft)}).catch(q=>mr(q,8)?q:Promise.reject(q))}function x(tt,ut,ft){c.list().forEach(wt=>O(()=>wt(tt,ut,ft)))}function j(tt,ut,ft,wt,Gt){const N=B(tt,ut);if(N)return N;const U=ut===jr,q=Fo?history.state:{};ft&&(wt||U?r.replace(tt.fullPath,fe({scroll:U&&q&&q.scroll},Gt)):r.push(tt.fullPath,Gt)),u.value=tt,zt(tt,ut,ft,U),At()}let V;function Kt(){V||(V=r.listen((tt,ut,ft)=>{if(!Ht.listening)return;const wt=A(tt),Gt=rt(wt);if(Gt){S(fe(Gt,{replace:!0,force:!0}),wt).catch(ml);return}f=wt;const N=u.value;Fo&&IS(y_(N.fullPath,ft.delta),uh()),F(wt,N).catch(U=>mr(U,12)?U:mr(U,2)?(S(fe(D(U.to),{force:!0}),wt).then(q=>{mr(q,20)&&!ft.delta&&ft.type===kl.pop&&r.go(-1,!1)}).catch(ml),Promise.reject()):(ft.delta&&r.go(-ft.delta,!1),dt(U,wt,N))).then(U=>{U=U||j(wt,N,!1),U&&(ft.delta&&!mr(U,8)?r.go(-ft.delta,!1):ft.type===kl.pop&&mr(U,20)&&r.go(-1,!1)),x(wt,N,U)}).catch(ml)}))}let xe=Ga(),Ut=Ga(),Lt;function dt(tt,ut,ft){At(tt);const wt=Ut.list();return wt.length?wt.forEach(Gt=>Gt(tt,ut,ft)):console.error(tt),Promise.reject(tt)}function we(){return Lt&&u.value!==jr?Promise.resolve():new Promise((tt,ut)=>{xe.add([tt,ut])})}function At(tt){return Lt||(Lt=!tt,Kt(),xe.list().forEach(([ut,ft])=>tt?ft(tt):ut()),xe.reset()),tt}function zt(tt,ut,ft,wt){const{scrollBehavior:Gt}=e;if(!Fo||!Gt)return Promise.resolve();const N=!ft&&bS(y_(tt.fullPath,0))||(wt||!ft)&&history.state&&history.state.scroll||null;return ih().then(()=>Gt(tt,ut,N)).then(U=>U&&TS(U)).catch(U=>dt(U,tt,ut))}const Yt=tt=>r.go(tt);let ye;const Qt=new Set,Ht={currentRoute:u,listening:!0,addRoute:w,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:M,getRoutes:I,resolve:A,options:e,push:z,replace:Q,go:Yt,back:()=>Yt(-1),forward:()=>Yt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:c.add,onError:Ut.add,isReady:we,install(tt){const ut=this;tt.component("RouterLink",nm),tt.component("RouterView",Aw),tt.config.globalProperties.$router=ut,Object.defineProperty(tt.config.globalProperties,"$route",{enumerable:!0,get:()=>wn(u)}),Fo&&!ye&&u.value===jr&&(ye=!0,z(r.location).catch(Gt=>{}));const ft={};for(const Gt in jr)Object.defineProperty(ft,Gt,{get:()=>u.value[Gt],enumerable:!0});tt.provide(hh,ut),tt.provide(em,Av(ft)),tt.provide(Gd,u);const wt=tt.unmount;Qt.add(tt),tt.unmount=function(){Qt.delete(tt),Qt.size<1&&(f=jr,V&&V(),V=null,u.value=jr,ye=!1,Lt=!1),wt()}}};function Ct(tt){return tt.reduce((ut,ft)=>ut.then(()=>O(ft)),Promise.resolve())}return Ht}function JS(e,t){const n=[],i=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const c=t.matched[a];c&&(e.matched.find(f=>ra(f,c))?i.push(c):n.push(c));const u=e.matched[a];u&&(t.matched.find(f=>ra(f,u))||r.push(u))}return[n,i,r]}function dh(){return qn(hh)}function tC(e){return qn(em)}const eC=()=>{};var x_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},nC=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=e[n++],a=e[n++],c=e[n++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return t.join("")},Cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const o=e[r],a=r+1<e.length,c=a?e[r+1]:0,u=r+2<e.length,f=u?e[r+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let y=(c&15)<<2|f>>6,w=f&63;u||(w=64,a||(y=64)),i.push(n[m],n[_],n[y],n[w])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Sw(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):nC(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const o=n[e.charAt(r++)],c=r<e.length?n[e.charAt(r)]:0;++r;const f=r<e.length?n[e.charAt(r)]:64;++r;const _=r<e.length?n[e.charAt(r)]:64;if(++r,o==null||c==null||f==null||_==null)throw new iC;const y=o<<2|c>>4;if(i.push(y),f!==64){const w=c<<4&240|f>>2;if(i.push(w),_!==64){const b=f<<6&192|_;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class iC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rC=function(e){const t=Sw(e);return Cw.encodeByteArray(t,!0)},Cu=function(e){return rC(e).replace(/\./g,"")},kw=function(e){try{return Cw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=()=>sC().__FIREBASE_DEFAULTS__,aC=()=>{if(typeof process>"u"||typeof x_>"u")return;const e=x_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},lC=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&kw(e[1]);return t&&JSON.parse(t)},fh=()=>{try{return eC()||oC()||aC()||lC()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Lw=e=>fh()?.emulatorHosts?.[e],Rw=e=>{const t=Lw(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Ow=()=>fh()?.config,xw=e=>fh()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function im(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Cu(JSON.stringify(n)),Cu(JSON.stringify(a)),""].join(".")}const _l={};function uC(){const e={prod:[],emulator:[]};for(const t of Object.keys(_l))_l[t]?e.emulator.push(t):e.prod.push(t);return e}function hC(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let M_=!1;function rm(e,t){if(typeof window>"u"||typeof document>"u"||!vs(window.location.host)||_l[e]===t||_l[e]||M_)return;_l[e]=t;function n(y){return`__firebase__banner__${y}`}const i="__firebase__banner",o=uC().prod.length>0;function a(){const y=document.getElementById(i);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{M_=!0,a()},y}function m(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=hC(i),w=n("text"),b=document.getElementById(w)||document.createElement("span"),I=n("learnmore"),M=document.getElementById(I)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const B=y.element;c(B),m(M,I);const z=f();u(D,A),B.append(D,b,M,z),document.body.appendChild(B)}o?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function fC(){const e=fh()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pC(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _C(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gC(){const e=En();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yC(){return!fC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vC(){try{return typeof indexedDB=="object"}catch{return!1}}function wC(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="FirebaseError";class tr extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=EC,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,o=this.errors[t],a=o?TC(o,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new tr(r,c,i)}}function TC(e,t){return e.replace(IC,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const IC=/\{\$([^}]+)}/g;function bC(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ys(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const o=e[r],a=t[r];if(N_(o)&&N_(a)){if(!Ys(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function N_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ja(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function tl(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function PC(e,t){const n=new AC(e,t);return n.subscribe.bind(n)}class AC{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");SC(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=md),r.error===void 0&&(r.error=md),r.complete===void 0&&(r.complete=md);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SC(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){return e&&e._delegate?e._delegate:e}class us{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new cC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LC(t))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=$s){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$s){return this.instances.has(t)}getOptions(t=$s){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kC(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=$s){return this.component?this.component.multipleInstances?t:$s:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kC(e){return e===$s?void 0:e}function LC(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Xt||(Xt={}));const OC={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},xC=Xt.INFO,MC={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},NC=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=MC[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class sm{constructor(t){this.name=t,this._logLevel=xC,this._logHandler=NC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...t),this._logHandler(this,Xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...t),this._logHandler(this,Xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...t),this._logHandler(this,Xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...t),this._logHandler(this,Xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...t),this._logHandler(this,Xt.ERROR,...t)}}const DC=(e,t)=>t.some(n=>e instanceof n);let D_,V_;function VC(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FC(){return V_||(V_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,Zd=new WeakMap,Dw=new WeakMap,pd=new WeakMap,om=new WeakMap;function UC(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(ns(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Nw.set(n,e)}).catch(()=>{}),om.set(t,e),t}function BC(e){if(Zd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});Zd.set(e,t)}let Kd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Dw.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $C(e){Kd=e(Kd)}function zC(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(_d(this),t,...n);return Dw.set(i,t.sort?t.sort():[t]),ns(i)}:FC().includes(e)?function(...t){return e.apply(_d(this),t),ns(Nw.get(this))}:function(...t){return ns(e.apply(_d(this),t))}}function jC(e){return typeof e=="function"?zC(e):(e instanceof IDBTransaction&&BC(e),DC(e,VC())?new Proxy(e,Kd):e)}function ns(e){if(e instanceof IDBRequest)return UC(e);if(pd.has(e))return pd.get(e);const t=jC(e);return t!==e&&(pd.set(e,t),om.set(t,e)),t}const _d=e=>om.get(e);function HC(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),c=ns(a);return i&&a.addEventListener("upgradeneeded",u=>{i(ns(a.result),u.oldVersion,u.newVersion,ns(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const WC=["get","getKey","getAll","getAllKeys","count"],qC=["put","add","delete","clear"],gd=new Map;function F_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(gd.get(t))return gd.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=qC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||WC.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,r?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&u.done]))[0]};return gd.set(t,o),o}$C(e=>({...e,get:(t,n,i)=>F_(t,n)||e.get(t,n,i),has:(t,n)=>!!F_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ZC(e){return e.getComponent()?.type==="VERSION"}const Yd="@firebase/app",U_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new sm("@firebase/app"),KC="@firebase/app-compat",YC="@firebase/analytics-compat",QC="@firebase/analytics",XC="@firebase/app-check-compat",JC="@firebase/app-check",tk="@firebase/auth",ek="@firebase/auth-compat",nk="@firebase/database",ik="@firebase/data-connect",rk="@firebase/database-compat",sk="@firebase/functions",ok="@firebase/functions-compat",ak="@firebase/installations",lk="@firebase/installations-compat",ck="@firebase/messaging",uk="@firebase/messaging-compat",hk="@firebase/performance",dk="@firebase/performance-compat",fk="@firebase/remote-config",mk="@firebase/remote-config-compat",pk="@firebase/storage",_k="@firebase/storage-compat",gk="@firebase/firestore",yk="@firebase/ai",vk="@firebase/firestore-compat",wk="firebase",Ek="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="[DEFAULT]",Tk={[Yd]:"fire-core",[KC]:"fire-core-compat",[QC]:"fire-analytics",[YC]:"fire-analytics-compat",[JC]:"fire-app-check",[XC]:"fire-app-check-compat",[tk]:"fire-auth",[ek]:"fire-auth-compat",[nk]:"fire-rtdb",[ik]:"fire-data-connect",[rk]:"fire-rtdb-compat",[sk]:"fire-fn",[ok]:"fire-fn-compat",[ak]:"fire-iid",[lk]:"fire-iid-compat",[ck]:"fire-fcm",[uk]:"fire-fcm-compat",[hk]:"fire-perf",[dk]:"fire-perf-compat",[fk]:"fire-rc",[mk]:"fire-rc-compat",[pk]:"fire-gcs",[_k]:"fire-gcs-compat",[gk]:"fire-fst",[vk]:"fire-fst-compat",[yk]:"fire-vertex","fire-js":"fire-js",[wk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,Ik=new Map,Xd=new Map;function B_(e,t){try{e.container.addComponent(t)}catch(n){Lr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Qs(e){const t=e.name;if(Xd.has(t))return Lr.debug(`There were multiple attempts to register component ${t}.`),!1;Xd.set(t,e);for(const n of ku.values())B_(n,e);for(const n of Ik.values())B_(n,e);return!0}function mh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Zl("app","Firebase",bk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=Ek;function Vw(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Qd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw is.create("bad-app-name",{appName:String(r)});if(n||(n=Ow()),!n)throw is.create("no-options");const o=ku.get(r);if(o){if(Ys(n,o.options)&&Ys(i,o.config))return o;throw is.create("duplicate-app",{appName:r})}const a=new RC(r);for(const u of Xd.values())a.addComponent(u);const c=new Pk(n,i,a);return ku.set(r,c),c}function am(e=Qd){const t=ku.get(e);if(!t&&e===Qd&&Ow())return Vw();if(!t)throw is.create("no-app",{appName:e});return t}function ji(e,t,n){let i=Tk[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Qs(new us(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="firebase-heartbeat-database",Sk=1,Ll="firebase-heartbeat-store";let yd=null;function Fw(){return yd||(yd=HC(Ak,Sk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(e=>{throw is.create("idb-open",{originalErrorMessage:e.message})})),yd}async function Ck(e){try{const n=(await Fw()).transaction(Ll),i=await n.objectStore(Ll).get(Uw(e));return await n.done,i}catch(t){if(t instanceof tr)Lr.warn(t.message);else{const n=is.create("idb-get",{originalErrorMessage:t?.message});Lr.warn(n.message)}}}async function $_(e,t){try{const i=(await Fw()).transaction(Ll,"readwrite");await i.objectStore(Ll).put(t,Uw(e)),await i.done}catch(n){if(n instanceof tr)Lr.warn(n.message);else{const i=is.create("idb-set",{originalErrorMessage:n?.message});Lr.warn(i.message)}}}function Uw(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=1024,Lk=30;class Rk{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Lk){const r=Mk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Lr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=z_(),{heartbeatsToSend:n,unsentEntries:i}=Ok(this._heartbeatsCache.heartbeats),r=Cu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Lr.warn(t),""}}}function z_(){return new Date().toISOString().substring(0,10)}function Ok(e,t=kk){const n=[];let i=e.slice();for(const r of e){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),j_(n)>t){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),j_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xk{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vC()?wC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ck(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return $_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return $_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function j_(e){return Cu(JSON.stringify({version:2,heartbeats:e})).length}function Mk(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(e){Qs(new us("platform-logger",t=>new GC(t),"PRIVATE")),Qs(new us("heartbeat",t=>new Rk(t),"PRIVATE")),ji(Yd,U_,e),ji(Yd,U_,"esm2020"),ji("fire-js","")}Nk("");function Bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dk=Bw,$w=new Zl("auth","Firebase",Bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new sm("@firebase/auth");function Vk(e,...t){Lu.logLevel<=Xt.WARN&&Lu.warn(`Auth (${so}): ${e}`,...t)}function su(e,...t){Lu.logLevel<=Xt.ERROR&&Lu.error(`Auth (${so}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,...t){throw lm(e,...t)}function Hi(e,...t){return lm(e,...t)}function zw(e,t,n){const i={...Dk(),[t]:n};return new Zl("auth","Firebase",i).create(t,{appName:e.name})}function br(e){return zw(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return $w.create(e,...t)}function xt(e,t,...n){if(!e)throw lm(t,...n)}function wr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw su(t),new Error(t)}function Rr(e,t){e||wr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(){return typeof self<"u"&&self.location?.href||""}function Fk(){return H_()==="http:"||H_()==="https:"}function H_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fk()||pC()||"connection"in navigator)?navigator.onLine:!0}function Bk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rr(n>t,"Short delay should be less than long delay!"),this.isMobile=dC()||_C()}get(){return Uk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(e,t){Rr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jk=new Yl(3e4,6e4);function ws(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Es(e,t,n,i,r={}){return Hw(e,r,async()=>{let o={},a={};i&&(t==="GET"?a=i:o={body:JSON.stringify(i)});const c=Kl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const f={method:t,headers:u,...o};return mC()||(f.referrerPolicy="no-referrer"),e.emulatorConfig&&vs(e.emulatorConfig.host)&&(f.credentials="include"),jw.fetch()(await Ww(e,e.config.apiHost,n,c),f)})}async function Hw(e,t,n){e._canInitEmulator=!1;const i={...$k,...t};try{const r=new Wk(e),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Bc(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,f]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Bc(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Bc(e,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zw(e,m,f);wi(e,m)}}catch(r){if(r instanceof tr)throw r;wi(e,"network-request-failed",{message:String(r)})}}async function Ql(e,t,n,i,r={}){const o=await Es(e,t,n,i,r);return"mfaPendingCredential"in o&&wi(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function Ww(e,t,n,i){const r=`${t}${n}?${i}`,o=e,a=o.config.emulator?cm(e.config,r):`${e.config.apiScheme}://${r}`;return zk.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function Hk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hi(this.auth,"network-request-failed")),jk.get())})}}function Bc(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Hi(e,t,i);return r.customData._tokenResponse=n,r}function W_(e){return e!==void 0&&e.enterprise!==void 0}class qk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Hk(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Gk(e,t){return Es(e,"GET","/v2/recaptchaConfig",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(e,t){return Es(e,"POST","/v1/accounts:delete",t)}async function Ru(e,t){return Es(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Kk(e,t=!1){const n=Re(e),i=await n.getIdToken(t),r=um(i);xt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:gl(vd(r.auth_time)),issuedAtTime:gl(vd(r.iat)),expirationTime:gl(vd(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}function vd(e){return Number(e)*1e3}function um(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const r=kw(n);return r?JSON.parse(r):(su("Failed to decode base64 JWT payload"),null)}catch(r){return su("Caught error parsing JWT payload as JSON",r?.toString()),null}}function q_(e){const t=um(e);return xt(t,"internal-error"),xt(typeof t.exp<"u","internal-error"),xt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof tr&&Yk(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Yk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(e){const t=e.auth,n=await e.getIdToken(),i=await Rl(e,Ru(t,{idToken:n}));xt(i?.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=r.providerUserInfo?.length?qw(r.providerUserInfo):[],a=Jk(e.providerData,o),c=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!a?.length,f=c?u:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new tf(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(e,m)}async function Xk(e){const t=Re(e);await Ou(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Jk(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function qw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(e,t){const n=await Hw(e,{},async()=>{const i=Kl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,a=await Ww(e,r,"/v1/token",`key=${o}`),c=await e._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:i};return e.emulatorConfig&&vs(e.emulatorConfig.host)&&(u.credentials="include"),jw.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eL(e,t){return Es(e,"POST","/v2/accounts:revokeToken",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xt(t.idToken,"internal-error"),xt(typeof t.idToken<"u","internal-error"),xt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):q_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){xt(t.length!==0,"internal-error");const n=q_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await tL(t,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Yo;return i&&(xt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(xt(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),o&&(xt(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t){xt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pi{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new tf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Rl(this,this.stsTokenManager.getToken(this.auth,t));return xt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Kk(this,t)}reload(){return Xk(this)}_assign(t){this!==t&&(xt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new pi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ou(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(br(this.auth));const t=await this.getIdToken();return await Rl(this,Zk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:_,emailVerified:y,isAnonymous:w,providerData:b,stsTokenManager:I}=n;xt(_&&I,t,"internal-error");const M=Yo.fromJSON(this.name,I);xt(typeof _=="string",t,"internal-error"),Hr(i,t.name),Hr(r,t.name),xt(typeof y=="boolean",t,"internal-error"),xt(typeof w=="boolean",t,"internal-error"),Hr(o,t.name),Hr(a,t.name),Hr(c,t.name),Hr(u,t.name),Hr(f,t.name),Hr(m,t.name);const A=new pi({uid:_,auth:t,email:r,emailVerified:y,displayName:i,isAnonymous:w,photoURL:a,phoneNumber:o,tenantId:c,stsTokenManager:M,createdAt:f,lastLoginAt:m});return b&&Array.isArray(b)&&(A.providerData=b.map(D=>({...D}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new Yo;r.updateFromServerResponse(n);const o=new pi({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ou(o),o}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];xt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?qw(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,c=new Yo;c.updateFromIdToken(i);const u=new pi({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new tf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Map;function Er(e){Rr(e instanceof Function,"Expected a class definition");let t=G_.get(e);return t?(Rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Gw.type="NONE";const Z_=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(e,t,n){return`firebase:${e}:${t}:${n}`}class Qo{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=ou(this.userKey,r.apiKey,o),this.fullPersistenceKey=ou("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ru(this.auth,{idToken:t}).catch(()=>{});return n?pi._fromGetAccountInfoResponse(this.auth,n,t):null}return pi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Qo(Er(Z_),t,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Er(Z_);const a=ou(i,t.config.apiKey,t.name);let c=null;for(const f of n)try{const m=await f._get(a);if(m){let _;if(typeof m=="string"){const y=await Ru(t,{idToken:m}).catch(()=>{});if(!y)break;_=await pi._fromGetAccountInfoResponse(t,y,m)}else _=pi._fromJSON(t,m);f!==o&&(c=_),o=f;break}}catch{}const u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Qo(o,t,i):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Qo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Jw(t))return"Blackberry";if(tE(t))return"Webos";if(Kw(t))return"Safari";if((t.includes("chrome/")||Yw(t))&&!t.includes("edge/"))return"Chrome";if(Xw(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function Zw(e=En()){return/firefox\//i.test(e)}function Kw(e=En()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yw(e=En()){return/crios\//i.test(e)}function Qw(e=En()){return/iemobile/i.test(e)}function Xw(e=En()){return/android/i.test(e)}function Jw(e=En()){return/blackberry/i.test(e)}function tE(e=En()){return/webos/i.test(e)}function hm(e=En()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nL(e=En()){return hm(e)&&!!window.navigator?.standalone}function iL(){return gC()&&document.documentMode===10}function eE(e=En()){return hm(e)||Xw(e)||tE(e)||Jw(e)||/windows phone/i.test(e)||Qw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(e,t=[]){let n;switch(e){case"Browser":n=K_(En());break;case"Worker":n=`${K_(En())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=o=>new Promise((a,c)=>{try{const u=t(o);a(u)}catch(u){c(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(e,t={}){return Es(e,"GET","/v2/passwordPolicy",ws(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=6;class aL{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??oL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new rL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ru(this,{idToken:t}),i=await pi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===a)&&c?.user&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ou(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Bk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(br(this));const n=t?Re(t):null;return n&&xt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&xt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sL(this),n=new aL(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await eL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Er(t)||this._popupRedirectResolver;xt(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=nE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Vk(`Error while retrieving App Check token: ${t.error}`),t?.token}}function oo(e){return Re(e)}class Y_{constructor(t){this.auth=t,this.observer=null,this.addObserver=PC(n=>this.observer=n)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cL(e){ph=e}function iE(e){return ph.loadJS(e)}function uL(){return ph.recaptchaEnterpriseScript}function hL(){return ph.gapiScript}function dL(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class fL{constructor(){this.enterprise=new mL}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class mL{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const pL="recaptcha-enterprise",rE="NO_RECAPTCHA";class _L{constructor(t){this.type=pL,this.auth=oo(t)}async verify(t="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{Gk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new qk(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(u=>{c(u)})})}function r(o,a,c){const u=window.grecaptcha;W_(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:t}).then(f=>{a(f)}).catch(()=>{a(rE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fL().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(c=>{if(!n&&W_(window.grecaptcha))r(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=uL();u.length!==0&&(u+=c),iE(u).then(()=>{r(c,o,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})}}async function Q_(e,t,n,i=!1,r=!1){const o=new _L(e);let a;if(r)a=rE;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const c={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ef(e,t,n,i,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Q_(e,t,n,n==="getOobCode");return i(e,o)}else return i(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Q_(e,t,n,n==="getOobCode");return i(e,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(e,t){const n=mh(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ys(o,t??{}))return r;wi(r,"already-initialized")}return n.initialize({options:t})}function yL(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Er);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function vL(e,t,n){const i=oo(e);xt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=sE(t),{host:a,port:c}=wL(t),u=c===null?"":`:${c}`,f={url:`${o}//${a}${u}/`},m=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xt(Ys(f,i.config.emulator)&&Ys(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,vs(a)?(im(`${o}//${a}${u}`),rm("Auth",!0)):EL()}function sE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wL(e){const t=sE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:X_(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:X_(a)}}}function X_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function EL(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(t){return wr("not implemented")}_linkToIdToken(t,n){return wr("not implemented")}_getReauthenticationResolver(t){return wr("not implemented")}}async function TL(e,t){return Es(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(e,t){return Ql(e,"POST","/v1/accounts:signInWithPassword",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(e,t){return Ql(e,"POST","/v1/accounts:signInWithEmailLink",ws(e,t))}async function PL(e,t){return Ql(e,"POST","/v1/accounts:signInWithEmailLink",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends dm{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Ol(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Ol(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(t,n,"signInWithPassword",IL);case"emailLink":return bL(t,{email:this._email,oobCode:this._password});default:wi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(t,i,"signUpPassword",TL);case"emailLink":return PL(t,{idToken:n,email:this._email,oobCode:this._password});default:wi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(e,t){return Ql(e,"POST","/v1/accounts:signInWithIdp",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="http://localhost";class Xs extends dm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Xs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new Xs(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Xo(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Xo(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Xo(t,n)}buildRequest(){const t={requestUri:AL,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Kl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CL(e){const t=Ja(tl(e)).link,n=t?Ja(tl(t)).deep_link_id:null,i=Ja(tl(e)).deep_link_id;return(i?Ja(tl(i)).link:null)||i||n||t||e}class fm{constructor(t){const n=Ja(tl(t)),i=n.apiKey??null,r=n.oobCode??null,o=SL(n.mode??null);xt(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=CL(t);try{return new fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(t,n){return Ol._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=fm.parseLink(n);return xt(i,"argument-error"),Ol._fromEmailAndCode(t,i.code,i.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends oE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Xl{constructor(){super("facebook.com")}static credential(t){return Xs._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Kr.credentialFromTaggedObject(t)}static credentialFromError(t){return Kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Kr.credential(t.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xs._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Yr.credentialFromTaggedObject(t)}static credentialFromError(t){return Yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Yr.credential(n,i)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Xl{constructor(){super("github.com")}static credential(t){return Xs._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qr.credentialFromTaggedObject(t)}static credentialFromError(t){return Qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qr.credential(t.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Xl{constructor(){super("twitter.com")}static credential(t,n){return Xs._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Xr.credentialFromTaggedObject(t)}static credentialFromError(t){return Xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Xr.credential(n,i)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(e,t){return Ql(e,"POST","/v1/accounts:signUp",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const o=await pi._fromIdTokenResponse(t,i,r),a=J_(i);return new Js({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=J_(i);return new Js({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function J_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends tr{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new xu(t,n,i,r)}}function aE(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xu._fromErrorAndOperation(e,o,t,i):o})}async function LL(e,t,n=!1){const i=await Rl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Js._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(e,t,n=!1){const{auth:i}=e;if(zn(i.app))return Promise.reject(br(i));const r="reauthenticate";try{const o=await Rl(e,aE(i,r,t,e),n);xt(o.idToken,i,"internal-error");const a=um(o.idToken);xt(a,i,"internal-error");const{sub:c}=a;return xt(e.uid===c,i,"user-mismatch"),Js._forOperation(e,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&wi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(e,t,n=!1){if(zn(e.app))return Promise.reject(br(e));const i="signIn",r=await aE(e,i,t),o=await Js._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(o.user),o}async function OL(e,t){return lE(oo(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(e){const t=oo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function xL(e,t,n){if(zn(e.app))return Promise.reject(br(e));const i=oo(e),a=await ef(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cE(e),u}),c=await Js._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function ML(e,t,n){return zn(e.app)?Promise.reject(br(e)):OL(Re(e),ga.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cE(e),i})}function NL(e,t,n,i){return Re(e).onIdTokenChanged(t,n,i)}function DL(e,t,n){return Re(e).beforeAuthStateChanged(t,n)}function VL(e,t,n,i){return Re(e).onAuthStateChanged(t,n,i)}function FL(e){return Re(e).signOut()}const Mu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mu,"1"),this.storage.removeItem(Mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=1e3,BL=10;class hE extends uE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);iL()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,BL):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}hE.type="LOCAL";const $L=hE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends uE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}dE.type="SESSION";const fE=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new _h(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(a).map(async f=>f(n.origin,o)),u=await zL(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const f=mm("",20);r.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(_){const y=_;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function HL(e){Wi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function WL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qL(){return navigator?.serviceWorker?.controller||null}function GL(){return mE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",ZL=1,Nu="firebaseLocalStorage",_E="fbase_key";class Jl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(e,t){return e.transaction([Nu],t?"readwrite":"readonly").objectStore(Nu)}function KL(){const e=indexedDB.deleteDatabase(pE);return new Jl(e).toPromise()}function nf(){const e=indexedDB.open(pE,ZL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Nu,{keyPath:_E})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Nu)?t(i):(i.close(),await KL(),t(await nf()))})})}async function tg(e,t,n){const i=gh(e,!0).put({[_E]:t,value:n});return new Jl(i).toPromise()}async function YL(e,t){const n=gh(e,!1).get(t),i=await new Jl(n).toPromise();return i===void 0?null:i.value}function eg(e,t){const n=gh(e,!0).delete(t);return new Jl(n).toPromise()}const QL=800,XL=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>XL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(GL()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WL(),!this.activeServiceWorker)return;this.sender=new jL(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||qL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nf();return await tg(t,Mu,"1"),await eg(t,Mu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>tg(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>YL(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>eg(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=gh(r,!1).getAll();return new Jl(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const JL=gE;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(e,t){return t?Er(t):(xt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends dm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Xo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Xo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function eR(e){return lE(e.auth,new pm(e),e.bypassAuthState)}function nR(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),RL(n,new pm(e),e.bypassAuthState)}async function iR(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),LL(n,new pm(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t,n,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:c}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return iR;case"reauthViaPopup":case"reauthViaRedirect":return nR;default:wi(this.auth,"internal-error")}}resolve(t){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new Yl(2e3,1e4);class Ho extends yE{constructor(t,n,i,r,o){super(t,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xt(t,this.auth,"internal-error"),t}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const t=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,rR.get())};t()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",au=new Map;class oR extends yE{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=au.get(this.auth._key());if(!t){try{const i=await aR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}au.set(this.auth._key(),t)}return this.bypassAuthState||au.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aR(e,t){const n=uR(t),i=cR(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function lR(e,t){au.set(e._key(),t)}function cR(e){return Er(e._redirectPersistence)}function uR(e){return ou(sR,e.config.apiKey,e.name)}async function hR(e,t,n=!1){if(zn(e.app))return Promise.reject(br(e));const i=oo(e),r=tR(i,t),a=await new oR(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=600*1e3;class fR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!vE(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Hi(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=dR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ng(t))}saveEventToCache(t){this.cachedEventUids.add(ng(t)),this.lastProcessedEventTime=Date.now()}}function ng(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function vE({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function mR(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vE(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(e,t={}){return Es(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gR=/^https?/;async function yR(e){if(e.config.emulator)return;const{authorizedDomains:t}=await pR(e);for(const n of t)try{if(vR(n))return}catch{}wi(e,"unauthorized-domain")}function vR(e){const t=Jd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!gR.test(n))return!1;if(_R.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Yl(3e4,6e4);function ig(){const e=Wi().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ER(e){return new Promise((t,n)=>{function i(){ig(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ig(),n(Hi(e,"network-request-failed"))},timeout:wR.get()})}if(Wi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Wi().gapi?.load)i();else{const r=dL("iframefcb");return Wi()[r]=()=>{gapi.load?i():n(Hi(e,"network-request-failed"))},iE(`${hL()}?onload=${r}`).catch(o=>n(o))}}).catch(t=>{throw lu=null,t})}let lu=null;function TR(e){return lu=lu||ER(e),lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Yl(5e3,15e3),bR="__/auth/iframe",PR="emulator/auth/iframe",AR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(e){const t=e.config;xt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?cm(t,PR):`https://${e.config.authDomain}/${bR}`,i={apiKey:t.apiKey,appName:e.name,v:so},r=SR.get(e.config.apiHost);r&&(i.eid=r);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Kl(i).slice(1)}`}async function kR(e){const t=await TR(e),n=Wi().gapi;return xt(n,e,"internal-error"),t.open({where:document.body,url:CR(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AR,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Hi(e,"network-request-failed"),c=Wi().setTimeout(()=>{o(a)},IR.get());function u(){Wi().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RR=500,OR=600,xR="_blank",MR="http://localhost";class rg{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NR(e,t,n,i=RR,r=OR){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u={...LR,width:i.toString(),height:r.toString(),top:o,left:a},f=En().toLowerCase();n&&(c=Yw(f)?xR:n),Zw(f)&&(t=t||MR,u.scrollbars="yes");const m=Object.entries(u).reduce((y,[w,b])=>`${y}${w}=${b},`,"");if(nL(f)&&c!=="_self")return DR(t||"",c),new rg(null);const _=window.open(t||"",c,m);xt(_,e,"popup-blocked");try{_.focus()}catch{}return new rg(_)}function DR(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="__/auth/handler",FR="emulator/auth/handler",UR=encodeURIComponent("fac");async function sg(e,t,n,i,r,o){xt(e.config.authDomain,e,"auth-domain-config-required"),xt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:so,eventId:r};if(t instanceof oE){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",bC(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,_]of Object.entries({}))a[m]=_}if(t instanceof Xl){const m=t.getScopes().filter(_=>_!=="");m.length>0&&(a.scopes=m.join(","))}e.tenantId&&(a.tid=e.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await e._getAppCheckToken(),f=u?`#${UR}=${encodeURIComponent(u)}`:"";return`${BR(e)}?${Kl(c).slice(1)}${f}`}function BR({config:e}){return e.emulator?cm(e,FR):`https://${e.authDomain}/${VR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class $R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(t,n,i,r){Rr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await sg(t,n,i,Jd(),r);return NR(t,o,mm())}async _openRedirect(t,n,i,r){await this._originValidation(t);const o=await sg(t,n,i,Jd(),r);return HL(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Rr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await kR(t),i=new fR(t);return n.register("authEvent",r=>(xt(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(wd,{type:wd},r=>{const o=r?.[0]?.[wd];o!==void 0&&n(!!o),wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return eE()||Kw()||hm()}}const zR=$R;var og="@firebase/auth",ag="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WR(e){Qs(new us("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;xt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nE(e)},f=new lL(i,r,o,u);return yL(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Qs(new us("auth-internal",t=>{const n=oo(t.getProvider("auth").getImmediate());return(i=>new jR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(og,ag,HR(e)),ji(og,ag,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=300,GR=xw("authIdTokenMaxAge")||qR;let lg=null;const ZR=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>GR)return;const r=n?.token;lg!==r&&(lg=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function KR(e=am()){const t=mh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=gL(e,{popupRedirectResolver:zR,persistence:[JL,$L,fE]}),i=xw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=ZR(o.toString());DL(n,a,()=>a(n.currentUser)),NL(n,c=>a(c))}}const r=Lw("auth");return r&&vL(n,`http://${r}`),n}function YR(){return document.getElementsByTagName("head")?.[0]??document}cL({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const o=Hi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",YR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WR("Browser");var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,wE;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function O(){}O.prototype=C.prototype,S.F=C.prototype,S.prototype=new O,S.prototype.constructor=S,S.D=function(F,x,j){for(var V=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)V[Kt-2]=arguments[Kt];return C.prototype[x].apply(F,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,C,O){O||(O=0);const F=Array(16);if(typeof C=="string")for(var x=0;x<16;++x)F[x]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(x=0;x<16;++x)F[x]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=S.g[0],O=S.g[1],x=S.g[2];let j=S.g[3],V;V=C+(j^O&(x^j))+F[0]+3614090360&4294967295,C=O+(V<<7&4294967295|V>>>25),V=j+(x^C&(O^x))+F[1]+3905402710&4294967295,j=C+(V<<12&4294967295|V>>>20),V=x+(O^j&(C^O))+F[2]+606105819&4294967295,x=j+(V<<17&4294967295|V>>>15),V=O+(C^x&(j^C))+F[3]+3250441966&4294967295,O=x+(V<<22&4294967295|V>>>10),V=C+(j^O&(x^j))+F[4]+4118548399&4294967295,C=O+(V<<7&4294967295|V>>>25),V=j+(x^C&(O^x))+F[5]+1200080426&4294967295,j=C+(V<<12&4294967295|V>>>20),V=x+(O^j&(C^O))+F[6]+2821735955&4294967295,x=j+(V<<17&4294967295|V>>>15),V=O+(C^x&(j^C))+F[7]+4249261313&4294967295,O=x+(V<<22&4294967295|V>>>10),V=C+(j^O&(x^j))+F[8]+1770035416&4294967295,C=O+(V<<7&4294967295|V>>>25),V=j+(x^C&(O^x))+F[9]+2336552879&4294967295,j=C+(V<<12&4294967295|V>>>20),V=x+(O^j&(C^O))+F[10]+4294925233&4294967295,x=j+(V<<17&4294967295|V>>>15),V=O+(C^x&(j^C))+F[11]+2304563134&4294967295,O=x+(V<<22&4294967295|V>>>10),V=C+(j^O&(x^j))+F[12]+1804603682&4294967295,C=O+(V<<7&4294967295|V>>>25),V=j+(x^C&(O^x))+F[13]+4254626195&4294967295,j=C+(V<<12&4294967295|V>>>20),V=x+(O^j&(C^O))+F[14]+2792965006&4294967295,x=j+(V<<17&4294967295|V>>>15),V=O+(C^x&(j^C))+F[15]+1236535329&4294967295,O=x+(V<<22&4294967295|V>>>10),V=C+(x^j&(O^x))+F[1]+4129170786&4294967295,C=O+(V<<5&4294967295|V>>>27),V=j+(O^x&(C^O))+F[6]+3225465664&4294967295,j=C+(V<<9&4294967295|V>>>23),V=x+(C^O&(j^C))+F[11]+643717713&4294967295,x=j+(V<<14&4294967295|V>>>18),V=O+(j^C&(x^j))+F[0]+3921069994&4294967295,O=x+(V<<20&4294967295|V>>>12),V=C+(x^j&(O^x))+F[5]+3593408605&4294967295,C=O+(V<<5&4294967295|V>>>27),V=j+(O^x&(C^O))+F[10]+38016083&4294967295,j=C+(V<<9&4294967295|V>>>23),V=x+(C^O&(j^C))+F[15]+3634488961&4294967295,x=j+(V<<14&4294967295|V>>>18),V=O+(j^C&(x^j))+F[4]+3889429448&4294967295,O=x+(V<<20&4294967295|V>>>12),V=C+(x^j&(O^x))+F[9]+568446438&4294967295,C=O+(V<<5&4294967295|V>>>27),V=j+(O^x&(C^O))+F[14]+3275163606&4294967295,j=C+(V<<9&4294967295|V>>>23),V=x+(C^O&(j^C))+F[3]+4107603335&4294967295,x=j+(V<<14&4294967295|V>>>18),V=O+(j^C&(x^j))+F[8]+1163531501&4294967295,O=x+(V<<20&4294967295|V>>>12),V=C+(x^j&(O^x))+F[13]+2850285829&4294967295,C=O+(V<<5&4294967295|V>>>27),V=j+(O^x&(C^O))+F[2]+4243563512&4294967295,j=C+(V<<9&4294967295|V>>>23),V=x+(C^O&(j^C))+F[7]+1735328473&4294967295,x=j+(V<<14&4294967295|V>>>18),V=O+(j^C&(x^j))+F[12]+2368359562&4294967295,O=x+(V<<20&4294967295|V>>>12),V=C+(O^x^j)+F[5]+4294588738&4294967295,C=O+(V<<4&4294967295|V>>>28),V=j+(C^O^x)+F[8]+2272392833&4294967295,j=C+(V<<11&4294967295|V>>>21),V=x+(j^C^O)+F[11]+1839030562&4294967295,x=j+(V<<16&4294967295|V>>>16),V=O+(x^j^C)+F[14]+4259657740&4294967295,O=x+(V<<23&4294967295|V>>>9),V=C+(O^x^j)+F[1]+2763975236&4294967295,C=O+(V<<4&4294967295|V>>>28),V=j+(C^O^x)+F[4]+1272893353&4294967295,j=C+(V<<11&4294967295|V>>>21),V=x+(j^C^O)+F[7]+4139469664&4294967295,x=j+(V<<16&4294967295|V>>>16),V=O+(x^j^C)+F[10]+3200236656&4294967295,O=x+(V<<23&4294967295|V>>>9),V=C+(O^x^j)+F[13]+681279174&4294967295,C=O+(V<<4&4294967295|V>>>28),V=j+(C^O^x)+F[0]+3936430074&4294967295,j=C+(V<<11&4294967295|V>>>21),V=x+(j^C^O)+F[3]+3572445317&4294967295,x=j+(V<<16&4294967295|V>>>16),V=O+(x^j^C)+F[6]+76029189&4294967295,O=x+(V<<23&4294967295|V>>>9),V=C+(O^x^j)+F[9]+3654602809&4294967295,C=O+(V<<4&4294967295|V>>>28),V=j+(C^O^x)+F[12]+3873151461&4294967295,j=C+(V<<11&4294967295|V>>>21),V=x+(j^C^O)+F[15]+530742520&4294967295,x=j+(V<<16&4294967295|V>>>16),V=O+(x^j^C)+F[2]+3299628645&4294967295,O=x+(V<<23&4294967295|V>>>9),V=C+(x^(O|~j))+F[0]+4096336452&4294967295,C=O+(V<<6&4294967295|V>>>26),V=j+(O^(C|~x))+F[7]+1126891415&4294967295,j=C+(V<<10&4294967295|V>>>22),V=x+(C^(j|~O))+F[14]+2878612391&4294967295,x=j+(V<<15&4294967295|V>>>17),V=O+(j^(x|~C))+F[5]+4237533241&4294967295,O=x+(V<<21&4294967295|V>>>11),V=C+(x^(O|~j))+F[12]+1700485571&4294967295,C=O+(V<<6&4294967295|V>>>26),V=j+(O^(C|~x))+F[3]+2399980690&4294967295,j=C+(V<<10&4294967295|V>>>22),V=x+(C^(j|~O))+F[10]+4293915773&4294967295,x=j+(V<<15&4294967295|V>>>17),V=O+(j^(x|~C))+F[1]+2240044497&4294967295,O=x+(V<<21&4294967295|V>>>11),V=C+(x^(O|~j))+F[8]+1873313359&4294967295,C=O+(V<<6&4294967295|V>>>26),V=j+(O^(C|~x))+F[15]+4264355552&4294967295,j=C+(V<<10&4294967295|V>>>22),V=x+(C^(j|~O))+F[6]+2734768916&4294967295,x=j+(V<<15&4294967295|V>>>17),V=O+(j^(x|~C))+F[13]+1309151649&4294967295,O=x+(V<<21&4294967295|V>>>11),V=C+(x^(O|~j))+F[4]+4149444226&4294967295,C=O+(V<<6&4294967295|V>>>26),V=j+(O^(C|~x))+F[11]+3174756917&4294967295,j=C+(V<<10&4294967295|V>>>22),V=x+(C^(j|~O))+F[2]+718787259&4294967295,x=j+(V<<15&4294967295|V>>>17),V=O+(j^(x|~C))+F[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(x+(V<<21&4294967295|V>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+j&4294967295}i.prototype.v=function(S,C){C===void 0&&(C=S.length);const O=C-this.blockSize,F=this.C;let x=this.h,j=0;for(;j<C;){if(x==0)for(;j<=O;)r(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<C;)if(F[x++]=S.charCodeAt(j++),x==this.blockSize){r(this,F),x=0;break}}else for(;j<C;)if(F[x++]=S[j++],x==this.blockSize){r(this,F),x=0;break}}this.h=x,this.o+=C},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;C=this.o*8;for(var O=S.length-8;O<S.length;++O)S[O]=C&255,C/=256;for(this.v(S),S=Array(16),C=0,O=0;O<4;++O)for(let F=0;F<32;F+=8)S[C++]=this.g[O]>>>F&255;return S};function o(S,C){var O=c;return Object.prototype.hasOwnProperty.call(O,S)?O[S]:O[S]=C(S)}function a(S,C){this.h=C;const O=[];let F=!0;for(let x=S.length-1;x>=0;x--){const j=S[x]|0;F&&j==C||(O[x]=j,F=!1)}this.g=O}var c={};function u(S){return-128<=S&&S<128?o(S,function(C){return new a([C|0],C<0?-1:0)}):new a([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return _;if(S<0)return M(f(-S));const C=[];let O=1;for(let F=0;S>=O;F++)C[F]=S/O|0,O*=4294967296;return new a(C,0)}function m(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return M(m(S.substring(1),C));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=f(Math.pow(C,8));let F=_;for(let j=0;j<S.length;j+=8){var x=Math.min(8,S.length-j);const V=parseInt(S.substring(j,j+x),C);x<8?(x=f(Math.pow(C,x)),F=F.j(x).add(f(V))):(F=F.j(O),F=F.add(f(V)))}return F}var _=u(0),y=u(1),w=u(16777216);e=a.prototype,e.m=function(){if(I(this))return-M(this).m();let S=0,C=1;for(let O=0;O<this.g.length;O++){const F=this.i(O);S+=(F>=0?F:4294967296+F)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(I(this))return"-"+M(this).toString(S);const C=f(Math.pow(S,6));var O=this;let F="";for(;;){const x=z(O,C).g;O=A(O,x.j(C));let j=((O.g.length>0?O.g[0]:O.h)>>>0).toString(S);if(O=x,b(O))return j+F;for(;j.length<6;)j="0"+j;F=j+F}},e.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(let C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function I(S){return S.h==-1}e.l=function(S){return S=A(this,S),I(S)?-1:b(S)?0:1};function M(S){const C=S.g.length,O=[];for(let F=0;F<C;F++)O[F]=~S.g[F];return new a(O,~S.h).add(y)}e.abs=function(){return I(this)?M(this):this},e.add=function(S){const C=Math.max(this.g.length,S.g.length),O=[];let F=0;for(let x=0;x<=C;x++){let j=F+(this.i(x)&65535)+(S.i(x)&65535),V=(j>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);F=V>>>16,j&=65535,V&=65535,O[x]=V<<16|j}return new a(O,O[O.length-1]&-2147483648?-1:0)};function A(S,C){return S.add(M(C))}e.j=function(S){if(b(this)||b(S))return _;if(I(this))return I(S)?M(this).j(M(S)):M(M(this).j(S));if(I(S))return M(this.j(M(S)));if(this.l(w)<0&&S.l(w)<0)return f(this.m()*S.m());const C=this.g.length+S.g.length,O=[];for(var F=0;F<2*C;F++)O[F]=0;for(F=0;F<this.g.length;F++)for(let x=0;x<S.g.length;x++){const j=this.i(F)>>>16,V=this.i(F)&65535,Kt=S.i(x)>>>16,xe=S.i(x)&65535;O[2*F+2*x]+=V*xe,D(O,2*F+2*x),O[2*F+2*x+1]+=j*xe,D(O,2*F+2*x+1),O[2*F+2*x+1]+=V*Kt,D(O,2*F+2*x+1),O[2*F+2*x+2]+=j*Kt,D(O,2*F+2*x+2)}for(S=0;S<C;S++)O[S]=O[2*S+1]<<16|O[2*S];for(S=C;S<2*C;S++)O[S]=0;return new a(O,0)};function D(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function B(S,C){this.g=S,this.h=C}function z(S,C){if(b(C))throw Error("division by zero");if(b(S))return new B(_,_);if(I(S))return C=z(M(S),C),new B(M(C.g),M(C.h));if(I(C))return C=z(S,M(C)),new B(M(C.g),C.h);if(S.g.length>30){if(I(S)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var O=y,F=C;F.l(S)<=0;)O=Q(O),F=Q(F);var x=rt(O,1),j=rt(F,1);for(F=rt(F,2),O=rt(O,2);!b(F);){var V=j.add(F);V.l(S)<=0&&(x=x.add(O),j=V),F=rt(F,1),O=rt(O,1)}return C=A(S,x.j(C)),new B(x,C)}for(x=_;S.l(C)>=0;){for(O=Math.max(1,Math.floor(S.m()/C.m())),F=Math.ceil(Math.log(O)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),j=f(O),V=j.j(C);I(V)||V.l(S)>0;)O-=F,j=f(O),V=j.j(C);b(j)&&(j=y),x=x.add(j),S=A(S,V)}return new B(x,S)}e.B=function(S){return z(this,S).h},e.and=function(S){const C=Math.max(this.g.length,S.g.length),O=[];for(let F=0;F<C;F++)O[F]=this.i(F)&S.i(F);return new a(O,this.h&S.h)},e.or=function(S){const C=Math.max(this.g.length,S.g.length),O=[];for(let F=0;F<C;F++)O[F]=this.i(F)|S.i(F);return new a(O,this.h|S.h)},e.xor=function(S){const C=Math.max(this.g.length,S.g.length),O=[];for(let F=0;F<C;F++)O[F]=this.i(F)^S.i(F);return new a(O,this.h^S.h)};function Q(S){const C=S.g.length+1,O=[];for(let F=0;F<C;F++)O[F]=S.i(F)<<1|S.i(F-1)>>>31;return new a(O,S.h)}function rt(S,C){const O=C>>5;C%=32;const F=S.g.length-O,x=[];for(let j=0;j<F;j++)x[j]=C>0?S.i(j+O)>>>C|S.i(j+O+1)<<32-C:S.i(j+O);return new a(x,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,wE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,rs=a}).apply(typeof cg<"u"?cg:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,el,TE,cu,rf,IE,bE,PE;(function(){var e,t=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var g=0;g<h.length;++g){var E=h[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function r(h,g){if(g)t:{var E=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var G=h[P];if(!(G in E))break t;E=E[G]}h=h[h.length-1],P=E[h],g=g(P),g!=P&&g!=null&&t(E,h,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(g){var E=[],P;for(P in g)Object.prototype.hasOwnProperty.call(g,P)&&E.push([P,g[P]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,E){return h.call.apply(h.bind,arguments)}function f(h,g,E){return f=u,f.apply(null,arguments)}function m(h,g){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function _(h,g){function E(){}E.prototype=g.prototype,h.Z=g.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(P,G,Y){for(var ht=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ht[Dt-2]=arguments[Dt];return g.prototype[G].apply(P,ht)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const g=h.length;if(g>0){const E=Array(g);for(let P=0;P<g;P++)E[P]=h[P];return E}return[]}function b(h,g){for(let P=1;P<arguments.length;P++){const G=arguments[P];var E=typeof G;if(E=E!="object"?E:G?Array.isArray(G)?"array":E:"null",E=="array"||E=="object"&&typeof G.length=="number"){E=h.length||0;const Y=G.length||0;h.length=E+Y;for(let ht=0;ht<Y;ht++)h[E+ht]=G[ht]}else h.push(G)}}class I{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(h){a.setTimeout(()=>{throw h},0)}function A(){var h=S;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class D{constructor(){this.h=this.g=null}add(g,E){const P=B.get();P.set(g,E),this.h?this.h.next=P:this.g=P,this.h=P}}var B=new I(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,rt=!1,S=new D,C=()=>{const h=Promise.resolve(void 0);Q=()=>{h.then(O)}};function O(){for(var h;h=A();){try{h.h.call(h.g)}catch(E){M(E)}var g=B;g.j(h),g.h<100&&(g.h++,h.next=g.g,g.g=h)}rt=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,g),a.removeEventListener("test",E,g)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function Kt(h,g){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,g)}_(Kt,x),Kt.prototype.init=function(h,g){const E=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget,g||(E=="mouseover"?g=h.fromElement:E=="mouseout"&&(g=h.toElement)),this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Ut=0;function Lt(h,g,E,P,G){this.listener=h,this.proxy=null,this.src=g,this.type=E,this.capture=!!P,this.ha=G,this.key=++Ut,this.da=this.fa=!1}function dt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function we(h,g,E){for(const P in h)g.call(E,h[P],P,h)}function At(h,g){for(const E in h)g.call(void 0,h[E],E,h)}function zt(h){const g={};for(const E in h)g[E]=h[E];return g}const Yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(h,g){let E,P;for(let G=1;G<arguments.length;G++){P=arguments[G];for(E in P)h[E]=P[E];for(let Y=0;Y<Yt.length;Y++)E=Yt[Y],Object.prototype.hasOwnProperty.call(P,E)&&(h[E]=P[E])}}function Qt(h){this.src=h,this.g={},this.h=0}Qt.prototype.add=function(h,g,E,P,G){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ht=Ct(h,g,P,G);return ht>-1?(g=h[ht],E||(g.fa=!1)):(g=new Lt(g,this.src,Y,!!P,G),g.fa=E,h.push(g)),g};function Ht(h,g){const E=g.type;if(E in h.g){var P=h.g[E],G=Array.prototype.indexOf.call(P,g,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(P,G,1),Y&&(dt(g),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ct(h,g,E,P){for(let G=0;G<h.length;++G){const Y=h[G];if(!Y.da&&Y.listener==g&&Y.capture==!!E&&Y.ha==P)return G}return-1}var tt="closure_lm_"+(Math.random()*1e6|0),ut={};function ft(h,g,E,P,G){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)ft(h,g[Y],E,P,G);return null}return E=k(E),h&&h[xe]?h.J(g,E,c(P)?!!P.capture:!1,G):wt(h,g,E,!1,P,G)}function wt(h,g,E,P,G,Y){if(!g)throw Error("Invalid event type");const ht=c(G)?!!G.capture:!!G;let Dt=st(h);if(Dt||(h[tt]=Dt=new Qt(h)),E=Dt.add(g,E,P,ht,Y),E.proxy)return E;if(P=Gt(),E.proxy=P,P.src=h,P.listener=E,h.addEventListener)j||(G=ht),G===void 0&&(G=!1),h.addEventListener(g.toString(),P,G);else if(h.attachEvent)h.attachEvent(q(g.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Gt(){function h(E){return g.call(h.src,h.listener,E)}const g=it;return h}function N(h,g,E,P,G){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)N(h,g[Y],E,P,G);else P=c(P)?!!P.capture:!!P,E=k(E),h&&h[xe]?(h=h.i,Y=String(g).toString(),Y in h.g&&(g=h.g[Y],E=Ct(g,E,P,G),E>-1&&(dt(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete h.g[Y],h.h--)))):h&&(h=st(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Ct(g,E,P,G)),(E=h>-1?g[h]:null)&&U(E))}function U(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[xe])Ht(g.i,h);else{var E=h.type,P=h.proxy;g.removeEventListener?g.removeEventListener(E,P,h.capture):g.detachEvent?g.detachEvent(q(E),P):g.addListener&&g.removeListener&&g.removeListener(P),(E=st(g))?(Ht(E,h),E.h==0&&(E.src=null,g[tt]=null)):dt(h)}}}function q(h){return h in ut?ut[h]:ut[h]="on"+h}function it(h,g){if(h.da)h=!0;else{g=new Kt(g,this);const E=h.listener,P=h.ha||h.src;h.fa&&U(h),h=E.call(P,g)}return h}function st(h){return h=h[tt],h instanceof Qt?h:null}var et="__closure_events_fn_"+(Math.random()*1e9>>>0);function k(h){return typeof h=="function"?h:(h[et]||(h[et]=function(g){return h.handleEvent(g)}),h[et])}function R(){F.call(this),this.i=new Qt(this),this.M=this,this.G=null}_(R,F),R.prototype[xe]=!0,R.prototype.removeEventListener=function(h,g,E,P){N(this,h,g,E,P)};function H(h,g){var E,P=h.G;if(P)for(E=[];P;P=P.G)E.push(P);if(h=h.M,P=g.type||g,typeof g=="string")g=new x(g,h);else if(g instanceof x)g.target=g.target||h;else{var G=g;g=new x(P,h),ye(g,G)}G=!0;let Y,ht;if(E)for(ht=E.length-1;ht>=0;ht--)Y=g.g=E[ht],G=Z(Y,P,!0,g)&&G;if(Y=g.g=h,G=Z(Y,P,!0,g)&&G,G=Z(Y,P,!1,g)&&G,E)for(ht=0;ht<E.length;ht++)Y=g.g=E[ht],G=Z(Y,P,!1,g)&&G}R.prototype.N=function(){if(R.Z.N.call(this),this.i){var h=this.i;for(const g in h.g){const E=h.g[g];for(let P=0;P<E.length;P++)dt(E[P]);delete h.g[g],h.h--}}this.G=null},R.prototype.J=function(h,g,E,P){return this.i.add(String(h),g,!1,E,P)},R.prototype.K=function(h,g,E,P){return this.i.add(String(h),g,!0,E,P)};function Z(h,g,E,P){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();let G=!0;for(let Y=0;Y<g.length;++Y){const ht=g[Y];if(ht&&!ht.da&&ht.capture==E){const Dt=ht.listener,se=ht.ha||ht.src;ht.fa&&Ht(h.i,ht),G=Dt.call(se,P)!==!1&&G}}return G&&!P.defaultPrevented}function pt(h,g){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(h,g||0)}function ot(h){h.g=pt(()=>{h.g=null,h.i&&(h.i=!1,ot(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class W extends F{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function X(h){F.call(this),this.h=h,this.g={}}_(X,F);var vt=[];function kt(h){we(h.g,function(g,E){this.g.hasOwnProperty(E)&&U(g)},h),h.g={}}X.prototype.N=function(){X.Z.N.call(this),kt(this)},X.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=a.JSON.stringify,ke=a.JSON.parse,Ie=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function en(){}function hn(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ii(){x.call(this,"d")}_(Ii,x);function He(){x.call(this,"c")}_(He,x);var We={},ci=null;function er(){return ci=ci||new R}We.Ia="serverreachability";function ac(h){x.call(this,We.Ia,h)}_(ac,x);function Dr(h){const g=er();H(g,new ac(g))}We.STAT_EVENT="statevent";function Ta(h,g){x.call(this,We.STAT_EVENT,h),this.stat=g}_(Ta,x);function nn(h){const g=er();H(g,new Ta(g,h))}We.Ja="timingevent";function lc(h,g){x.call(this,We.Ja,h),this.size=g}_(lc,x);function Ss(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function Cs(){this.g=!0}Cs.prototype.ua=function(){this.g=!1};function jh(h,g,E,P,G,Y){h.info(function(){if(h.g)if(Y){var ht="",Dt=Y.split("&");for(let de=0;de<Dt.length;de++){var se=Dt[de].split("=");if(se.length>1){const $e=se[0];se=se[1];const ti=$e.split("_");ht=ti.length>=2&&ti[1]=="type"?ht+($e+"="+se+"&"):ht+($e+"=redacted&")}}}else ht=null;else ht=Y;return"XMLHTTP REQ ("+P+") [attempt "+G+"]: "+g+`
`+E+`
`+ht})}function Hh(h,g,E,P,G,Y,ht){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+G+"]: "+g+`
`+E+`
`+Y+" "+ht})}function Vr(h,g,E,P){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wh(h,E)+(P?" "+P:"")})}function Ia(h,g){h.info(function(){return"TIMEOUT: "+g})}Cs.prototype.info=function(){};function Wh(h,g){if(!h.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var E=Y[h];if(!(E.length<2)){var P=E[1];if(Array.isArray(P)&&!(P.length<1)){var G=P[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ht=1;ht<P.length;ht++)P[ht]=""}}}}return Bt(Y)}catch{return g}}var ho={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uc;function Rn(){}_(Rn,en),Rn.prototype.g=function(){return new XMLHttpRequest},uc=new Rn;function Pt(h){return encodeURIComponent(String(h))}function hc(h){var g=1;h=h.split(":");const E=[];for(;g>0&&h.length;)E.push(h.shift()),g--;return h.length&&E.push(h.join(":")),E}function ui(h,g,E,P){this.j=h,this.i=g,this.l=E,this.S=P||1,this.V=new X(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ba}function ba(){this.i=null,this.g="",this.h=!1}var Pa={},ks={};function fo(h,g,E){h.M=1,h.A=be(Tn(g)),h.u=E,h.R=!0,nr(h,null)}function nr(h,g){h.F=Date.now(),mo(h),h.B=Tn(h.A);var E=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),vo(E.i,"t",P),h.C=0,E=h.j.L,h.h=new ba,h.g=Ua(h.j,E?g:null,!h.u),h.P>0&&(h.O=new W(f(h.Y,h,h.g),h.P)),g=h.V,E=h.g,P=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(vt[0]=G.toString()),G=vt);for(let Y=0;Y<G.length;Y++){const ht=ft(E,G[Y],P||g.handleEvent,!1,g.h||g);if(!ht)break;g.g[ht.key]=ht}g=h.J?zt(h.J):{},h.u?(h.v||(h.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,g)):(h.v="GET",h.g.ea(h.B,h.v,null,g)),Dr(),jh(h.i,h.v,h.B,h.l,h.S,h.u)}ui.prototype.ba=function(h){h=h.target;const g=this.O;g&&Si(h)==3?g.j():this.Y(h)},ui.prototype.Y=function(h){try{if(h==this.g)t:{const Dt=Si(this.g),se=this.g.ya(),de=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||Oa(this.g)))){this.K||Dt!=4||se==7||(se==8||de<=0?Dr(3):Dr(2)),po(this);var g=this.g.ca();this.X=g;var E=dc(this);if(this.o=g==200,Hh(this.i,this.v,this.B,this.l,this.S,Dt,g),this.o){if(this.U&&!this.L){e:{if(this.g){var P,G=this.g;if((P=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(P)){var Y=P;break e}}Y=null}if(h=Y)Vr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Aa(this,h);else{this.o=!1,this.m=3,nn(12),Yn(this),Ls(this);break t}}if(this.R){h=!0;let $e;for(;!this.K&&this.C<E.length;)if($e=qh(this,E),$e==ks){Dt==4&&(this.m=4,nn(14),h=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if($e==Pa){this.m=4,nn(15),Vr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Vr(this.i,this.l,$e,null),Aa(this,$e);if(fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||E.length!=0||this.h.h||(this.m=1,nn(16),h=!1),this.o=this.o&&h,!h)Vr(this.i,this.l,E,"[Invalid Chunked Response]"),Yn(this),Ls(this);else if(E.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Va(ht),ht.P=!0,nn(11))}}else Vr(this.i,this.l,E,null),Aa(this,E);Dt==4&&Yn(this),this.o&&!this.K&&(Dt==4?Bn(this.j,this):(this.o=!1,mo(this)))}else xa(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,nn(12)):(this.m=0,nn(13)),Yn(this),Ls(this)}}}catch{}finally{}};function dc(h){if(!fc(h))return h.g.la();const g=Oa(h.g);if(g==="")return"";let E="";const P=g.length,G=Si(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Yn(h),Ls(h),"";h.h.i=new a.TextDecoder}for(let Y=0;Y<P;Y++)h.h.h=!0,E+=h.h.i.decode(g[Y],{stream:!(G&&Y==P-1)});return g.length=0,h.h.g+=E,h.C=0,h.h.g}function fc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qh(h,g){var E=h.C,P=g.indexOf(`
`,E);return P==-1?ks:(E=Number(g.substring(E,P)),isNaN(E)?Pa:(P+=1,P+E>g.length?ks:(g=g.slice(P,P+E),h.C=P+E,g)))}ui.prototype.cancel=function(){this.K=!0,Yn(this)};function mo(h){h.T=Date.now()+h.H,mc(h,h.H)}function mc(h,g){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ss(f(h.aa,h),g)}function po(h){h.D&&(a.clearTimeout(h.D),h.D=null)}ui.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ia(this.i,this.B),this.M!=2&&(Dr(),nn(17)),Yn(this),this.m=2,Ls(this)):mc(this,this.T-h)};function Ls(h){h.j.I==0||h.K||Bn(h.j,h)}function Yn(h){po(h);var g=h.O;g&&typeof g.dispose=="function"&&g.dispose(),h.O=null,kt(h.V),h.g&&(g=h.g,h.g=null,g.abort(),g.dispose())}function Aa(h,g){try{var E=h.j;if(E.I!=0&&(E.g==h||Rs(E.h,h))){if(!h.L&&Rs(E.h,h)&&E.I==3){try{var P=E.Ba.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var G=P;if(G[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)bo(E),To(E);else break t;Da(E),nn(18)}}else E.xa=G[1],0<E.xa-E.K&&G[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ss(f(E.Va,E),6e3));gc(E.h)<=1&&E.ta&&(E.ta=void 0)}else ki(E,11)}else if((h.L||E.g==h)&&bo(E),!V(g))for(G=E.Ba.g.parse(g),g=0;g<G.length;g++){let de=G[g];const $e=de[0];if(!($e<=E.K))if(E.K=$e,de=de[1],E.I==2)if(de[0]=="c"){E.M=de[1],E.ba=de[2];const ti=de[3];ti!=null&&(E.ka=ti,E.j.info("VER="+E.ka));const fi=de[4];fi!=null&&(E.za=fi,E.j.info("SVER="+E.za));const ei=de[5];ei!=null&&typeof ei=="number"&&ei>0&&(P=1.5*ei,E.O=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const Li=h.g;if(Li){const So=Li.g?Li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var Y=P.h;Y.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ir(Y,Y.h),Y.h=null))}if(P.G){const Co=Li.g?Li.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(P.wa=Co,It(P.J,P.G,Co))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),P=E;var ht=h;if(P.na=Fa(P,P.L?P.ba:null,P.W),ht.L){Sa(P.h,ht);var Dt=ht,se=P.O;se&&(Dt.H=se),Dt.D&&(po(Dt),mo(Dt)),P.g=ht}else Na(P);E.i.length>0&&Ci(E)}else de[0]!="stop"&&de[0]!="close"||ki(E,7);else E.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?ki(E,7):Wt(E):de[0]!="noop"&&E.l&&E.l.qa(de),E.A=0)}}Dr(4)}catch{}}var Gh=class{constructor(h,g){this.g=h,this.map=g}};function pc(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _c(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function gc(h){return h.h?1:h.g?h.g.size:0}function Rs(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function ir(h,g){h.g?h.g.add(g):h.h=g}function Sa(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}pc.prototype.cancel=function(){if(this.i=Ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ca(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const E of h.g.values())g=g.concat(E.G);return g}return w(h.i)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ne(h,g){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const P=h[E].indexOf("=");let G,Y=null;P>=0?(G=h[E].substring(0,P),Y=h[E].substring(P+1)):G=h[E],g(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function re(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;h instanceof re?(this.l=h.l,Qn(this,h.j),this.o=h.o,this.g=h.g,Xn(this,h.u),this.h=h.h,Os(this,xs(h.i)),this.m=h.m):h&&(g=String(h).match(Fr))?(this.l=!1,Qn(this,g[1]||"",!0),this.o=rr(g[2]||""),this.g=rr(g[3]||"",!0),Xn(this,g[4]),this.h=rr(g[5]||"",!0),Os(this,g[6]||"",!0),this.m=rr(g[7]||"")):(this.l=!1,this.i=new hi(null,this.l))}re.prototype.toString=function(){const h=[];var g=this.j;g&&h.push(bi(g,yc,!0),":");var E=this.g;return(E||g=="file")&&(h.push("//"),(g=this.o)&&h.push(bi(g,yc,!0),"@"),h.push(Pt(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(bi(E,E.charAt(0)=="/"?sr:_o,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",bi(E,or)),h.join("")},re.prototype.resolve=function(h){const g=Tn(this);let E=!!h.j;E?Qn(g,h.j):E=!!h.o,E?g.o=h.o:E=!!h.g,E?g.g=h.g:E=h.u!=null;var P=h.h;if(E)Xn(g,h.u);else if(E=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var G=g.h.lastIndexOf("/");G!=-1&&(P=g.h.slice(0,G+1)+P)}if(G=P,G==".."||G==".")P="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){P=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let ht=0;ht<G.length;){const Dt=G[ht++];Dt=="."?P&&ht==G.length&&Y.push(""):Dt==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),P&&ht==G.length&&Y.push("")):(Y.push(Dt),P=!0)}P=Y.join("/")}else P=G}return E?g.h=P:E=h.i.toString()!=="",E?Os(g,xs(h.i)):E=!!h.m,E&&(g.m=h.m),g};function Tn(h){return new re(h)}function Qn(h,g,E){h.j=E?rr(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Xn(h,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);h.u=g}else h.u=null}function Os(h,g,E){g instanceof hi?(h.i=g,ka(h.i,h.l)):(E||(g=bi(g,Me)),h.i=new hi(g,h.l))}function It(h,g,E){h.i.set(g,E)}function be(h){return It(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function rr(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bi(h,g,E){return typeof h=="string"?(h=encodeURI(h).replace(g,On),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function On(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yc=/[#\/\?@]/g,_o=/[#\?:]/g,sr=/[#\?]/g,Me=/[#\?@]/g,or=/#/g;function hi(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Un(h){h.g||(h.g=new Map,h.h=0,h.i&&ne(h.i,function(g,E){h.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}e=hi.prototype,e.add=function(h,g){Un(this),this.i=null,h=Pi(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(g),this.h+=1,this};function go(h,g){Un(h),g=Pi(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function Ur(h,g){return Un(h),g=Pi(h,g),h.g.has(g)}e.forEach=function(h,g){Un(this),this.g.forEach(function(E,P){E.forEach(function(G){h.call(g,G,P,this)},this)},this)};function yo(h,g){Un(h);let E=[];if(typeof g=="string")Ur(h,g)&&(E=E.concat(h.g.get(Pi(h,g))));else for(h=Array.from(h.g.values()),g=0;g<h.length;g++)E=E.concat(h[g]);return E}e.set=function(h,g){return Un(this),this.i=null,h=Pi(this,h),Ur(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},e.get=function(h,g){return h?(h=yo(this,h),h.length>0?String(h[0]):g):g};function vo(h,g,E){go(h,g),E.length>0&&(h.i=null,h.g.set(Pi(h,g),w(E)),h.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(let P=0;P<g.length;P++){var E=g[P];const G=Pt(E);E=yo(this,E);for(let Y=0;Y<E.length;Y++){let ht=G;E[Y]!==""&&(ht+="="+Pt(E[Y])),h.push(ht)}}return this.i=h.join("&")};function xs(h){const g=new hi;return g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),g}function Pi(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function ka(h,g){g&&!h.j&&(Un(h),h.i=null,h.g.forEach(function(E,P){const G=P.toLowerCase();P!=G&&(go(this,P),vo(this,G,E))},h)),h.j=g}function wo(h,g){const E=new Cs;if(a.Image){const P=new Image;P.onload=m(Jn,E,"TestLoadImage: loaded",!0,g,P),P.onerror=m(Jn,E,"TestLoadImage: error",!1,g,P),P.onabort=m(Jn,E,"TestLoadImage: abort",!1,g,P),P.ontimeout=m(Jn,E,"TestLoadImage: timeout",!1,g,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else g(!1)}function vc(h,g){const E=new Cs,P=new AbortController,G=setTimeout(()=>{P.abort(),Jn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:P.signal}).then(Y=>{clearTimeout(G),Y.ok?Jn(E,"TestPingServer: ok",!0,g):Jn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(G),Jn(E,"TestPingServer: error",!1,g)})}function Jn(h,g,E,P,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),P(E)}catch{}}function Zh(){this.g=new Ie}function Nt(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Nt,en),Nt.prototype.g=function(){return new In(this.i,this.h)};function In(h,g){R.call(this),this.H=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(In,R),e=In.prototype,e.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=g,this.readyState=1,ar(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(g.body=h),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},e.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ge(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ge(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}e.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?Br(this):ar(this),this.readyState==3&&ge(this)}},e.Oa=function(h){this.g&&(this.response=this.responseText=h,Br(this))},e.Na=function(h){this.g&&(this.response=h,Br(this))},e.ga=function(){this.g&&Br(this)};function Br(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ar(h)}e.setRequestHeader=function(h,g){this.A.append(h,g)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=g.next();return h.join(`\r
`)};function ar(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(In.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Eo(h){let g="";return we(h,function(E,P){g+=P,g+=":",g+=E,g+=`\r
`}),g}function Ms(h,g,E){t:{for(P in E){var P=!1;break t}P=!0}P||(E=Eo(E),typeof h=="string"?E!=null&&Pt(E):It(h,g,E))}function he(h){R.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(he,R);var La=/^https?$/i,Ns=["POST","PUT"];e=he.prototype,e.Fa=function(h){this.H=h},e.ea=function(h,g,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uc.g(),this.g.onreadystatechange=y(f(this.Ca,this));try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(Y){qe(this,Y);return}if(h=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var G in P)E.set(G,P[G]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Y of P.keys())E.set(Y,P.get(Y));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Ns,g,void 0)>=0)||P||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ht]of E)this.g.setRequestHeader(Y,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){qe(this,Y)}};function qe(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.o=5,Ai(h),Ds(h)}function Ai(h){h.A||(h.A=!0,H(h,"complete"),H(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,H(this,"complete"),H(this,"abort"),Ds(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),he.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ra(this):this.Xa())},e.Xa=function(){Ra(this)};function Ra(h){if(h.h&&typeof o<"u"){if(h.v&&Si(h)==4)setTimeout(h.Ca.bind(h),0);else if(H(h,"readystatechange"),Si(h)==4){h.h=!1;try{const Y=h.ca();t:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var E;if(!(E=g)){var P;if(P=Y===0){let ht=String(h.D).match(Fr)[1]||null;!ht&&a.self&&a.self.location&&(ht=a.self.location.protocol.slice(0,-1)),P=!La.test(ht?ht.toLowerCase():"")}E=P}if(E)H(h,"complete"),H(h,"success");else{h.o=6;try{var G=Si(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Ai(h)}}finally{Ds(h)}}}}function Ds(h,g){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,g||H(h,"ready");try{E.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Si(h){return h.g?h.g.readyState:0}e.ca=function(){try{return Si(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),ke(g)}};function Oa(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(h){const g={};h=(h.g&&Si(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(V(h[P]))continue;var E=hc(h[P]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=g[G]||[];g[G]=Y,Y.push(E)}At(g,function(P){return P.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(h,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||g}function Ma(h){this.za=0,this.i=[],this.j=new Cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vs("baseRetryDelayMs",5e3,h),this.Za=Vs("retryDelaySeedMs",1e4,h),this.Ta=Vs("forwardChannelMaxRetries",2,h),this.va=Vs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pc(h&&h.concurrentRequestLimit),this.Ba=new Zh,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Ma.prototype,e.ka=8,e.I=1,e.connect=function(h,g,E,P){nn(0),this.W=h,this.H=g||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.J=Fa(this,null,this.W),Ci(this)};function Wt(h){if(xn(h),h.I==3){var g=h.V++,E=Tn(h.J);if(It(E,"SID",h.M),It(E,"RID",g),It(E,"TYPE","terminate"),lr(h,E),g=new ui(h,h.j,g),g.M=2,g.A=be(Tn(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=g.A,E=!0),E||(g.g=Ua(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mo(g)}di(h)}function To(h){h.g&&(Va(h),h.g.cancel(),h.g=null)}function xn(h){To(h),h.v&&(a.clearTimeout(h.v),h.v=null),bo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function Ci(h){if(!_c(h.h)&&!h.m){h.m=!0;var g=h.Ea;Q||C(),rt||(Q(),rt=!0),S.add(g,h),h.D=0}}function wc(h,g){return gc(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=g.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ss(f(h.Ea,h,g),Ic(h,h.D)),h.D++,!0)}e.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new ui(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=zt(Y),ye(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)t:{for(var g=0,E=0;E<this.i.length;E++){e:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(g+=P,g>4096){g=E;break t}if(g===4096||E===this.i.length-1){g=E+1;break t}}g=1e3}else g=1e3;g=Tc(this,G,g),E=Tn(this.J),It(E,"RID",h),It(E,"CVER",22),this.G&&It(E,"X-HTTP-Session-Id",this.G),lr(this,E),Y&&(this.R?g="headers="+Pt(Eo(Y))+"&"+g:this.u&&Ms(E,this.u,Y)),ir(this.h,G),this.Ra&&It(E,"TYPE","init"),this.S?(It(E,"$req",g),It(E,"SID","null"),G.U=!0,fo(G,E,null)):fo(G,E,g),this.I=2}}else this.I==3&&(h?Ec(this,h):this.i.length==0||_c(this.h)||Ec(this))};function Ec(h,g){var E;g?E=g.l:E=h.V++;const P=Tn(h.J);It(P,"SID",h.M),It(P,"RID",E),It(P,"AID",h.K),lr(h,P),h.u&&h.o&&Ms(P,h.u,h.o),E=new ui(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),g&&(h.i=g.G.concat(h.i)),g=Tc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ir(h.h,E),fo(E,P,g)}function lr(h,g){h.H&&we(h.H,function(E,P){It(g,P,E)}),h.l&&we({},function(E,P){It(g,P,E)})}function Tc(h,g,E){E=Math.min(h.i.length,E);const P=h.l?f(h.l.Ka,h.l,h):null;t:{var G=h.i;let Dt=-1;for(;;){const se=["count="+E];Dt==-1?E>0?(Dt=G[0].g,se.push("ofs="+Dt)):Dt=0:se.push("ofs="+Dt);let de=!0;for(let $e=0;$e<E;$e++){var Y=G[$e].g;const ti=G[$e].map;if(Y-=Dt,Y<0)Dt=Math.max(0,G[$e].g-100),de=!1;else try{Y="req"+Y+"_"||"";try{var ht=ti instanceof Map?ti:Object.entries(ti);for(const[fi,ei]of ht){let Li=ei;c(ei)&&(Li=Bt(ei)),se.push(Y+fi+"="+encodeURIComponent(Li))}}catch(fi){throw se.push(Y+"type="+encodeURIComponent("_badmap")),fi}}catch{P&&P(ti)}}if(de){ht=se.join("&");break t}}ht=void 0}return h=h.i.splice(0,E),g.G=h,ht}function Na(h){if(!h.g&&!h.v){h.Y=1;var g=h.Da;Q||C(),rt||(Q(),rt=!0),S.add(g,h),h.A=0}}function Da(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ss(f(h.Da,h),Ic(h,h.A)),h.A++,!0)}e.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ss(f(this.Wa,this),h)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nn(10),To(this),Io(this))};function Va(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function Io(h){h.g=new ui(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var g=Tn(h.na);It(g,"RID","rpc"),It(g,"SID",h.M),It(g,"AID",h.K),It(g,"CI",h.F?"0":"1"),!h.F&&h.ia&&It(g,"TO",h.ia),It(g,"TYPE","xmlhttp"),lr(h,g),h.u&&h.o&&Ms(g,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=be(Tn(g)),E.u=null,E.R=!0,nr(E,h)}e.Va=function(){this.C!=null&&(this.C=null,To(this),Da(this),nn(19))};function bo(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Bn(h,g){var E=null;if(h.g==g){bo(h),Va(h),h.g=null;var P=2}else if(Rs(h.h,g))E=g.G,Sa(h.h,g),P=1;else return;if(h.I!=0){if(g.o)if(P==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var G=h.D;P=er(),H(P,new lc(P,E)),Ci(h)}else Na(h);else if(G=g.m,G==3||G==0&&g.X>0||!(P==1&&wc(h,g)||P==2&&Da(h)))switch(E&&E.length>0&&(g=h.h,g.i=g.i.concat(E)),G){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function Ic(h,g){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*g}function ki(h,g){if(h.j.info("Error code "+g),g==2){var E=f(h.bb,h),P=h.Ua;const G=!P;P=new re(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qn(P,"https"),be(P),G?wo(P.toString(),E):vc(P.toString(),E)}else nn(2);h.I=0,h.l&&h.l.pa(g),di(h),xn(h)}e.bb=function(h){h?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function di(h){if(h.I=0,h.ja=[],h.l){const g=Ca(h.h);(g.length!=0||h.i.length!=0)&&(b(h.ja,g),b(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Fa(h,g,E){var P=E instanceof re?Tn(E):new re(E);if(P.g!="")g&&(P.g=g+"."+P.g),Xn(P,P.u);else{var G=a.location;P=G.protocol,g=g?g+"."+G.hostname:G.hostname,G=+G.port;const Y=new re(null);P&&Qn(Y,P),g&&(Y.g=g),G&&Xn(Y,G),E&&(Y.h=E),P=Y}return E=h.G,g=h.wa,E&&g&&It(P,E,g),It(P,"VER",h.ka),lr(h,P),P}function Ua(h,g,E){if(g&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Aa&&!h.ma?new he(new Nt({ab:E})):new he(h.ma),g.Fa(h.L),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}e=Po.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Ao(){}Ao.prototype.g=function(h,g){return new dn(h,g)};function dn(h,g){R.call(this),this.g=new Ma(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(h?h["X-WebChannel-Client-Profile"]=g.sa:h={"X-WebChannel-Client-Profile":g.sa}),this.g.U=h,(h=g&&g.Qb)&&!V(h)&&(this.g.u=h),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!V(g)&&(this.g.G=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new $r(this)}_(dn,R),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Wt(this.g)},dn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Bt(h),h=E);g.i.push(new Gh(g.Ya++,h)),g.I==3&&Ci(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,dn.Z.N.call(this)};function Ba(h){Ii.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){t:{for(const E in g){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}_(Ba,Ii);function bc(){He.call(this),this.status=1}_(bc,He);function $r(h){this.g=h}_($r,Po),$r.prototype.ra=function(){H(this.g,"a")},$r.prototype.qa=function(h){H(this.g,new Ba(h))},$r.prototype.pa=function(h){H(this.g,new bc)},$r.prototype.oa=function(){H(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,PE=function(){return new Ao},bE=function(){return er()},IE=We,rf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,cu=ho,cc.COMPLETE="complete",TE=cc,hn.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",R.prototype.listen=R.prototype.J,el=hn,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,EE=he}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const ug="@firebase/firestore",hg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new sm("@firebase/firestore");function Uo(){return to.logLevel}function Et(e,...t){if(to.logLevel<=Xt.DEBUG){const n=t.map(_m);to.debug(`Firestore (${ya}): ${e}`,...n)}}function Or(e,...t){if(to.logLevel<=Xt.ERROR){const n=t.map(_m);to.error(`Firestore (${ya}): ${e}`,...n)}}function oa(e,...t){if(to.logLevel<=Xt.WARN){const n=t.map(_m);to.warn(`Firestore (${ya}): ${e}`,...n)}}function _m(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,AE(e,i,n)}function AE(e,t,n){let i=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Or(i),new Error(i)}function _e(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||AE(t,r,i)}function $t(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends tr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(_n.UNAUTHENTICATED)))}shutdown(){}}class XR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JR{constructor(t){this.t=t,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_e(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let o=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pr,t.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const u=o;t.enqueueRetryable((async()=>{await u.promise,await r(this.currentUser)}))},c=u=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pr)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new SE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string",2055,{h:t}),new _n(t)}}class t0{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e0{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new t0(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dg{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n0{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_e(this.o===void 0,3512);const i=o=>{o.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Et("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dg(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=i0(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=t.charAt(r[o]%62))}return i}}function Jt(e,t){return e<t?-1:e>t?1:0}function sf(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),o=t.charAt(i);if(r!==o)return Ed(r)===Ed(o)?Jt(r,o):Ed(r)?1:-1}return Jt(e.length,t.length)}const r0=55296,s0=57343;function Ed(e){const t=e.charCodeAt(0);return t>=r0&&t<=s0}function aa(e,t,n){return e.length===t.length&&e.every(((i,r)=>n(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="__name__";class Vi{constructor(t,n,i){n===void 0?n=0:n>t.length&&Mt(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Mt(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Vi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Vi?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const o=Vi.compareSegments(t.get(r),n.get(r));if(o!==0)return o}return Jt(t.length,n.length)}static compareSegments(t,n){const i=Vi.isNumericId(t),r=Vi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Vi.extractNumericId(t).compare(Vi.extractNumericId(n)):sf(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return rs.fromString(t.substring(4,t.length-2))}}class Ee extends Vi{construct(t,n,i){return new Ee(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new mt(nt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Ee(n)}static emptyPath(){return new Ee([])}}const o0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Vi{construct(t,n,i){return new ln(t,n,i)}static isValidIdentifier(t){return o0.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fg}static keyField(){return new ln([fg])}static fromServerFormat(t){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const c=t[r];if(c==="\\"){if(r+1===t.length)throw new mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.path=t}static fromPath(t){return new St(Ee.fromString(t))}static fromName(t){return new St(Ee.fromString(t).popFirst(5))}static empty(){return new St(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new Ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(e,t,n){if(!n)throw new mt(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function a0(e,t,n,i){if(t===!0&&i===!0)throw new mt(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function mg(e){if(!St.isDocumentKey(e))throw new mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function pg(e){if(St.isDocumentKey(e))throw new mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function kE(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Mt(12329,{type:typeof e})}function Ei(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(e);throw new mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function l0(e,t){if(t<=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e,t){const n={typeString:e};return t&&(n.value=t),n}function tc(e,t){if(!kE(e))throw new mt(nt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new mt(nt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=-62135596800,gg=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(t){return Ce.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*gg);return new Ce(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<_g)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gg}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(tc(t,Ce._jsonSchema))return new Ce(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-_g;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:Qe("string",Ce._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new Ce(0,0))}static max(){return new Vt(new Ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function c0(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Vt.fromTimestamp(i===1e9?new Ce(n+1,0):new Ce(n,i));return new hs(r,St.empty(),t)}function u0(e){return new hs(e.readTime,e.key,xl)}class hs{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new hs(Vt.min(),St.empty(),xl)}static max(){return new hs(Vt.max(),St.empty(),xl)}}function h0(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=St.comparator(e.documentKey,t.documentKey),n!==0?n:Jt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==d0)throw e;Et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new at(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof at?n:at.resolve(n)}catch(n){return at.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):at.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):at.reject(n)}static resolve(t){return new at(((n,i)=>{n(t)}))}static reject(t){return new at(((n,i)=>{i(t)}))}static waitFor(t){return new at(((n,i)=>{let r=0,o=0,a=!1;t.forEach((c=>{++r,c.next((()=>{++o,a&&o===r&&n()}),(u=>i(u)))})),a=!0,o===r&&n()}))}static or(t){let n=at.resolve(!1);for(const i of t)n=n.next((r=>r?at.resolve(r):i()));return n}static forEach(t,n){const i=[];return t.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(t,n){return new at(((i,r)=>{const o=t.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const f=u;n(t[f]).next((m=>{a[f]=m,++c,c===o&&i(a)}),(m=>r(m)))}}))}static doWhile(t,n){return new at(((i,r)=>{const o=()=>{t()===!0?n().next((()=>{o()}),r):i()};o()}))}}function m0(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=-1;function wh(e){return e==null}function Du(e){return e===0&&1/e==-1/0}function p0(e){return typeof e=="number"&&Number.isInteger(e)&&!Du(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="";function _0(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=yg(t)),t=g0(e.get(n),t);return yg(t)}function g0(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const o=e.charAt(r);switch(o){case"\0":n+="";break;case LE:n+="";break;default:n+=o}}return n}function yg(e){return e+LE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ts(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function RE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t,n){this.comparator=t,this.root=n||on.EMPTY}insert(t,n){return new Oe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(t){return new Oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,on.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zc(this.root,t,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zc(this.root,t,this.comparator,!0)}}class zc{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class on{constructor(t,n,i,r,o){this.key=t,this.value=n,this.color=i??on.RED,this.left=r??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,o){return new on(t??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return on.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Mt(27949);return t+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt(57766)}get value(){throw Mt(16141)}get color(){throw Mt(16727)}get left(){throw Mt(29726)}get right(){throw Mt(36894)}copy(t,n,i,r,o){return this}insert(t,n,i){return new on(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.comparator=t,this.data=new Oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(t){return new wg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof Je)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Je(this.comparator);return n.data=t,n}}class wg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this.fields=t,t.sort(ln.comparator)}static empty(){return new Hn([])}unionWith(t){let n=new Je(ln.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Hn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return aa(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new OE("Invalid base64 string: "+o):o}})(t);return new un(n)}static fromUint8Array(t){const n=(function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o})(t);return new un(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}un.EMPTY_BYTE_STRING=new un("");const y0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(e){if(_e(!!e,39018),typeof e=="string"){let t=0;const n=y0.exec(e);if(_e(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ze(e.seconds),nanos:ze(e.nanos)}}function ze(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fs(e){return typeof e=="string"?un.fromBase64String(e):un.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="server_timestamp",ME="__type__",NE="__previous_value__",DE="__local_write_time__";function Eh(e){return(e?.mapValue?.fields||{})[ME]?.stringValue===xE}function Th(e){const t=e.mapValue.fields[NE];return Eh(t)?Th(t):t}function Ml(e){const t=ds(e.mapValue.fields[DE].timestampValue);return new Ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n,i,r,o,a,c,u,f,m){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Vu="(default)";class Nl{constructor(t,n){this.projectId=t,this.database=n||Vu}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database===Vu}isEqual(t){return t instanceof Nl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="__type__",w0="__max__",jc={mapValue:{}},FE="__vector__",Fu="value";function ms(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Eh(e)?4:T0(e)?9007199254740991:E0(e)?10:11:Mt(28295,{value:e})}function Ji(e,t){if(e===t)return!0;const n=ms(e);if(n!==ms(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ml(e).isEqual(Ml(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ds(r.timestampValue),c=ds(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(r,o){return fs(r.bytesValue).isEqual(fs(o.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(r,o){return ze(r.geoPointValue.latitude)===ze(o.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(o.geoPointValue.longitude)})(e,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return ze(r.integerValue)===ze(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ze(r.doubleValue),c=ze(o.doubleValue);return a===c?Du(a)===Du(c):isNaN(a)&&isNaN(c)}return!1})(e,t);case 9:return aa(e.arrayValue.values||[],t.arrayValue.values||[],Ji);case 10:case 11:return(function(r,o){const a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(vg(a)!==vg(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Ji(a[u],c[u])))return!1;return!0})(e,t);default:return Mt(52216,{left:e})}}function Dl(e,t){return(e.values||[]).find((n=>Ji(n,t)))!==void 0}function la(e,t){if(e===t)return 0;const n=ms(e),i=ms(t);if(n!==i)return Jt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jt(e.booleanValue,t.booleanValue);case 2:return(function(o,a){const c=ze(o.integerValue||o.doubleValue),u=ze(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(e,t);case 3:return Eg(e.timestampValue,t.timestampValue);case 4:return Eg(Ml(e),Ml(t));case 5:return sf(e.stringValue,t.stringValue);case 6:return(function(o,a){const c=fs(o),u=fs(a);return c.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(o,a){const c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){const m=Jt(c[f],u[f]);if(m!==0)return m}return Jt(c.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(o,a){const c=Jt(ze(o.latitude),ze(a.latitude));return c!==0?c:Jt(ze(o.longitude),ze(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Tg(e.arrayValue,t.arrayValue);case 10:return(function(o,a){const c=o.fields||{},u=a.fields||{},f=c[Fu]?.arrayValue,m=u[Fu]?.arrayValue,_=Jt(f?.values?.length||0,m?.values?.length||0);return _!==0?_:Tg(f,m)})(e.mapValue,t.mapValue);case 11:return(function(o,a){if(o===jc.mapValue&&a===jc.mapValue)return 0;if(o===jc.mapValue)return 1;if(a===jc.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let _=0;_<u.length&&_<m.length;++_){const y=sf(u[_],m[_]);if(y!==0)return y;const w=la(c[u[_]],f[m[_]]);if(w!==0)return w}return Jt(u.length,m.length)})(e.mapValue,t.mapValue);default:throw Mt(23264,{he:n})}}function Eg(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Jt(e,t);const n=ds(e),i=ds(t),r=Jt(n.seconds,i.seconds);return r!==0?r:Jt(n.nanos,i.nanos)}function Tg(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=la(n[r],i[r]);if(o)return o}return Jt(n.length,i.length)}function ca(e){return of(e)}function of(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=ds(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return fs(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return St.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=of(o);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${of(n.fields[a])}`;return r+"}"})(e.mapValue):Mt(61005,{value:e})}function uu(e){switch(ms(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Th(e);return t?16+uu(t):16;case 5:return 2*e.stringValue.length;case 6:return fs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+uu(o)),0)})(e.arrayValue);case 10:case 11:return(function(i){let r=0;return Ts(i.fields,((o,a)=>{r+=o.length+uu(a)})),r})(e.mapValue);default:throw Mt(13486,{value:e})}}function Uu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function af(e){return!!e&&"integerValue"in e}function vm(e){return!!e&&"arrayValue"in e}function Ig(e){return!!e&&"nullValue"in e}function bg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function hu(e){return!!e&&"mapValue"in e}function E0(e){return(e?.mapValue?.fields||{})[VE]?.stringValue===FE}function yl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ts(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=yl(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yl(e.arrayValue.values[n]);return t}return{...e}}function T0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===w0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.value=t}static empty(){return new Vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!hu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=yl(n)}setAll(t){let n=ln.emptyPath(),i={},r=[];t.forEach(((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=yl(a):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(t){const n=this.field(t.popLast());hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ji(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];hu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Ts(n,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Vn(yl(this.value))}}function UE(e){const t=[];return Ts(e.fields,((n,i)=>{const r=new ln([n]);if(hu(i)){const o=UE(i.mapValue).fields;if(o.length===0)t.push(r);else for(const a of o)t.push(r.child(a))}else t.push(r)})),new Hn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,i,r,o,a,c){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new yn(t,0,Vt.min(),Vt.min(),Vt.min(),Vn.empty(),0)}static newFoundDocument(t,n,i,r){return new yn(t,1,n,Vt.min(),i,r,0)}static newNoDocument(t,n){return new yn(t,2,n,Vt.min(),Vt.min(),Vn.empty(),0)}static newUnknownDocument(t,n){return new yn(t,3,n,Vt.min(),Vt.min(),Vn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n){this.position=t,this.inclusive=n}}function Pg(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const o=t[r],a=e.position[r];if(o.field.isKeyField()?i=St.comparator(St.fromName(a.referenceValue),n.key):i=la(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ag(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ji(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n="asc"){this.field=t,this.dir=n}}function I0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{}class Ke extends BE{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new P0(t,n,i):n==="array-contains"?new C0(t,i):n==="in"?new k0(t,i):n==="not-in"?new L0(t,i):n==="array-contains-any"?new R0(t,i):new Ke(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new A0(t,i):new S0(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(la(n,this.value)):n!==null&&ms(this.value)===ms(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends BE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Ti(t,n)}matches(t){return $E(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $E(e){return e.op==="and"}function zE(e){return b0(e)&&$E(e)}function b0(e){for(const t of e.filters)if(t instanceof Ti)return!1;return!0}function lf(e){if(e instanceof Ke)return e.field.canonicalString()+e.op.toString()+ca(e.value);if(zE(e))return e.filters.map((t=>lf(t))).join(",");{const t=e.filters.map((n=>lf(n))).join(",");return`${e.op}(${t})`}}function jE(e,t){return e instanceof Ke?(function(i,r){return r instanceof Ke&&i.op===r.op&&i.field.isEqual(r.field)&&Ji(i.value,r.value)})(e,t):e instanceof Ti?(function(i,r){return r instanceof Ti&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,a,c)=>o&&jE(a,r.filters[c])),!0):!1})(e,t):void Mt(19439)}function HE(e){return e instanceof Ke?(function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`})(e):e instanceof Ti?(function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"})(e):"Filter"}class P0 extends Ke{constructor(t,n,i){super(t,n,i),this.key=St.fromName(i.referenceValue)}matches(t){const n=St.comparator(t.key,this.key);return this.matchesComparison(n)}}class A0 extends Ke{constructor(t,n){super(t,"in",n),this.keys=WE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class S0 extends Ke{constructor(t,n){super(t,"not-in",n),this.keys=WE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function WE(e,t){return(t.arrayValue?.values||[]).map((n=>St.fromName(n.referenceValue)))}class C0 extends Ke{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vm(n)&&Dl(n.arrayValue,this.value)}}class k0 extends Ke{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class L0 extends Ke{constructor(t,n){super(t,"not-in",n)}matches(t){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dl(this.value.arrayValue,n)}}class R0 extends Ke{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Dl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n=null,i=[],r=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.Te=null}}function Sg(e,t=null,n=[],i=[],r=null,o=null,a=null){return new O0(e,t,n,i,r,o,a)}function wm(e){const t=$t(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>lf(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),wh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>ca(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>ca(i))).join(",")),t.Te=n}return t.Te}function Em(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!I0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ag(e.startAt,t.startAt)&&Ag(e.endAt,t.endAt)}function cf(e){return St.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function x0(e,t,n,i,r,o,a,c){return new ao(e,t,n,i,r,o,a,c)}function Tm(e){return new ao(e)}function Cg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Im(e){return e.collectionGroup!==null}function Jo(e){const t=$t(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),n.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Je(ln.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(t).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Vl(o,i))})),n.has(ln.keyField().canonicalString())||t.Ie.push(new Vl(ln.keyField(),i))}return t.Ie}function qi(e){const t=$t(e);return t.Ee||(t.Ee=M0(t,Jo(e))),t.Ee}function M0(e,t){if(e.limitType==="F")return Sg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Vl(r.field,o)}));const n=e.endAt?new ua(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ua(e.startAt.position,e.startAt.inclusive):null;return Sg(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function uf(e,t){const n=e.filters.concat([t]);return new ao(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bu(e,t,n){return new ao(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ih(e,t){return Em(qi(e),qi(t))&&e.limitType===t.limitType}function qE(e){return`${wm(qi(e))}|lt:${e.limitType}`}function Bo(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>HE(r))).join(", ")}]`),wh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>ca(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>ca(r))).join(",")),`Target(${i})`})(qi(e))}; limitType=${e.limitType})`}function bh(e,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):St.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(e,t)&&(function(i,r){for(const o of Jo(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(e,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(e,t)&&(function(i,r){return!(i.startAt&&!(function(a,c,u){const f=Pg(a,c,u);return a.inclusive?f<=0:f<0})(i.startAt,Jo(i),r)||i.endAt&&!(function(a,c,u){const f=Pg(a,c,u);return a.inclusive?f>=0:f>0})(i.endAt,Jo(i),r))})(e,t)}function N0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function GE(e){return(t,n)=>{let i=!1;for(const r of Jo(e)){const o=D0(r,t,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function D0(e,t,n){const i=e.field.isKeyField()?St.comparator(t.key,n.key):(function(o,a,c){const u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?la(u,f):Mt(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Mt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,((n,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Oe(St.comparator);function xr(){return V0}const ZE=new Oe(St.comparator);function nl(...e){let t=ZE;for(const n of e)t=t.insert(n.key,n);return t}function KE(e){let t=ZE;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function zs(){return vl()}function YE(){return vl()}function vl(){return new lo((e=>e.toString()),((e,t)=>e.isEqual(t)))}const F0=new Oe(St.comparator),U0=new Je(St.comparator);function te(...e){let t=U0;for(const n of e)t=t.add(n);return t}const B0=new Je(Jt);function $0(){return B0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(t)?"-0":t}}function QE(e){return{integerValue:""+e}}function z0(e,t){return p0(t)?QE(t):bm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function j0(e,t,n){return e instanceof $u?(function(r,o){const a={fields:{[ME]:{stringValue:xE},[DE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Eh(o)&&(o=Th(o)),o&&(a.fields[NE]=o),{mapValue:a}})(n,t):e instanceof Fl?JE(e,t):e instanceof Ul?tT(e,t):(function(r,o){const a=XE(r,o),c=kg(a)+kg(r.Ae);return af(a)&&af(r.Ae)?QE(c):bm(r.serializer,c)})(e,t)}function H0(e,t,n){return e instanceof Fl?JE(e,t):e instanceof Ul?tT(e,t):n}function XE(e,t){return e instanceof zu?(function(i){return af(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class $u extends Ph{}class Fl extends Ph{constructor(t){super(),this.elements=t}}function JE(e,t){const n=eT(t);for(const i of e.elements)n.some((r=>Ji(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Ul extends Ph{constructor(t){super(),this.elements=t}}function tT(e,t){let n=eT(t);for(const i of e.elements)n=n.filter((r=>!Ji(r,i)));return{arrayValue:{values:n}}}class zu extends Ph{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function kg(e){return ze(e.integerValue||e.doubleValue)}function eT(e){return vm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function W0(e,t){return e.field.isEqual(t.field)&&(function(i,r){return i instanceof Fl&&r instanceof Fl||i instanceof Ul&&r instanceof Ul?aa(i.elements,r.elements,Ji):i instanceof zu&&r instanceof zu?Ji(i.Ae,r.Ae):i instanceof $u&&r instanceof $u})(e.transform,t.transform)}class q0{constructor(t,n){this.version=t,this.transformResults=n}}class li{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new li}static exists(t){return new li(void 0,t)}static updateTime(t){return new li(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function du(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ah{}function nT(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Pm(e.key,li.none()):new ec(e.key,e.data,li.none());{const n=e.data,i=Vn.empty();let r=new Je(ln.comparator);for(let o of t.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Is(e.key,i,new Hn(r.toArray()),li.none())}}function G0(e,t,n){e instanceof ec?(function(r,o,a){const c=r.value.clone(),u=Rg(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):e instanceof Is?(function(r,o,a){if(!du(r.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Rg(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(iT(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function wl(e,t,n,i){return e instanceof ec?(function(o,a,c,u){if(!du(o.precondition,a))return c;const f=o.value.clone(),m=Og(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,i):e instanceof Is?(function(o,a,c,u){if(!du(o.precondition,a))return c;const f=Og(o.fieldTransforms,u,a),m=a.data;return m.setAll(iT(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(e,t,n,i):(function(o,a,c){return du(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(e,t,n)}function Z0(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),o=XE(i.transform,r||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(i.field,o))}return n||null}function Lg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&aa(i,r,((o,a)=>W0(o,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ec extends Ah{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Is extends Ah{constructor(t,n,i,r,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iT(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Rg(e,t,n){const i=new Map;_e(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const o=e[r],a=o.transform,c=t.data.field(o.field);i.set(o.field,H0(a,c,n[r]))}return i}function Og(e,t,n){const i=new Map;for(const r of e){const o=r.transform,a=n.data.field(r.field);i.set(r.field,j0(o,a,t))}return i}class Pm extends Ah{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K0 extends Ah{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&G0(o,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=wl(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=wl(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=YE();return this.mutations.forEach((r=>{const o=t.get(r.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;const u=nT(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Vt.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),te())}isEqual(t){return this.batchId===t.batchId&&aa(this.mutations,t.mutations,((n,i)=>Lg(n,i)))&&aa(this.baseMutations,t.baseMutations,((n,i)=>Lg(n,i)))}}class Am{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){_e(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return F0})();const o=t.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Am(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ie;function J0(e){switch(e){case nt.OK:return Mt(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Mt(15467,{code:e})}}function rT(e){if(e===void 0)return Or("GRPC error has no .code"),nt.UNKNOWN;switch(e){case Ze.OK:return nt.OK;case Ze.CANCELLED:return nt.CANCELLED;case Ze.UNKNOWN:return nt.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return nt.INTERNAL;case Ze.UNAVAILABLE:return nt.UNAVAILABLE;case Ze.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Ze.NOT_FOUND:return nt.NOT_FOUND;case Ze.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Ze.ABORTED:return nt.ABORTED;case Ze.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Ze.DATA_LOSS:return nt.DATA_LOSS;default:return Mt(39323,{code:e})}}(ie=Ze||(Ze={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new rs([4294967295,4294967295],0);function xg(e){const t=t1().encode(e),n=new wE;return n.update(t),new Uint8Array(n.digest())}function Mg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new rs([n,i],0),new rs([r,o],0)]}class Sm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new il(`Invalid padding: ${n}`);if(i<0)throw new il(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new il(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=rs.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(rs.fromNumber(i)));return r.compare(e1)===1&&(r=new rs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=xg(t),[i,r]=Mg(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new Sm(o,r,n);return i.forEach((c=>a.insert(c))),a}insert(t){if(this.ge===0)return;const n=xg(t),[i,r]=Mg(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,n,i,r,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,nc.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Sh(Vt.min(),r,new Oe(Jt),xr(),te())}}class nc{constructor(t,n,i,r,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new nc(i,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class sT{constructor(t,n){this.targetId=t,this.Ce=n}}class oT{constructor(t,n,i=un.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Ng{constructor(){this.ve=0,this.Fe=Dg(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=te(),n=te(),i=te();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Mt(38017,{changeType:o})}})),new nc(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=Dg()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class n1{constructor(t){this.Ge=t,this.ze=new Map,this.je=xr(),this.Je=Hc(),this.He=Hc(),this.Ye=new Oe(Jt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Mt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const o=r.target;if(cf(o))if(i===0){const a=new St(o.path);this.et(n,a,yn.newNoDocument(a,Vt.min()))}else _e(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const c=this.ut(t),u=c?this.ct(c,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,c;try{a=fs(i).toUint8Array()}catch(u){if(u instanceof OE)return oa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sm(a,r,o)}catch(u){return oa(u instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.et(n,o,null),r++)})),r}Tt(t){const n=new Map;this.ze.forEach(((o,a)=>{const c=this.ot(a);if(c){if(o.current&&cf(c.target)){const u=new St(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,yn.newNoDocument(u,t))}o.Be&&(n.set(a,o.ke()),o.qe())}}));let i=te();this.He.forEach(((o,a)=>{let c=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.je.forEach(((o,a)=>a.setReadTime(t)));const r=new Sh(t,n,this.Ye,this.je,i);return this.je=xr(),this.Je=Hc(),this.He=Hc(),this.Ye=new Oe(Jt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Ng,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Je(Jt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Je(Jt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Et("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Ng),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Hc(){return new Oe(St.comparator)}function Dg(){return new Oe(St.comparator)}const i1={asc:"ASCENDING",desc:"DESCENDING"},r1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s1={and:"AND",or:"OR"};class o1{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hf(e,t){return e.useProto3Json||wh(t)?t:{value:t}}function ju(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aT(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function a1(e,t){return ju(e,t.toTimestamp())}function Gi(e){return _e(!!e,49232),Vt.fromTimestamp((function(n){const i=ds(n);return new Ce(i.seconds,i.nanos)})(e))}function Cm(e,t){return df(e,t).canonicalString()}function df(e,t){const n=(function(r){return new Ee(["projects",r.projectId,"databases",r.database])})(e).child("documents");return t===void 0?n:n.child(t)}function lT(e){const t=Ee.fromString(e);return _e(fT(t),10190,{key:t.toString()}),t}function ff(e,t){return Cm(e.databaseId,t.path)}function Td(e,t){const n=lT(t);if(n.get(1)!==e.databaseId.projectId)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new St(uT(n))}function cT(e,t){return Cm(e.databaseId,t)}function l1(e){const t=lT(e);return t.length===4?Ee.emptyPath():uT(t)}function mf(e){return new Ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function uT(e){return _e(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Vg(e,t,n){return{name:ff(e,t),fields:n.value.mapValue.fields}}function c1(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Mt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(_e(m===void 0||typeof m=="string",58123),un.fromBase64String(m||"")):(_e(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),un.fromUint8Array(m||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&(function(f){const m=f.code===void 0?nt.UNKNOWN:rT(f.code);return new mt(m,f.message||"")})(a);n=new oT(i,r,o,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Td(e,i.document.name),o=Gi(i.document.updateTime),a=i.document.createTime?Gi(i.document.createTime):Vt.min(),c=new Vn({mapValue:{fields:i.document.fields}}),u=yn.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new fu(f,m,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Td(e,i.document),o=i.readTime?Gi(i.readTime):Vt.min(),a=yn.newNoDocument(r,o),c=i.removedTargetIds||[];n=new fu([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Td(e,i.document),o=i.removedTargetIds||[];n=new fu([],o,r,null)}else{if(!("filter"in t))return Mt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new X0(r,o),c=i.targetId;n=new sT(c,a)}}return n}function u1(e,t){let n;if(t instanceof ec)n={update:Vg(e,t.key,t.value)};else if(t instanceof Pm)n={delete:ff(e,t.key)};else if(t instanceof Is)n={update:Vg(e,t.key,t.data),updateMask:v1(t.fieldMask)};else{if(!(t instanceof K0))return Mt(16599,{Vt:t.type});n={verify:ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(o,a){const c=a.transform;if(c instanceof $u)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ul)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zu)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Mt(20930,{transform:a.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:a1(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Mt(27497)})(e,t.precondition)),n}function h1(e,t){return e&&e.length>0?(_e(t!==void 0,14353),e.map((n=>(function(r,o){let a=r.updateTime?Gi(r.updateTime):Gi(o);return a.isEqual(Vt.min())&&(a=Gi(o)),new q0(a,r.transformResults||[])})(n,t)))):[]}function d1(e,t){return{documents:[cT(e,t.path)]}}function f1(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cT(e,r);const o=(function(f){if(f.length!==0)return dT(Ti.create(f,"and"))})(t.filters);o&&(n.structuredQuery.where=o);const a=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:$o(y.field),direction:_1(y.dir)}})(m)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const c=hf(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:n,parent:r}}function m1(e){let t=l1(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_e(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let o=[];n.where&&(o=(function(_){const y=hT(_);return y instanceof Ti&&zE(y)?y.getFilters():[y]})(n.where));let a=[];n.orderBy&&(a=(function(_){return _.map((y=>(function(b){return new Vl(zo(b.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(y)))})(n.orderBy));let c=null;n.limit&&(c=(function(_){let y;return y=typeof _=="object"?_.value:_,wh(y)?null:y})(n.limit));let u=null;n.startAt&&(u=(function(_){const y=!!_.before,w=_.values||[];return new ua(w,y)})(n.startAt));let f=null;return n.endAt&&(f=(function(_){const y=!_.before,w=_.values||[];return new ua(w,y)})(n.endAt)),x0(t,r,a,o,c,"F",u,f)}function p1(e,t){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt(28987,{purpose:r})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function hT(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=zo(n.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=zo(n.unaryFilter.field);return Ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=zo(n.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zo(n.unaryFilter.field);return Ke.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Mt(61313);default:return Mt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Ke.create(zo(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Mt(58110);default:return Mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Ti.create(n.compositeFilter.filters.map((i=>hT(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Mt(1026)}})(n.compositeFilter.op))})(e):Mt(30097,{filter:e})}function _1(e){return i1[e]}function g1(e){return r1[e]}function y1(e){return s1[e]}function $o(e){return{fieldPath:e.canonicalString()}}function zo(e){return ln.fromServerFormat(e.fieldPath)}function dT(e){return e instanceof Ke?(function(n){if(n.op==="=="){if(bg(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NAN"}};if(Ig(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bg(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NAN"}};if(Ig(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(n.field),op:g1(n.op),value:n.value}}})(e):e instanceof Ti?(function(n){const i=n.getFilters().map((r=>dT(r)));return i.length===1?i[0]:{compositeFilter:{op:y1(n.op),filters:i}}})(e):Mt(54877,{filter:e})}function v1(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function fT(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,n,i,r,o=Vt.min(),a=Vt.min(),c=un.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new ts(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t){this.yt=t}}function E1(e){const t=m1({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Bu(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.Cn=new I1}addToCollectionParentIndex(t,n){return this.Cn.add(n),at.resolve()}getCollectionParents(t,n){return at.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return at.resolve()}deleteFieldIndex(t,n){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,n){return at.resolve()}getDocumentsMatchingTarget(t,n){return at.resolve(null)}getIndexType(t,n){return at.resolve(0)}getFieldIndexes(t,n){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,n){return at.resolve(hs.min())}getMinOffsetFromCollectionGroup(t,n){return at.resolve(hs.min())}updateCollectionGroup(t,n,i){return at.resolve()}updateIndexEntries(t,n){return at.resolve()}}class I1{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Je(Ee.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Je(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mT=41943040;class Nn{static withCacheSize(t){return new Nn(t,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(mT,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ha(0)}static cr(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="LruGarbageCollector",b1=1048576;function Bg([e,t],[n,i]){const r=Jt(e,n);return r===0?Jt(t,i):r}class P1{constructor(t){this.Ir=t,this.buffer=new Je(Bg),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Bg(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A1{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Et(Ug,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wa(n)?Et(Ug,"Ignoring IndexedDB error during garbage collection: ",n):await va(n)}await this.Vr(3e5)}))}}class S1{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return at.resolve(vh.ce);const i=new P1(n);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(Fg)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fg):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,o,a,c,u,f;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,a=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,c=Date.now(),this.removeTargets(t,i,n)))).next((_=>(o=_,u=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(f=Date.now(),Uo()<=Xt.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${_} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function C1(e,t){return new S1(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.changes=new lo((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?at.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,n)))).next((r=>(i!==null&&wl(i.mutation,r,Hn.empty(),Ce.now()),r)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,te()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=te()){const r=zs();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,i).next((o=>{let a=nl();return o.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const i=zs();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,te())))}populateOverlays(t,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((a,c)=>{n.set(a,c)}))}))}computeViews(t,n,i,r){let o=xr();const a=vl(),c=(function(){return vl()})();return n.forEach(((u,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Is)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),wl(m.mutation,f,m.mutation.getFieldMask(),Ce.now())):a.set(f.key,Hn.empty())})),this.recalculateAndSaveOverlays(t,o).next((u=>(u.forEach(((f,m)=>a.set(f,m))),n.forEach(((f,m)=>c.set(f,new L1(m,a.get(f)??null)))),c)))}recalculateAndSaveOverlays(t,n){const i=vl();let r=new Oe(((a,c)=>a-c)),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const c of a)c.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let m=i.get(u)||Hn.empty();m=c.applyToLocalView(f,m),i.set(u,m);const _=(r.get(c.batchId)||te()).add(u);r=r.insert(c.batchId,_)}))})).next((()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),f=u.key,m=u.value,_=YE();m.forEach((y=>{if(!o.has(y)){const w=nT(n.get(y),i.get(y));w!==null&&_.set(y,w),o=o.add(y)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,_))}return at.waitFor(a)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,r){return(function(a){return St.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Im(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next((o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-o.size):at.resolve(zs());let c=xl,u=o;return a.next((f=>at.forEach(f,((m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?at.resolve():this.remoteDocumentCache.getEntry(t,m).next((y=>{u=u.insert(m,y)}))))).next((()=>this.populateOverlays(t,f,o))).next((()=>this.computeViews(t,u,f,te()))).next((m=>({batchId:c,changes:KE(m)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new St(n)).next((i=>{let r=nl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const o=n.collectionGroup;let a=nl();return this.indexManager.getCollectionParents(t,o).next((c=>at.forEach(c,(u=>{const f=(function(_,y){return new ao(y,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next((m=>{m.forEach(((_,y)=>{a=a.insert(_,y)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,r)))).next((a=>{o.forEach(((u,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,yn.newInvalidDocument(m)))}));let c=nl();return a.forEach(((u,f)=>{const m=o.get(u);m!==void 0&&wl(m.mutation,f,Hn.empty(),Ce.now()),bh(n,f)&&(c=c.insert(u,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return at.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Gi(r.createTime)}})(n)),at.resolve()}getNamedQuery(t,n){return at.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:E1(r.bundledQuery),readTime:Gi(r.readTime)}})(n)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.overlays=new Oe(St.comparator),this.qr=new Map}getOverlay(t,n){return at.resolve(this.overlays.get(n))}getOverlays(t,n){const i=zs();return at.forEach(n,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((r,o)=>{this.St(t,n,o)})),at.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),at.resolve()}getOverlaysForCollection(t,n,i){const r=zs(),o=n.length+1,a=new St(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return at.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let o=new Oe(((f,m)=>f-m));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=zs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=zs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=r)););return at.resolve(c)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Q0(n,i));let o=this.qr.get(n);o===void 0&&(o=te(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.Qr=new Je(sn.$r),this.Ur=new Je(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new sn(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new sn(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new St(new Ee([])),i=new sn(n,t),r=new sn(n,t+1),o=[];return this.Ur.forEachInRange([i,r],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new St(new Ee([])),i=new sn(n,t),r=new sn(n,t+1);let o=te();return this.Ur.forEachInRange([i,r],(a=>{o=o.add(a.key)})),o}containsKey(t){const n=new sn(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class sn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return St.comparator(t.key,n.key)||Jt(t.Yr,n.Yr)}static Kr(t,n){return Jt(t.Yr,n.Yr)||St.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Je(sn.$r)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Y0(o,n,i,r);this.mutationQueue.push(a);for(const c of r)this.Zr=this.Zr.add(new sn(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return at.resolve(a)}lookupMutationBatch(t,n){return at.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return at.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?ym:this.tr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new sn(n,0),r=new sn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(a=>{const c=this.Xr(a.Yr);o.push(c)})),at.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Je(Jt);return n.forEach((r=>{const o=new sn(r,0),a=new sn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(c=>{i=i.add(c.Yr)}))})),at.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let o=i;St.isDocumentKey(o)||(o=o.child(""));const a=new sn(new St(o),0);let c=new Je(Jt);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.Yr)),!0)}),a),at.resolve(this.ti(c))}ti(t){const n=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(t,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return at.forEach(n.mutations,(r=>{const o=new sn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new sn(n,0),r=this.Zr.firstAfterOrEqual(i);return at.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t){this.ri=t,this.docs=(function(){return new Oe(St.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return at.resolve(i?i.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(t,n){let i=xr();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():yn.newInvalidDocument(r))})),at.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let o=xr();const a=n.path,c=new St(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||h0(u0(m),i)<=0||(r.has(m.key)||bh(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return at.resolve(o)}getAllFromCollectionGroup(t,n,i,r){Mt(9500)}ii(t,n){return at.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new V1(this)}getSize(t){return at.resolve(this.size)}}class V1 extends k1{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),at.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t){this.persistence=t,this.si=new lo((n=>wm(n)),Em),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.oi=0,this._i=new km,this.targetCount=0,this.ai=ha.ur()}forEachTarget(t,n){return this.si.forEach(((i,r)=>n(r))),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),at.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ha(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,at.resolve()}updateTargetData(t,n){return this.Pr(n),at.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,n,i){let r=0;const o=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)})),at.waitFor(o).next((()=>r))}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return at.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),at.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((a=>{o.push(r.markPotentiallyOrphaned(t,a))})),at.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),at.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return at.resolve(i)}containsKey(t,n){return at.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new M1,this.referenceDelegate=t(this),this.Pi=new F1(this),this.indexManager=new T1,this.remoteDocumentCache=(function(r){return new D1(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new w1(n),this.Ii=new O1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new x1,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new N1(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){Et("MemoryPersistence","Starting transaction:",t);const r=new U1(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,n){return at.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class U1 extends f0{constructor(t){super(),this.currentSequenceNumber=t}}class Lm{constructor(t){this.persistence=t,this.Ri=new km,this.Vi=null}static mi(t){return new Lm(t)}get fi(){if(this.Vi)return this.Vi;throw Mt(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),at.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),at.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),at.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.fi,(i=>{const r=St.fromPath(i);return this.gi(t,r).next((o=>{o||n.removeEntry(r,Vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return at.or([()=>at.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Hu{constructor(t,n){this.persistence=t,this.pi=new lo((i=>_0(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=C1(this,n)}static mi(t,n){return new Hu(t,n)}Ei(){}di(t){return at.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((r=>i+r))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return at.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?at.resolve():n(r)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(a=>this.br(t,a,n).next((c=>{c||(i++,o.removeEntry(a,Vt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),at.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),at.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),at.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=uu(t.data.value)),n}br(t,n,i){return at.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return at.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=te(),r=te();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Rm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yC()?8:m0(En())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const o={result:null};return this.ys(t,n).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(t,n,r,i).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;const a=new B1;return this.Ss(t,n,a).next((c=>{if(o.result=c,this.Vs)return this.bs(t,n,a,c.size)}))})).next((()=>o.result))}bs(t,n,i,r){return i.documentReadCount<this.fs?(Uo()<=Xt.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),at.resolve()):(Uo()<=Xt.DEBUG&&Et("QueryEngine","Query:",Bo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Uo()<=Xt.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qi(n))):at.resolve())}ys(t,n){if(Cg(n))return at.resolve(null);let i=qi(n);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Bu(n,null,"F"),i=qi(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const a=te(...o);return this.ps.getDocuments(t,a).next((c=>this.indexManager.getMinOffset(t,i).next((u=>{const f=this.Ds(n,c);return this.Cs(n,f,a,u.readTime)?this.ys(t,Bu(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ws(t,n,i,r){return Cg(n)||r.isEqual(Vt.min())?at.resolve(null):this.ps.getDocuments(t,i).next((o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?at.resolve(null):(Uo()<=Xt.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bo(n)),this.vs(t,a,n,c0(r,xl)).next((c=>c)))}))}Ds(t,n){let i=new Je(GE(t));return n.forEach(((r,o)=>{bh(t,o)&&(i=i.add(o))})),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,n,i){return Uo()<=Xt.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.ps.getDocumentsMatchingQuery(t,n,hs.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(n.forEach((a=>{o=o.insert(a.key,a)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="LocalStore",z1=3e8;class j1{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Oe(Jt),this.xs=new lo((o=>wm(o)),Em),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new R1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function H1(e,t,n,i){return new j1(e,t,n,i)}async function _T(e,t){const n=$t(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const a=[],c=[];let u=te();for(const f of r){a.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:c})))}))}))}function W1(e,t){const n=$t(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,f,m){const _=f.batch,y=_.keys();let w=at.resolve();return y.forEach((b=>{w=w.next((()=>m.getEntry(u,b))).next((I=>{const M=f.docVersions.get(b);_e(M!==null,48541),I.version.compareTo(M)<0&&(_.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),m.addEntry(I)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,_)))})(n,i,t,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let u=te();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function gT(e){const t=$t(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function q1(e,t){const n=$t(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];t.targetChanges.forEach(((m,_)=>{const y=r.get(_);if(!y)return;c.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(o,m.addedDocuments,_))));let w=y.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,i)),r=r.insert(_,w),(function(I,M,A){return I.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=z1?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,w,m)&&c.push(n.Pi.updateTargetData(o,w))}));let u=xr(),f=te();if(t.documentUpdates.forEach((m=>{t.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(G1(o,a,t.documentUpdates).next((m=>{u=m.ks,f=m.qs}))),!i.isEqual(Vt.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next((_=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(m)}return at.waitFor(c).next((()=>a.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,u,f))).next((()=>u))})).then((o=>(n.Ms=r,o)))}function G1(e,t,n){let i=te(),r=te();return n.forEach((o=>i=i.add(o))),t.getEntries(e,i).next((o=>{let a=xr();return n.forEach(((c,u)=>{const f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(Vt.min())?(t.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(c,u)):Et(Om,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:r}}))}function Z1(e,t){const n=$t(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=ym),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function K1(e,t){const n=$t(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,t).next((o=>o?(r=o,at.resolve(r)):n.Pi.allocateTargetId(i).next((a=>(r=new ts(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function pf(e,t,n){const i=$t(e),r=i.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!wa(a))throw a;Et(Om,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function $g(e,t,n){const i=$t(e);let r=Vt.min(),o=te();return i.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,m){const _=$t(u),y=_.xs.get(m);return y!==void 0?at.resolve(_.Ms.get(y)):_.Pi.getTargetData(f,m)})(i,a,qi(t)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{o=u}))})).next((()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Vt.min(),n?o:te()))).next((c=>(Y1(i,N0(t),c),{documents:c,Qs:o})))))}function Y1(e,t,n){let i=e.Os.get(t)||Vt.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),e.Os.set(t,i)}class zg{constructor(){this.activeTargetIds=$0()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Q1{constructor(){this.Mo=new zg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new zg,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="ConnectivityMonitor";class Hg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Et(jg,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Et(jg,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc=null;function _f(){return Wc===null?Wc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wc++,"0x"+Wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="RestConnection",J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tO{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Vu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,o){const a=_f(),c=this.zo(t,n.toUriEncodedString());Et(Id,`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,o);const{host:f}=new URL(c),m=vs(f);return this.Jo(t,c,u,i,m).then((_=>(Et(Id,`Received RPC '${t}' ${a}: `,_),_)),(_=>{throw oa(Id,`RPC '${t}' ${a} failed with error: `,_,"url: ",c,"request:",i),_}))}Ho(t,n,i,r,o,a){return this.Go(t,n,i,r,o)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ya})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,n){const i=J1[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class nO extends tO{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,o){const a=_f();return new Promise(((c,u)=>{const f=new EE;f.setWithCredentials(!0),f.listenOnce(TE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case cu.NO_ERROR:const _=f.getResponseJson();Et(fn,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(_)),c(_);break;case cu.TIMEOUT:Et(fn,`RPC '${t}' ${a} timed out`),u(new mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const y=f.getStatus();if(Et(fn,`RPC '${t}' ${a} failed with status:`,y,"response text:",f.getResponseText()),y>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w?.error;if(b&&b.status&&b.message){const I=(function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(D)>=0?D:nt.UNKNOWN})(b.status);u(new mt(I,b.message))}else u(new mt(nt.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new mt(nt.UNAVAILABLE,"Connection failed."));break;default:Mt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Et(fn,`RPC '${t}' ${a} completed.`)}}));const m=JSON.stringify(r);Et(fn,`RPC '${t}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)}))}T_(t,n,i){const r=_f(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=PE(),c=bE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=o.join("");Et(fn,`Creating RPC '${t}' stream ${r}: ${m}`,u);const _=a.createWebChannel(m,u);this.I_(_);let y=!1,w=!1;const b=new eO({Yo:M=>{w?Et(fn,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(y||(Et(fn,`Opening RPC '${t}' stream ${r} transport.`),_.open(),y=!0),Et(fn,`RPC '${t}' stream ${r} sending:`,M),_.send(M))},Zo:()=>_.close()}),I=(M,A,D)=>{M.listen(A,(B=>{try{D(B)}catch(z){setTimeout((()=>{throw z}),0)}}))};return I(_,el.EventType.OPEN,(()=>{w||(Et(fn,`RPC '${t}' stream ${r} transport opened.`),b.o_())})),I(_,el.EventType.CLOSE,(()=>{w||(w=!0,Et(fn,`RPC '${t}' stream ${r} transport closed`),b.a_(),this.E_(_))})),I(_,el.EventType.ERROR,(M=>{w||(w=!0,oa(fn,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),b.a_(new mt(nt.UNAVAILABLE,"The operation could not be completed")))})),I(_,el.EventType.MESSAGE,(M=>{if(!w){const A=M.data[0];_e(!!A,16349);const D=A,B=D?.error||D[0]?.error;if(B){Et(fn,`RPC '${t}' stream ${r} received error:`,B);const z=B.status;let Q=(function(C){const O=Ze[C];if(O!==void 0)return rT(O)})(z),rt=B.message;Q===void 0&&(Q=nt.INTERNAL,rt="Unknown error status: "+z+" with message "+B.message),w=!0,b.a_(new mt(Q,rt)),_.close()}else Et(fn,`RPC '${t}' stream ${r} received:`,A),b.u_(A)}})),I(c,IE.STAT_EVENT,(M=>{M.stat===rf.PROXY?Et(fn,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===rf.NOPROXY&&Et(fn,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(e){return new o1(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="PersistentStream";class vT{constructor(t,n,i,r,o,a,c,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{t((()=>{const r=new mt(nt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Et(Wg,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Et(Wg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iO extends vT{constructor(t,n,i,r,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=c1(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Vt.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?Gi(a.readTime):Vt.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=mf(this.serializer),n.addTarget=(function(o,a){let c;const u=a.target;if(c=cf(u)?{documents:d1(o,u)}:{query:f1(o,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=aT(o,a.resumeToken);const f=hf(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(Vt.min())>0){c.readTime=ju(o,a.snapshotVersion.toTimestamp());const f=hf(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,t);const i=p1(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=mf(this.serializer),n.removeTarget=t,this.q_(n)}}class rO extends vT{constructor(t,n,i,r,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _e(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_e(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_e(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=h1(t.writeResults,t.commitTime),i=Gi(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=mf(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>u1(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{}class oO extends sO{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(t,df(n,i),r,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(nt.UNKNOWN,o.toString())}))}Ho(t,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(t,df(n,i),r,a,c,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(nt.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aO{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Or(n),this.aa=!1):Et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="RemoteStore";class lO{constructor(t,n,i,r,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{i.enqueueAndForget((async()=>{co(this)&&(Et(eo,"Restarting streams for network reachability change."),await(async function(u){const f=$t(u);f.Ea.add(4),await ic(f),f.Ra.set("Unknown"),f.Ea.delete(4),await kh(f)})(this))}))})),this.Ra=new aO(i,r)}}async function kh(e){if(co(e))for(const t of e.da)await t(!0)}async function ic(e){for(const t of e.da)await t(!1)}function wT(e,t){const n=$t(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Dm(n)?Nm(n):Ea(n).O_()&&Mm(n,t))}function xm(e,t){const n=$t(e),i=Ea(n);n.Ia.delete(t),i.O_()&&ET(n,t),n.Ia.size===0&&(i.O_()?i.L_():co(n)&&n.Ra.set("Unknown"))}function Mm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ea(e).Y_(t)}function ET(e,t){e.Va.Ue(t),Ea(e).Z_(t)}function Nm(e){e.Va=new n1({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ea(e).start(),e.Ra.ua()}function Dm(e){return co(e)&&!Ea(e).x_()&&e.Ia.size>0}function co(e){return $t(e).Ea.size===0}function TT(e){e.Va=void 0}async function cO(e){e.Ra.set("Online")}async function uO(e){e.Ia.forEach(((t,n)=>{Mm(e,t)}))}async function hO(e,t){TT(e),Dm(e)?(e.Ra.ha(t),Nm(e)):e.Ra.set("Unknown")}async function dO(e,t,n){if(e.Ra.set("Online"),t instanceof oT&&t.state===2&&t.cause)try{await(async function(r,o){const a=o.cause;for(const c of o.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,a),r.Ia.delete(c),r.Va.removeTarget(c))})(e,t)}catch(i){Et(eo,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Wu(e,i)}else if(t instanceof fu?e.Va.Ze(t):t instanceof sT?e.Va.st(t):e.Va.tt(t),!n.isEqual(Vt.min()))try{const i=await gT(e.localStore);n.compareTo(i)>=0&&await(function(o,a){const c=o.Va.Tt(a);return c.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,f)=>{const m=o.Ia.get(u);if(!m)return;o.Ia.set(u,m.withResumeToken(un.EMPTY_BYTE_STRING,m.snapshotVersion)),ET(o,u);const _=new ts(m.target,u,f,m.sequenceNumber);Mm(o,_)})),o.remoteSyncer.applyRemoteEvent(c)})(e,n)}catch(i){Et(eo,"Failed to raise snapshot:",i),await Wu(e,i)}}async function Wu(e,t,n){if(!wa(t))throw t;e.Ea.add(1),await ic(e),e.Ra.set("Offline"),n||(n=()=>gT(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Et(eo,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await kh(e)}))}function IT(e,t){return t().catch((n=>Wu(e,n,t)))}async function Lh(e){const t=$t(e),n=ps(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ym;for(;fO(t);)try{const r=await Z1(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,mO(t,r)}catch(r){await Wu(t,r)}bT(t)&&PT(t)}function fO(e){return co(e)&&e.Ta.length<10}function mO(e,t){e.Ta.push(t);const n=ps(e);n.O_()&&n.X_&&n.ea(t.mutations)}function bT(e){return co(e)&&!ps(e).x_()&&e.Ta.length>0}function PT(e){ps(e).start()}async function pO(e){ps(e).ra()}async function _O(e){const t=ps(e);for(const n of e.Ta)t.ea(n.mutations)}async function gO(e,t,n){const i=e.Ta.shift(),r=Am.from(i,t,n);await IT(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Lh(e)}async function yO(e,t){t&&ps(e).X_&&await(async function(i,r){if((function(a){return J0(a)&&a!==nt.ABORTED})(r.code)){const o=i.Ta.shift();ps(i).B_(),await IT(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Lh(i)}})(e,t),bT(e)&&PT(e)}async function qg(e,t){const n=$t(e);n.asyncQueue.verifyOperationInProgress(),Et(eo,"RemoteStore received new credentials");const i=co(n);n.Ea.add(3),await ic(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await kh(n)}async function vO(e,t){const n=$t(e);t?(n.Ea.delete(2),await kh(n)):t||(n.Ea.add(2),await ic(n),n.Ra.set("Unknown"))}function Ea(e){return e.ma||(e.ma=(function(n,i,r){const o=$t(n);return o.sa(),new iO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(e.datastore,e.asyncQueue,{Xo:cO.bind(null,e),t_:uO.bind(null,e),r_:hO.bind(null,e),H_:dO.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Dm(e)?Nm(e):e.Ra.set("Unknown")):(await e.ma.stop(),TT(e))}))),e.ma}function ps(e){return e.fa||(e.fa=(function(n,i,r){const o=$t(n);return o.sa(),new rO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:pO.bind(null,e),r_:yO.bind(null,e),ta:_O.bind(null,e),na:gO.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Lh(e)):(await e.fa.stop(),e.Ta.length>0&&(Et(eo,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,n,i,r,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,o){const a=Date.now()+i,c=new Vm(t,n,a,r,o);return c.start(i),c}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(e,t){if(Or("AsyncQueue",`${t}: ${e}`),wa(e))return new mt(nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(t){return new ta(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||St.comparator(n.key,i.key):(n,i)=>St.comparator(n.key,i.key),this.keyedMap=nl(),this.sortedSet=new Oe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ta)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new ta;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.ga=new Oe(St.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Mt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class da{constructor(t,n,i,r,o,a,c,u,f){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,i,r,o){const a=[];return n.forEach((c=>{a.push({type:0,doc:c})})),new da(t,n,ta.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class EO{constructor(){this.queries=Zg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=$t(n),o=r.queries;r.queries=Zg(),o.forEach(((a,c)=>{for(const u of c.Sa)u.onError(i)}))})(this,new mt(nt.ABORTED,"Firestore shutting down"))}}function Zg(){return new lo((e=>qE(e)),Ih)}async function AT(e,t){const n=$t(e);let i=3;const r=t.query;let o=n.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new wO,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const c=Fm(a,`Initialization of query '${Bo(t.query)}' failed`);return void t.onError(c)}n.queries.set(r,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&Um(n)}async function ST(e,t){const n=$t(e),i=t.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(t);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function TO(e,t){const n=$t(e);let i=!1;for(const r of t){const o=r.query,a=n.queries.get(o);if(a){for(const c of a.Sa)c.Fa(r)&&(i=!0);a.wa=r}}i&&Um(n)}function IO(e,t,n){const i=$t(e),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(t)}function Um(e){e.Ca.forEach((t=>{t.next()}))}var gf,Kg;(Kg=gf||(gf={})).Ma="default",Kg.Cache="cache";class CT{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new da(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=da.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t){this.key=t}}class LT{constructor(t){this.key=t}}class bO{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=te(),this.mutatedKeys=te(),this.eu=GE(t),this.tu=new ta(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Gg,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((m,_)=>{const y=r.get(m),w=bh(this.query,_)?_:null,b=!!y&&this.mutatedKeys.has(y.key),I=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;y&&w?y.data.isEqual(w.data)?b!==I&&(i.track({type:3,doc:w}),M=!0):this.su(y,w)||(i.track({type:2,doc:w}),M=!0,(u&&this.eu(w,u)>0||f&&this.eu(w,f)<0)&&(c=!0)):!y&&w?(i.track({type:0,doc:w}),M=!0):y&&!w&&(i.track({type:1,doc:y}),M=!0,(u||f)&&(c=!0)),M&&(w?(a=a.add(w),o=I?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:c,mutatedKeys:o}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((m,_)=>(function(w,b){const I=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt(20277,{Rt:M})}};return I(w)-I(b)})(m.type,_.type)||this.eu(m.doc,_.doc))),this.ou(i),r=r??!1;const c=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new da(this.query,t.tu,o,a,t.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=te(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new LT(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new kT(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=te();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return da.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bm="SyncEngine";class PO{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class AO{constructor(t){this.key=t,this.hu=!1}}class SO{constructor(t,n,i,r,o,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new lo((c=>qE(c)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(St.comparator),this.Au=new Map,this.Ru=new km,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CO(e,t,n=!0){const i=DT(e);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await RT(i,t,n,!0),r}async function kO(e,t){const n=DT(e);await RT(n,t,!0,!1)}async function RT(e,t,n,i){const r=await K1(e.localStore,qi(t)),o=r.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await LO(e,t,o,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&wT(e.remoteStore,r),c}async function LO(e,t,n,i,r){e.pu=(_,y,w)=>(async function(I,M,A,D){let B=M.view.ru(A);B.Cs&&(B=await $g(I.localStore,M.query,!1).then((({documents:S})=>M.view.ru(S,B))));const z=D&&D.targetChanges.get(M.targetId),Q=D&&D.targetMismatches.get(M.targetId)!=null,rt=M.view.applyChanges(B,I.isPrimaryClient,z,Q);return Qg(I,M.targetId,rt.au),rt.snapshot})(e,_,y,w);const o=await $g(e.localStore,t,!0),a=new bO(t,o.Qs),c=a.ru(o.documents),u=nc.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),f=a.applyChanges(c,e.isPrimaryClient,u);Qg(e,n,f.au);const m=new PO(t,n,a);return e.Tu.set(t,m),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function RO(e,t,n){const i=$t(e),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((a=>!Ih(a,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await pf(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xm(i.remoteStore,r.targetId),yf(i,r.targetId)})).catch(va)):(yf(i,r.targetId),await pf(i.localStore,r.targetId,!0))}async function OO(e,t){const n=$t(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xm(n.remoteStore,i.targetId))}async function xO(e,t,n){const i=BO(e);try{const r=await(function(a,c){const u=$t(a),f=Ce.now(),m=c.reduce(((w,b)=>w.add(b.key)),te());let _,y;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let b=xr(),I=te();return u.Ns.getEntries(w,m).next((M=>{b=M,b.forEach(((A,D)=>{D.isValidDocument()||(I=I.add(A))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,b))).next((M=>{_=M;const A=[];for(const D of c){const B=Z0(D,_.get(D.key).overlayedDocument);B!=null&&A.push(new Is(D.key,B,UE(B.value.mapValue),li.exists(!0)))}return u.mutationQueue.addMutationBatch(w,f,A,c)})).next((M=>{y=M;const A=M.applyToLocalDocumentSet(_,I);return u.documentOverlayCache.saveOverlays(w,M.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:KE(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(a,c,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Oe(Jt)),f=f.insert(c,u),a.Vu[a.currentUser.toKey()]=f})(i,r.batchId,n),await rc(i,r.changes),await Lh(i.remoteStore)}catch(r){const o=Fm(r,"Failed to persist write");n.reject(o)}}async function OT(e,t){const n=$t(e);try{const i=await q1(n.localStore,t);t.targetChanges.forEach(((r,o)=>{const a=n.Au.get(o);a&&(_e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?_e(a.hu,14607):r.removedDocuments.size>0&&(_e(a.hu,42227),a.hu=!1))})),await rc(n,i,t)}catch(i){await va(i)}}function Yg(e,t,n){const i=$t(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((o,a)=>{const c=a.view.va(t);c.snapshot&&r.push(c.snapshot)})),(function(a,c){const u=$t(a);u.onlineState=c;let f=!1;u.queries.forEach(((m,_)=>{for(const y of _.Sa)y.va(c)&&(f=!0)})),f&&Um(u)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function MO(e,t,n){const i=$t(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),o=r&&r.key;if(o){let a=new Oe(St.comparator);a=a.insert(o,yn.newNoDocument(o,Vt.min()));const c=te().add(o),u=new Sh(Vt.min(),new Map,new Oe(Jt),a,c);await OT(i,u),i.du=i.du.remove(o),i.Au.delete(t),$m(i)}else await pf(i.localStore,t,!1).then((()=>yf(i,t,n))).catch(va)}async function NO(e,t){const n=$t(e),i=t.batch.batchId;try{const r=await W1(n.localStore,t);MT(n,i,null),xT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await rc(n,r)}catch(r){await va(r)}}async function DO(e,t,n){const i=$t(e);try{const r=await(function(a,c){const u=$t(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return u.mutationQueue.lookupMutationBatch(f,c).next((_=>(_e(_!==null,37113),m=_.keys(),u.mutationQueue.removeMutationBatch(f,_)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>u.localDocuments.getDocuments(f,m)))}))})(i.localStore,t);MT(i,t,n),xT(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await rc(i,r)}catch(r){await va(r)}}function xT(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function MT(e,t,n){const i=$t(e);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(n?o.reject(n):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function yf(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||NT(e,i)}))}function NT(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(xm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),$m(e))}function Qg(e,t,n){for(const i of n)i instanceof kT?(e.Ru.addReference(i.key,t),VO(e,i)):i instanceof LT?(Et(Bm,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||NT(e,i.key)):Mt(19791,{wu:i})}function VO(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(Et(Bm,"New document in limbo: "+n),e.Eu.add(i),$m(e))}function $m(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new St(Ee.fromString(t)),i=e.fu.next();e.Au.set(i,new AO(n)),e.du=e.du.insert(n,i),wT(e.remoteStore,new ts(qi(Tm(n.path)),i,"TargetPurposeLimboResolution",vh.ce))}}async function rc(e,t,n){const i=$t(e),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,u)=>{a.push(i.pu(u,t,n).then((f=>{if((f||n)&&i.isPrimaryClient){const m=f?!f.fromCache:n?.targetChanges.get(u.targetId)?.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);const m=Rm.As(u.targetId,f);o.push(m)}})))})),await Promise.all(a),i.Pu.H_(r),await(async function(u,f){const m=$t(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>at.forEach(f,(y=>at.forEach(y.Es,(w=>m.persistence.referenceDelegate.addReference(_,y.targetId,w))).next((()=>at.forEach(y.ds,(w=>m.persistence.referenceDelegate.removeReference(_,y.targetId,w)))))))))}catch(_){if(!wa(_))throw _;Et(Om,"Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const w=m.Ms.get(y),b=w.snapshotVersion,I=w.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(y,I)}}})(i.localStore,o))}async function FO(e,t){const n=$t(e);if(!n.currentUser.isEqual(t)){Et(Bm,"User change. New user:",t.toKey());const i=await _T(n.localStore,t);n.currentUser=t,(function(o,a){o.mu.forEach((c=>{c.forEach((u=>{u.reject(new mt(nt.CANCELLED,a))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await rc(n,i.Ls)}}function UO(e,t){const n=$t(e),i=n.Au.get(t);if(i&&i.hu)return te().add(i.key);{let r=te();const o=n.Iu.get(t);if(!o)return r;for(const a of o){const c=n.Tu.get(a);r=r.unionWith(c.view.nu)}return r}}function DT(e){const t=$t(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=UO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MO.bind(null,t),t.Pu.H_=TO.bind(null,t.eventManager),t.Pu.yu=IO.bind(null,t.eventManager),t}function BO(e){const t=$t(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=NO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DO.bind(null,t),t}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ch(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return H1(this.persistence,new $1,t.initialUser,this.serializer)}Cu(t){return new pT(Lm.mi,this.serializer)}Du(t){return new Q1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class $O extends qu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_e(this.persistence.referenceDelegate instanceof Hu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new A1(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new pT((i=>Hu.mi(i,n)),this.serializer)}}class vf{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FO.bind(null,this.syncEngine),await vO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EO})()}createDatastore(t){const n=Ch(t.databaseInfo.databaseId),i=(function(o){return new nO(o)})(t.databaseInfo);return(function(o,a,c,u){return new oO(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,r,o,a,c){return new lO(i,r,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,(n=>Yg(this.syncEngine,n,0)),(function(){return Hg.v()?new Hg:new X1})())}createSyncEngine(t,n){return(function(r,o,a,c,u,f,m){const _=new SO(r,o,a,c,u,f);return m&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=$t(n);Et(eo,"RemoteStore shutting down."),i.Ea.add(5),await ic(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Or("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class zO{constructor(t,n,i,r,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=_n.UNAUTHENTICATED,this.clientId=gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async a=>{Et(_s,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,(a=>(Et(_s,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Fm(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function Pd(e,t){e.asyncQueue.verifyOperationInProgress(),Et(_s,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async r=>{i.isEqual(r)||(await _T(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Xg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jO(e);Et(_s,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>qg(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,r)=>qg(t.remoteStore,r))),e._onlineComponents=t}async function jO(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Et(_s,"Using user provided OfflineComponentProvider");try{await Pd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(r){return r.name==="FirebaseError"?r.code===nt.FAILED_PRECONDITION||r.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await Pd(e,new qu)}}else Et(_s,"Using default OfflineComponentProvider"),await Pd(e,new $O(void 0));return e._offlineComponents}async function FT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Et(_s,"Using user provided OnlineComponentProvider"),await Xg(e,e._uninitializedComponentsProvider._online)):(Et(_s,"Using default OnlineComponentProvider"),await Xg(e,new vf))),e._onlineComponents}function HO(e){return FT(e).then((t=>t.syncEngine))}async function UT(e){const t=await FT(e),n=t.eventManager;return n.onListen=CO.bind(null,t.syncEngine),n.onUnlisten=RO.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kO.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=OO.bind(null,t.syncEngine),n}function WO(e,t,n={}){const i=new Pr;return e.asyncQueue.enqueueAndForget((async()=>(function(o,a,c,u,f){const m=new VT({next:y=>{m.Nu(),a.enqueueAndForget((()=>ST(o,_)));const w=y.docs.has(c);!w&&y.fromCache?f.reject(new mt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?f.reject(new mt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),_=new CT(Tm(c.path),m,{includeMetadataChanges:!0,qa:!0});return AT(o,_)})(await UT(e),e.asyncQueue,t,n,i))),i.promise}function qO(e,t,n={}){const i=new Pr;return e.asyncQueue.enqueueAndForget((async()=>(function(o,a,c,u,f){const m=new VT({next:y=>{m.Nu(),a.enqueueAndForget((()=>ST(o,_))),y.fromCache&&u.source==="server"?f.reject(new mt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),_=new CT(c,m,{includeMetadataChanges:!0,qa:!0});return AT(o,_)})(await UT(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firestore.googleapis.com",ty=!0;class ey{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$T,this.ssl=ty}else this.host=t.host,this.ssl=t.ssl??ty;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<b1)throw new mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}a0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new QR;switch(i.type){case"firstParty":return new e0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Jg.get(n);i&&(Et("ComponentProvider","Removing Datastore"),Jg.delete(n),i.terminate())})(this),Promise.resolve()}}function GO(e,t,n,i={}){e=Ei(e,Rh);const r=vs(t),o=e._getSettings(),a={...o,emulatorOptions:e._getEmulatorOptions()},c=`${t}:${n}`;r&&(im(`https://${c}`),rm("Firestore",!0)),o.host!==$T&&o.host!==c&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:r,emulatorOptions:i};if(!Ys(u,a)&&(e._setSettings(u),i.mockUserToken)){let f,m;if(typeof i.mockUserToken=="string")f=i.mockUserToken,m=_n.MOCK_USER;else{f=Mw(i.mockUserToken,e._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new mt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _n(_)}e._authCredentials=new XR(new SE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Nr(this.firestore,t,this._query)}}class je{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(tc(n,je._jsonSchema))return new je(t,i||null,new St(Ee.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Qe("string",je._jsonSchemaVersion),referencePath:Qe("string")};class ss extends Nr{constructor(t,n,i){super(t,n,Tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new St(t))}withConverter(t){return new ss(this.firestore,t,this._path)}}function Za(e,t,...n){if(e=Re(e),CE("collection","path",t),e instanceof Rh){const i=Ee.fromString(t,...n);return pg(i),new ss(e,null,i)}{if(!(e instanceof je||e instanceof ss))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Ee.fromString(t,...n));return pg(i),new ss(e.firestore,null,i)}}function os(e,t,...n){if(e=Re(e),arguments.length===1&&(t=gm.newId()),CE("doc","path",t),e instanceof Rh){const i=Ee.fromString(t,...n);return mg(i),new je(e,null,new St(i))}{if(!(e instanceof je||e instanceof ss))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Ee.fromString(t,...n));return mg(i),new je(e.firestore,e instanceof ss?e.converter:null,new St(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="AsyncQueue";class iy{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yT(this,"async_queue_retry"),this._c=()=>{const i=bd();i&&Et(ny,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!wa(t))throw t;Et(ny,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Or("INTERNAL UNHANDLED ERROR: ",ry(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Vm.createAndSchedule(this,t,n,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Mt(47125,{Pc:ry(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function ry(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class uo extends Rh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new iy,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new iy(t),this._firestoreClient=void 0,await t}}}function ZO(e,t){const n=typeof e=="object"?e:am(),i=typeof e=="string"?e:Vu,r=mh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Rw("firestore");o&&GO(r,...o)}return r}function zm(e){if(e._terminated)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||KO(e),e._firestoreClient}function KO(e){const t=e._freezeSettings(),n=(function(r,o,a,c){return new v0(r,o,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,BT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new zO(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(un.fromBase64String(t))}catch(n){throw new mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new si(un.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(tc(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Qe("string",si._jsonSchemaVersion),bytes:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(t){if(tc(t,Zi._jsonSchema))return new Zi(t.latitude,t.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:Qe("string",Zi._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(tc(t,Ki._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ki(t.vectorValues);throw new mt(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:Qe("string",Ki._jsonSchemaVersion),vectorValues:Qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=/^__.*__$/;class QO{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Is(t,this.data,this.fieldMask,n,this.fieldTransforms):new ec(t,this.data,n,this.fieldTransforms)}}class zT{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Is(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function jT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt(40011,{Ac:e})}}class Hm{constructor(t,n,i,r,o,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Gu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(jT(this.Ac)&&YO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class XO{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Ch(t)}Cc(t,n,i,r=!1){return new Hm({Ac:t,methodName:n,Dc:i,path:ln.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sc(e){const t=e._freezeSettings(),n=Ch(e._databaseId);return new XO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function HT(e,t,n,i,r,o={}){const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,r);Wm("Data must be an object, but it was:",a,i);const c=qT(i,a);let u,f;if(o.merge)u=new Hn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const y=wf(t,_,n);if(!a.contains(y))throw new mt(nt.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);ZT(m,y)||m.push(y)}u=new Hn(m),f=a.fieldTransforms.filter((_=>u.covers(_.field)))}else u=null,f=a.fieldTransforms;return new QO(new Vn(c),u,f)}class xh extends jm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof xh}}function JO(e,t,n,i){const r=e.Cc(1,t,n);Wm("Data must be an object, but it was:",r,i);const o=[],a=Vn.empty();Ts(i,((u,f)=>{const m=qm(t,u,n);f=Re(f);const _=r.yc(m);if(f instanceof xh)o.push(m);else{const y=oc(f,_);y!=null&&(o.push(m),a.set(m,y))}}));const c=new Hn(o);return new zT(a,c,r.fieldTransforms)}function tx(e,t,n,i,r,o){const a=e.Cc(1,t,n),c=[wf(t,i,n)],u=[r];if(o.length%2!=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(wf(t,o[y])),u.push(o[y+1]);const f=[],m=Vn.empty();for(let y=c.length-1;y>=0;--y)if(!ZT(f,c[y])){const w=c[y];let b=u[y];b=Re(b);const I=a.yc(w);if(b instanceof xh)f.push(w);else{const M=oc(b,I);M!=null&&(f.push(w),m.set(w,M))}}const _=new Hn(f);return new zT(m,_,a.fieldTransforms)}function WT(e,t,n,i=!1){return oc(n,e.Cc(i?4:3,t))}function oc(e,t){if(GT(e=Re(e)))return Wm("Unsupported field value:",t,e),qT(e,t);if(e instanceof jm)return(function(i,r){if(!jT(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let a=0;for(const c of i){let u=oc(c,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}})(e,t)}return(function(i,r){if((i=Re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return z0(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ce.fromDate(i);return{timestampValue:ju(r.serializer,o)}}if(i instanceof Ce){const o=new Ce(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ju(r.serializer,o)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof si)return{bytesValue:aT(r.serializer,i._byteString)};if(i instanceof je){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ki)return(function(a,c){return{mapValue:{fields:{[VE]:{stringValue:FE},[Fu]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return bm(c.serializer,f)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${yh(i)}`)})(e,t)}function qT(e,t){const n={};return RE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(e,((i,r)=>{const o=oc(r,t.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function GT(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof Zi||e instanceof si||e instanceof je||e instanceof jm||e instanceof Ki)}function Wm(e,t,n){if(!GT(n)||!kE(n)){const i=yh(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function wf(e,t,n){if((t=Re(t))instanceof Oh)return t._internalPath;if(typeof t=="string")return qm(e,t);throw Gu("Field path arguments must be of type string or ",e,!1,void 0,n)}const ex=new RegExp("[~\\*/\\[\\]]");function qm(e,t,n){if(t.search(ex)>=0)throw Gu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Oh(...t.split("."))._internalPath}catch{throw Gu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gu(e,t,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new mt(nt.INVALID_ARGUMENT,c+e+u)}function ZT(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,i,r,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new nx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Mh("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nx extends Gm{data(){return super.data()}}function Mh(e,t){return typeof t=="string"?qm(e,t):t instanceof Oh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zm{}class Nh extends Zm{}function qc(e,t,...n){let i=[];t instanceof Zm&&i.push(t),i=i.concat(n),(function(o){const a=o.filter((u=>u instanceof Km)).length,c=o.filter((u=>u instanceof Dh)).length;if(a>1||a>0&&c>0)throw new mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)e=r._apply(e);return e}class Dh extends Nh{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Dh(t,n,i)}_apply(t){const n=this._parse(t);return KT(t._query,n),new Nr(t.firestore,t.converter,uf(t._query,n))}_parse(t){const n=sc(t.firestore);return(function(o,a,c,u,f,m,_){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){oy(_,m);const b=[];for(const I of _)b.push(sy(u,o,I));y={arrayValue:{values:b}}}else y=sy(u,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||oy(_,m),y=WT(c,a,_,m==="in"||m==="not-in");return Ke.create(f,m,y)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function rx(e,t,n){const i=t,r=Mh("where",e);return Dh._create(r,i,n)}class Km extends Zm{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Km(t,n)}_parse(t){const n=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(r,o){let a=r;const c=o.getFlattenedFilters();for(const u of c)KT(a,u),a=uf(a,u)})(t._query,n),new Nr(t.firestore,t.converter,uf(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ym extends Nh{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ym(t,n)}_apply(t){const n=(function(r,o,a){if(r.startAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vl(o,a)})(t._query,this._field,this._direction);return new Nr(t.firestore,t.converter,(function(r,o){const a=r.explicitOrderBy.concat([o]);return new ao(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,n))}}function Gc(e,t="asc"){const n=t,i=Mh("orderBy",e);return Ym._create(i,n)}class Qm extends Nh{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new Qm(t,n,i)}_apply(t){return new Nr(t.firestore,t.converter,Bu(t._query,this._limit,this._limitType))}}function Ad(e){return l0("limit",e),Qm._create("limit",e,"F")}class Xm extends Nh{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new Xm(t,n,i)}_apply(t){const n=ox(t,this.type,this._docOrFields,this._inclusive);return new Nr(t.firestore,t.converter,(function(r,o){return new ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)})(t._query,n))}}function sx(...e){return Xm._create("startAfter",e,!1)}function ox(e,t,n,i){if(n[0]=Re(n[0]),n[0]instanceof Gm)return(function(o,a,c,u,f){if(!u)throw new mt(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const _ of Jo(o))if(_.field.isKeyField())m.push(Uu(a,u.key));else{const y=u.data.field(_.field);if(Eh(y))throw new mt(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const w=_.field.canonicalString();throw new mt(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}m.push(y)}return new ua(m,f)})(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=sc(e.firestore);return(function(a,c,u,f,m,_){const y=a.explicitOrderBy;if(m.length>y.length)throw new mt(nt.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let b=0;b<m.length;b++){const I=m[b];if(y[b].field.isKeyField()){if(typeof I!="string")throw new mt(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof I}`);if(!Im(a)&&I.indexOf("/")!==-1)throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${I}' contains a slash.`);const M=a.path.child(Ee.fromString(I));if(!St.isDocumentKey(M))throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const A=new St(M);w.push(Uu(c,A))}else{const M=WT(u,f,I);w.push(M)}}return new ua(w,_)})(e._query,e.firestore._databaseId,r,t,n,i)}}function sy(e,t,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(t)&&n.indexOf("/")!==-1)throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Ee.fromString(n));if(!St.isDocumentKey(i))throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Uu(e,new St(i))}if(n instanceof je)return Uu(e,n._key);throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function oy(e,t){if(!Array.isArray(e)||e.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function KT(e,t){const n=(function(r,o){for(const a of r)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(e.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ax{convertValue(t,n="none"){switch(ms(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ze(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ts(t,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(t){const n=t.fields?.[Fu].arrayValue?.values?.map((i=>ze(i.doubleValue)));return new Ki(n)}convertGeoPoint(t){return new Zi(ze(t.latitude),ze(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Th(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ml(t));default:return null}}convertTimestamp(t){const n=ds(t);return new Ce(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Ee.fromString(t);_e(fT(i),9688,{name:t});const r=new Nl(i.get(1),i.get(3)),o=new St(i.popFirst(5));return r.isEqual(n)||Or(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class rl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qs extends Gm{constructor(t,n,i,r,o,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Mh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:Qe("string",qs._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class mu extends qs{data(t={}){return super.data(t)}}class ea{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new rl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new mu(this._firestore,this._userDataWriter,i.key,i,new rl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map((c=>{const u=new mu(r._firestore,r._userDataWriter,c.doc.key,c.doc,new rl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const u=new mu(r._firestore,r._userDataWriter,c.doc.key,c.doc,new rl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:lx(c.type),doc:u,oldIndex:f,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ea._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function lx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(e){e=Ei(e,je);const t=Ei(e.firestore,uo);return WO(zm(t),e._key).then((n=>dx(t,e,n)))}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:Qe("string",ea._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class QT extends ax{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}function ay(e){e=Ei(e,Nr);const t=Ei(e.firestore,uo),n=zm(t),i=new QT(t);return ix(e._query),qO(n,e._query).then((r=>new ea(t,i,e,r)))}function cx(e,t,n){e=Ei(e,je);const i=Ei(e.firestore,uo),r=YT(e.converter,t);return Vh(i,[HT(sc(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,li.none())])}function ly(e,t,n,...i){e=Ei(e,je);const r=Ei(e.firestore,uo),o=sc(r);let a;return a=typeof(t=Re(t))=="string"||t instanceof Oh?tx(o,"updateDoc",e._key,t,n,i):JO(o,"updateDoc",e._key,t),Vh(r,[a.toMutation(e._key,li.exists(!0))])}function ux(e){return Vh(Ei(e.firestore,uo),[new Pm(e._key,li.none())])}function hx(e,t){const n=Ei(e.firestore,uo),i=os(e),r=YT(e.converter,t);return Vh(n,[HT(sc(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,li.exists(!1))]).then((()=>i))}function Vh(e,t){return(function(i,r){const o=new Pr;return i.asyncQueue.enqueueAndForget((async()=>xO(await HO(i),r,o))),o.promise})(zm(e),t)}function dx(e,t,n){const i=n.docs.get(t._key),r=new QT(e);return new qs(e,r,t._key,i,new rl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){ya=r})(so),Qs(new us("firestore",((i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),c=new uo(new JR(i.getProvider("auth-internal")),new n0(a,i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(f.options.projectId,m)})(a,r),a);return o={useFetchStreams:n,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),ji(ug,hg,t),ji(ug,hg,"esm2020")})();var fx="firebase",mx="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(fx,mx,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebasestorage.googleapis.com",JT="storageBucket",px=120*1e3,_x=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends tr{constructor(t,n,i=0){super(Sd(t),`Firebase Storage: ${n} (${Sd(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Sd(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ue;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ue||(Ue={}));function Sd(e){return"storage/"+e}function Jm(){const e="An unknown error occurred, please check the error payload for server response.";return new Be(Ue.UNKNOWN,e)}function gx(e){return new Be(Ue.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function yx(e){return new Be(Ue.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vx(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(Ue.UNAUTHENTICATED,e)}function wx(){return new Be(Ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ex(e){return new Be(Ue.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Tx(){return new Be(Ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ix(){return new Be(Ue.CANCELED,"User canceled the upload/download.")}function bx(e){return new Be(Ue.INVALID_URL,"Invalid URL '"+e+"'.")}function Px(e){return new Be(Ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Ax(){return new Be(Ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JT+"' property when initializing the app?")}function Sx(){return new Be(Ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Cx(){return new Be(Ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kx(e){return new Be(Ue.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ef(e){return new Be(Ue.INVALID_ARGUMENT,e)}function tI(){return new Be(Ue.APP_DELETED,"The Firebase app was deleted.")}function Lx(e){return new Be(Ue.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function El(e,t){return new Be(Ue.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ka(e){throw new Be(Ue.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Wn.makeFromUrl(t,n)}catch{return new Wn(t,"")}if(i.path==="")return i;throw Px(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function f(z){z.path_=decodeURIComponent(z.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${_}/${m}/b/${r}/o${y}`,"i"),b={bucket:1,path:3},I=n===XT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",A=new RegExp(`^https?://${I}/${r}/${M}`,"i"),B=[{regex:c,indices:u,postModify:o},{regex:w,indices:b,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let z=0;z<B.length;z++){const Q=B[z],rt=Q.regex.exec(t);if(rt){const S=rt[Q.indices.bucket];let C=rt[Q.indices.path];C||(C=""),i=new Wn(S,C),Q.postModify(i);break}}if(i==null)throw bx(t);return i}}class Rx{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e,t,n){let i=1,r=null,o=null,a=!1,c=0;function u(){return c===2}let f=!1;function m(...M){f||(f=!0,t.apply(null,M))}function _(M){r=setTimeout(()=>{r=null,e(w,u())},M)}function y(){o&&clearTimeout(o)}function w(M,...A){if(f){y();return}if(M){y(),m.call(null,M,...A);return}if(u()||a){y(),m.call(null,M,...A);return}i<64&&(i*=2);let B;c===1?(c=2,B=0):B=(i+Math.random())*1e3,_(B)}let b=!1;function I(M){b||(b=!0,y(),!f&&(r!==null?(M||(c=2),clearTimeout(r),_(0)):M||(c=1)))}return _(0),o=setTimeout(()=>{a=!0,I(!0)},n),I}function xx(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(e){return e!==void 0}function Nx(e){return typeof e=="object"&&!Array.isArray(e)}function tp(e){return typeof e=="string"||e instanceof String}function cy(e){return ep()&&e instanceof Blob}function ep(){return typeof Blob<"u"}function uy(e,t,n,i){if(i<t)throw Ef(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Ef(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function eI(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Gs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,n,i,r,o,a,c,u,f,m,_,y=!0,w=!1){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=y,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,I)=>{this.resolve_=b,this.reject_=I,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new Zc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{const u=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===Gs.NO_ERROR,u=o.getStatus();if(!c||Dx(u,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Gs.ABORT;i(!1,new Zc(!1,null,m));return}const f=this.successCodes_.indexOf(u)!==-1;i(!0,new Zc(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());Mx(u)?o(u):o()}catch(u){a(u)}else if(c!==null){const u=Jm();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(r.canceled){const u=this.appDelete_?tI():Ix();a(u)}else{const u=Tx();a(u)}};this.canceled_?n(!1,new Zc(!1,null,!0)):this.backoffId_=Ox(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&xx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zc{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function Fx(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Ux(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Bx(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $x(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function zx(e,t,n,i,r,o,a=!0,c=!1){const u=eI(e.urlParams),f=e.url+u,m=Object.assign({},e.headers);return Bx(m,t),Fx(m,n),Ux(m,o),$x(m,i),new Vx(f,e.method,m,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hx(...e){const t=jx();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(ep())return new Blob(e);throw new Be(Ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Wx(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(e){if(typeof atob>"u")throw kx("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cd{constructor(t,n){this.data=t,this.contentType=n||null}}function Gx(e,t){switch(e){case Bi.RAW:return new Cd(nI(t));case Bi.BASE64:case Bi.BASE64URL:return new Cd(iI(e,t));case Bi.DATA_URL:return new Cd(Kx(t),Yx(t))}throw Jm()}function nI(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=i,a=e.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function Zx(e){let t;try{t=decodeURIComponent(e)}catch{throw El(Bi.DATA_URL,"Malformed data URL.")}return nI(t)}function iI(e,t){switch(e){case Bi.BASE64:{const r=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(r||o)throw El(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Bi.BASE64URL:{const r=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(r||o)throw El(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qx(t)}catch(r){throw r.message.includes("polyfill")?r:El(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class rI{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw El(Bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Qx(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function Kx(e){const t=new rI(e);return t.base64?iI(Bi.BASE64,t.rest):Zx(t.rest)}function Yx(e){return new rI(e).contentType}function Qx(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,n){let i=0,r="";cy(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(cy(this.data_)){const i=this.data_,r=Wx(i,t,n);return r===null?null:new Jr(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Jr(i,!0)}}static getBlob(...t){if(ep()){const n=t.map(i=>i instanceof Jr?i.data_:i);return new Jr(Hx.apply(null,n))}else{const n=t.map(a=>tp(a)?Gx(Bi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)r[o++]=a[c]}),new Jr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(e){let t;try{t=JSON.parse(e)}catch{return null}return Nx(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Jx(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function oI(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(e,t){return t}class Pn{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||tM}}let Kc=null;function eM(e){return!tp(e)||e.length<2?e:oI(e)}function aI(){if(Kc)return Kc;const e=[];e.push(new Pn("bucket")),e.push(new Pn("generation")),e.push(new Pn("metageneration")),e.push(new Pn("name","fullPath",!0));function t(o,a){return eM(a)}const n=new Pn("name");n.xform=t,e.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new Pn("size");return r.xform=i,e.push(r),e.push(new Pn("timeCreated")),e.push(new Pn("updated")),e.push(new Pn("md5Hash",null,!0)),e.push(new Pn("cacheControl",null,!0)),e.push(new Pn("contentDisposition",null,!0)),e.push(new Pn("contentEncoding",null,!0)),e.push(new Pn("contentLanguage",null,!0)),e.push(new Pn("contentType",null,!0)),e.push(new Pn("metadata","customMetadata",!0)),Kc=e,Kc}function nM(e,t){function n(){const i=e.bucket,r=e.fullPath,o=new Wn(i,r);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function iM(e,t,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,t[a.server])}return nM(i,e),i}function lI(e,t,n){const i=sI(t);return i===null?null:iM(e,i,n)}function rM(e,t,n,i){const r=sI(t);if(r===null||!tp(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=e.bucket,_=e.fullPath,y="/b/"+a(m)+"/o/"+a(_),w=np(y,n,i),b=eI({alt:"media",token:f});return w+b})[0]}function sM(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const o=t[r];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}class cI{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(e){if(!e)throw Jm()}function oM(e,t){function n(i,r){const o=lI(e,r,t);return uI(o!==null),o}return n}function aM(e,t){function n(i,r){const o=lI(e,r,t);return uI(o!==null),rM(o,r,e.host,e._protocol)}return n}function hI(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=wx():r=vx():n.getStatus()===402?r=yx(e.bucket):n.getStatus()===403?r=Ex(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function lM(e){const t=hI(e);function n(i,r){let o=t(i,r);return i.getStatus()===404&&(o=gx(e.path)),o.serverResponse=r.serverResponse,o}return n}function cM(e,t,n){const i=t.fullServerUrl(),r=np(i,e.host,e._protocol),o="GET",a=e.maxOperationRetryTime,c=new cI(r,o,aM(e,n),a);return c.errorHandler=lM(t),c}function uM(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function hM(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=uM(null,t)),i}function dM(e,t,n,i,r){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let z=0;z<2;z++)B=B+Math.random().toString().slice(2);return B}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const f=hM(t,i,r),m=sM(f,n),_="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+u+"--",w=Jr.getBlob(_,i,y);if(w===null)throw Sx();const b={name:f.fullPath},I=np(o,e.host,e._protocol),M="POST",A=e.maxUploadRetryTime,D=new cI(I,M,oM(e,n),A);return D.urlParams=b,D.headers=a,D.body=w.uploadData(),D.errorHandler=hI(t),D}class fM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gs.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gs.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r,o){if(this.sent_)throw Ka("cannot .send() more than once");if(vs(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ka("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ka("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ka("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ka("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class mM extends fM{initXhr(){this.xhr_.responseType="text"}}function dI(){return new mM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,n){this._service=t,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new no(t,n)}get root(){const t=new Wn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oI(this._location.path)}get storage(){return this._service}get parent(){const t=Xx(this._location.path);if(t===null)return null;const n=new Wn(this._location.bucket,t);return new no(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Lx(t)}}function pM(e,t,n){e._throwIfRoot("uploadBytes");const i=dM(e.storage,e._location,aI(),new Jr(t,!0),n);return e.storage.makeRequestWithTokens(i,dI).then(r=>({metadata:r,ref:e}))}function _M(e){e._throwIfRoot("getDownloadURL");const t=cM(e.storage,e._location,aI());return e.storage.makeRequestWithTokens(t,dI).then(n=>{if(n===null)throw Cx();return n})}function gM(e,t){const n=Jx(e._location.path,t),i=new Wn(e._location.bucket,n);return new no(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(e){return/^[A-Za-z]+:\/\//.test(e)}function vM(e,t){return new no(e,t)}function fI(e,t){if(e instanceof ip){const n=e;if(n._bucket==null)throw Ax();const i=new no(n,n._bucket);return t!=null?fI(i,t):i}else return t!==void 0?gM(e,t):e}function wM(e,t){if(t&&yM(t)){if(e instanceof ip)return vM(e,t);throw Ef("To use ref(service, url), the first argument must be a Storage instance.")}else return fI(e,t)}function hy(e,t){const n=t?.[JT];return n==null?null:Wn.makeFromBucketSpec(n,e)}function EM(e,t,n,i={}){e.host=`${t}:${n}`;const r=vs(t);r&&(im(`https://${e.host}/b`),rm("Storage",!0)),e._isUsingEmulator=!0,e._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(e._overrideAuthToken=typeof o=="string"?o:Mw(o,e.app.options.projectId))}class ip{constructor(t,n,i,r,o,a=!1){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=XT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=px,this._maxUploadRetryTime=_x,this._requests=new Set,r!=null?this._bucket=Wn.makeFromBucketSpec(r,this._host):this._bucket=hy(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,t):this._bucket=hy(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){uy("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){uy("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new no(this,t)}_makeRequest(t,n,i,r,o=!0){if(this._deleted)return new Rx(tI());{const a=zx(t,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const dy="@firebase/storage",fy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="storage";function my(e,t,n){return e=Re(e),pM(e,t,n)}function py(e){return e=Re(e),_M(e)}function _y(e,t){return e=Re(e),wM(e,t)}function TM(e=am(),t){e=Re(e);const i=mh(e,mI).getImmediate({identifier:t}),r=Rw("storage");return r&&IM(i,...r),i}function IM(e,t,n,i={}){EM(e,t,n,i)}function bM(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new ip(n,i,r,t,so)}function PM(){Qs(new us(mI,bM,"PUBLIC").setMultipleInstances(!0)),ji(dy,fy,""),ji(dy,fy,"esm2020")}PM();const AM={apiKey:"AIzaSyAsYmL3DwmGpbXtM2xdqm_oIb1-ZehtVVw",authDomain:"landmark-app-93fd7.firebaseapp.com",projectId:"landmark-app-93fd7",storageBucket:"landmark-app-93fd7.firebasestorage.app",messagingSenderId:"449944093363",appId:"1:449944093363:web:14768d07ca39b39bb066c6",measurementId:"G-76ZS49ZF17"},rp=Vw(AM),Yc=KR(rp),ii=ZO(rp),gy=TM(rp),Sn=Jf("auth",{state:()=>({user:null,loading:!1,error:null}),getters:{isAuthenticated:e=>!!e.user,isAdmin:e=>e.user?.role==="admin"},actions:{async initialize(){return new Promise(e=>{VL(Yc,async t=>{if(t){const n=await Zu(os(ii,"users",t.uid));if(n.exists()){const i=n.data();this.user={uid:t.uid,email:t.email,displayName:i.displayName,role:i.role||"user"}}}else this.user=null;e(!0)})})},async register(e,t,n){this.loading=!0,this.error=null;try{const i=await xL(Yc,e,t);return await cx(os(ii,"users",i.user.uid),{email:e,displayName:n,role:"user",createdAt:new Date}),this.user={uid:i.user.uid,email:e,displayName:n,role:"user"},!0}catch(i){const r=i;return r.code?this.error=this.getErrorMessage(r.code):this.error="An unexpected error occurred.",!1}finally{this.loading=!1}},async login(e,t){this.loading=!0,this.error=null;try{const n=await ML(Yc,e,t),i=await Zu(os(ii,"users",n.user.uid));if(i.exists()){const r=i.data();this.user={uid:n.user.uid,email:n.user.email,displayName:r.displayName,role:r.role||"user"}}return!0}catch(n){const i=n;return i.code?this.error=this.getErrorMessage(i.code):this.error="An unexpected error occurred.",!1}finally{this.loading=!1}},async logout(){try{await FL(Yc),this.user=null}catch{this.error="An unexpected error occurred."}},getErrorMessage(e){return{"auth/email-already-in-use":"This email is already registered.","auth/invalid-email":"Please enter a valid email address.","auth/weak-password":"Password should be at least 5 symbols","auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password.","auth/too-many-requests":"Too many attempts. Please try again later."}[e]||"An error occurred. Please try again."},clearError(){this.error=null}}}),SM=["for"],CM=["id","type","required","placeholder"],kM={key:0,class:"form-error"},LM=ue({__name:"FormInput",props:Zf({id:{},label:{},type:{default:"text"},placeholder:{default:""},required:{type:Boolean,default:!1},errorMessage:{default:""},containerClass:{default:""}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=sh(e,"modelValue");return(n,i)=>(_t(),bt("div",{class:Zn(["form-group",e.containerClass])},[lt("label",{for:e.id,class:"form-label"},yt(e.label),9,SM),Tu(lt("input",{id:e.id,type:e.type,"onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),required:e.required,class:Zn(["form-input",{"form-input_error":e.errorMessage}]),placeholder:e.placeholder},null,10,CM),[[cw,t.value]]),e.errorMessage?(_t(),bt("span",kM,yt(e.errorMessage),1)):Ve("",!0)],2))}}),Ae=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Wo=Ae(LM,[["__scopeId","data-v-ef097f73"]]),RM=["disabled"],OM={class:"form-submit-text"},xM=ue({__name:"FormButton",props:{buttonText:{},loadingText:{default:"Loading..."},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>(_t(),bt("button",{type:"submit",disabled:e.disabled||e.loading,class:Zn(["form-submit",{"form-submit_loading":e.loading}])},[lt("span",OM,yt(e.loading?e.loadingText:e.buttonText),1)],10,RM))}}),pI=Ae(xM,[["__scopeId","data-v-c1039321"]]),MM={class:"signin"},NM={class:"signin__container"},DM={class:"signin__form-section"},VM={class:"form__actions"},FM={class:"form__footer"},UM={class:"form__footer-text"},BM=ue({__name:"SignIn",setup(e){const t=dh(),n=Sn(),i=Le(!1),r=Qi({email:"",password:""}),o=Qi({email:"",password:""});ys(()=>{n.clearError()});function a(){let u=!0;Object.keys(o).forEach(m=>{const _=m;o[_]=""});const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.email?f.test(r.email)||(o.email="Please enter a valid email",u=!1):(o.email="Email is required",u=!1),r.password?r.password.length<5&&(o.password="Password must be more than 5 symbols",u=!1):(o.password="Password is required",u=!1),u}async function c(){if(!a())return;i.value=!0,await n.login(r.email,r.password)&&t.push("/generalmap"),i.value=!1}return(u,f)=>(_t(),bt("main",MM,[lt("div",NM,[lt("section",DM,[lt("form",{class:"form",onSubmit:_a(c,["prevent"])},[f[4]||(f[4]=lt("header",{class:"form__header"},[lt("h1",{class:"form__title"},"Landmark App"),lt("h2",{class:"form__subtitle"},"Sign in to your account")],-1)),Ft(Wo,{id:"email",label:"Email",type:"email",placeholder:"Enter your email",modelValue:r.email,"onUpdate:modelValue":f[0]||(f[0]=m=>r.email=m),required:!0,"error-message":o.email,"container-class":"email"},null,8,["modelValue","error-message"]),Ft(Wo,{id:"password",label:"Password",type:"password",placeholder:"Enter your password",modelValue:r.password,"onUpdate:modelValue":f[1]||(f[1]=m=>r.password=m),required:!0,"error-message":o.password,"container-class":"password"},null,8,["modelValue","error-message"]),lt("div",VM,[Ft(pI,{"button-text":"Sign In","loading-text":"Signing In...",loading:i.value,disabled:i.value},null,8,["loading","disabled"])]),lt("footer",FM,[lt("p",UM,[f[3]||(f[3]=zi(" Don't have an account? ",-1)),Ft(wn(nm),{to:"/register",class:"form__link"},{default:Ks(()=>[...f[2]||(f[2]=[zi("Go to Register",-1)])]),_:1})])])],32)])])]))}}),$M=Ae(BM,[["__scopeId","data-v-ca07bb6e"]]),zM={class:"register"},jM={class:"register__container"},HM={class:"register__form-section"},WM={class:"form__actions"},qM={class:"form__footer"},GM={class:"form__footer-text"},ZM=ue({__name:"Register",setup(e){const t=Sn(),n=dh(),i=Le(!1),r=Qi({displayName:"",email:"",password:"",confirmPassword:""}),o=Qi({displayName:"",email:"",password:"",confirmPassword:""});ys(()=>{t.clearError()});function a(){let u=!0;Object.keys(o).forEach(m=>{const _=m;o[_]=""}),r.displayName.trim()?r.displayName.length<2&&(o.displayName="Display name must be more than 2 symbols",u=!1):(o.displayName="Display name is required",u=!1);const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.email?f.test(r.email)||(o.email="Please enter a valid email",u=!1):(o.email="Email is required",u=!1),r.password?r.password.length<5&&(o.password="Password must be more than 5 symbols",u=!1):(o.password="Password is required",u=!1),r.confirmPassword?r.confirmPassword!==r.password&&(o.confirmPassword="Password do not match",u=!1):(o.confirmPassword="Confirm password is required",u=!1),u}async function c(){if(!a())return;i.value=!0,await t.register(r.email,r.password,r.displayName.trim())&&n.push("/generalmap"),i.value=!1}return(u,f)=>(_t(),bt("main",zM,[lt("div",jM,[lt("section",HM,[lt("form",{class:"form",onSubmit:_a(c,["prevent"])},[f[6]||(f[6]=lt("header",{class:"form__header"},[lt("h1",{class:"form__title"},"Create Account")],-1)),Ft(Wo,{id:"displayName",label:"Display Name",type:"text",placeholder:"Enter your display name",modelValue:r.displayName,"onUpdate:modelValue":f[0]||(f[0]=m=>r.displayName=m),required:!0,"error-message":o.displayName,"container-class":"display-name"},null,8,["modelValue","error-message"]),Ft(Wo,{id:"email",label:"Email",type:"email",placeholder:"Enter your email",modelValue:r.email,"onUpdate:modelValue":f[1]||(f[1]=m=>r.email=m),required:!0,"error-message":o.email,"container-class":"email"},null,8,["modelValue","error-message"]),Ft(Wo,{id:"password",label:"Password",type:"password",placeholder:"Enter your password",modelValue:r.password,"onUpdate:modelValue":f[2]||(f[2]=m=>r.password=m),required:!0,"error-message":o.password,"container-class":"password"},null,8,["modelValue","error-message"]),Ft(Wo,{id:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm your password",modelValue:r.confirmPassword,"onUpdate:modelValue":f[3]||(f[3]=m=>r.confirmPassword=m),required:!0,"error-message":o.confirmPassword,"container-class":"confirm-password"},null,8,["modelValue","error-message"]),lt("div",WM,[Ft(pI,{"button-text":"Create Account","loading-text":"Creating Account...",loading:i.value,disabled:i.value},null,8,["loading","disabled"])]),lt("footer",qM,[lt("p",GM,[f[5]||(f[5]=zi(" Already have an account? ",-1)),Ft(wn(nm),{to:"/signin",class:"form__link"},{default:Ks(()=>[...f[4]||(f[4]=[zi("Go to Sign In",-1)])]),_:1})])])],32)])])]))}}),KM=Ae(ZM,[["__scopeId","data-v-9c479c8b"]]);function yy(e,t){return e*(1-Math.exp(-.1*t))}const sp=Jf("landmarks",{state:()=>({landmarks:[],userLandmarks:[],loading:!1,lastVisible:null,hasMore:!0,pageSize:10}),getters:{topLandmarks:e=>e.landmarks.map(t=>({...t,score:yy(t.averageRating,t.visitCount)})).sort((t,n)=>n.score-t.score).slice(0,10),paginatedLandmarks:e=>e.landmarks.map(t=>({...t,score:yy(t.averageRating,t.visitCount)})).sort((t,n)=>n.score-t.score)},actions:{canEditLandmark(e){const t=Sn();return t.user?t.isAdmin?!0:e.createdBy===t.user.uid:!1},canDeleteLandmark(e){const t=Sn();return t.user?t.isAdmin?!0:e.createdBy===t.user.uid:!1},canRateLandmark(e){const t=Sn();return!t.user||t.isAdmin?!1:(console.log(e),!0)},async addLandmark(e){const t=Sn();if(!t.user)throw new Error("User not authenticated");this.loading=!0;try{const n=[];for(const a of e.photos){const u=`${Date.now()}_${a.name}`,f=_y(gy,`landmarks/${u}`),m=await my(f,a),_=await py(m.ref);n.push(_)}const i={name:e.name,description:e.description,latitude:e.latitude,longitude:e.longitude,createdBy:t.user.uid,createdAt:new Date,averageRating:e.userRating,visitCount:1,photos:n,userRatings:{[t.user.uid]:e.userRating}},r=await hx(Za(ii,"landmarks"),i),o={id:r.id,name:i.name,description:i.description,latitude:i.latitude,longitude:i.longitude,createdBy:i.createdBy,createdAt:i.createdAt,averageRating:i.averageRating,visitCount:i.visitCount,photos:i.photos,userRatings:i.userRatings};return this.landmarks.unshift(o),r.id}catch(n){throw console.error("Error adding landmark:",n),n}finally{this.loading=!1}},async fetchLandmarks(e=!1){const t=Sn();this.loading=!0;try{let n;e&&t.user?n=qc(Za(ii,"landmarks"),rx("createdBy","==",t.user.uid),Gc("createdAt","desc")):n=qc(Za(ii,"landmarks"),Gc("createdAt","desc"),Ad(this.pageSize));const i=await ay(n),r=[];i.forEach(o=>{const a=o.data();r.push({id:o.id,name:a.name,description:a.description,latitude:a.latitude,longitude:a.longitude,createdBy:a.createdBy,createdAt:a.createdAt.toDate(),averageRating:a.averageRating,visitCount:a.visitCount,photos:a.photos||[],userRatings:a.userRatings||{}})}),e?this.userLandmarks=r:(this.landmarks=r,this.lastVisible=i.docs[i.docs.length-1]||null,this.hasMore=r.length===this.pageSize)}catch(n){throw console.error("Error fetching Landmarks:",n),n}finally{this.loading=!1}},async fetchMoreLandmarks(){if(!(!this.hasMore||this.loading)){this.loading=!0;try{let e;this.lastVisible?e=qc(Za(ii,"landmarks"),Gc("createdAt","desc"),sx(this.lastVisible),Ad(this.pageSize)):e=qc(Za(ii,"landmarks"),Gc("createdAt","desc"),Ad(this.pageSize));const t=await ay(e),n=[];t.forEach(i=>{const r=i.data();n.push({id:i.id,name:r.name,description:r.description,latitude:r.latitude,longitude:r.longitude,createdBy:r.createdBy,createdAt:r.createdAt.toDate(),averageRating:r.averageRating,visitCount:r.visitCount,photos:r.photos||[],userRatings:r.userRatings||{}})}),this.landmarks.push(...n),this.lastVisible=t.docs[t.docs.length-1]||null,this.hasMore=n.length===this.pageSize}catch(e){throw console.error("Error fetching more landmarks:",e),e}finally{this.loading=!1}}},async updateLandmark(e,t,n=[]){if(!Sn().user)throw new Error("User not authenticated");this.loading=!0;try{const r=[...n];if(t.photos&&t.photos.length>0)for(const f of t.photos){if(typeof f=="string")continue;const _=`${Date.now()}_${f.name}`,y=_y(gy,`landmarks/${_}`),w=await my(y,f),b=await py(w.ref);r.push(b)}const o={name:t.name,description:t.description,latitude:t.latitude,longitude:t.longitude,photos:r,updatedAt:new Date},a=os(ii,"landmarks",e);await ly(a,o);const c=this.landmarks.findIndex(f=>f.id===e);if(c!==-1){const f={...this.landmarks[c],...o,photos:r};this.landmarks[c]=f}const u=this.userLandmarks.findIndex(f=>f.id===e);if(u!==-1){const f={...this.userLandmarks[u],...o,photos:r};this.userLandmarks[u]=f}return!0}catch(r){throw console.error("Error updating landmark:",r),r}finally{this.loading=!1}},async rateLandmark(e,t){const n=Sn();if(!n.user)throw new Error("User not authenticated");const i=this.landmarks.find(r=>r.id===e)||this.userLandmarks.find(r=>r.id===e);if(i&&!this.canRateLandmark(i))throw new Error("Admins cannot rate landmarks");try{const r=os(ii,"landmarks",e),o=await Zu(r);if(!o.exists())throw new Error("Landmark not found");const a=o.data(),c={...a.userRatings,[n.user.uid]:t},u=Object.values(c),f=u.reduce((w,b)=>w+b,0)/u.length,m=Math.max(a.visitCount,u.length);await ly(r,{averageRating:parseFloat(f.toFixed(2)),visitCount:m,userRatings:c});const _=this.landmarks.findIndex(w=>w.id===e);_!==-1&&(this.landmarks[_]=Object.assign({},this.landmarks[_],{averageRating:parseFloat(f.toFixed(2)),visitCount:m,userRatings:c}));const y=this.userLandmarks.findIndex(w=>w.id===e);return y!==-1&&(this.userLandmarks[y]=Object.assign({},this.userLandmarks[y],{averageRating:parseFloat(f.toFixed(2)),visitCount:m,userRatings:c})),!0}catch(r){throw console.error("Error rating landmark:",r),r}},clearLandmarks(){this.landmarks=[],this.userLandmarks=[],this.lastVisible=null,this.hasMore=!0}}});/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function YM(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Ku=typeof window<"u",bs=(e,t=!1)=>t?Symbol.for(e):Symbol(e),QM=(e,t,n)=>XM({l:e,k:t,s:n}),XM=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ye=e=>typeof e=="number"&&isFinite(e),JM=e=>op(e)==="[object Date]",fa=e=>op(e)==="[object RegExp]",Fh=e=>Zt(e)&&Object.keys(e).length===0,tn=Object.assign,tN=Object.create,ve=(e=null)=>tN(e);let vy;const js=()=>vy||(vy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:ve());function wy(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Ey(e){return e.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function eN(e){return e=e.replace(/(\w+)\s*=\s*"([^"]*)"/g,(i,r,o)=>`${r}="${Ey(o)}"`),e=e.replace(/(\w+)\s*=\s*'([^']*)'/g,(i,r,o)=>`${r}='${Ey(o)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(e)&&(e=e.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(i=>{e=e.replace(i,"$1javascript&#58;")}),e}const nN=Object.prototype.hasOwnProperty;function _i(e,t){return nN.call(e,t)}const De=Array.isArray,Se=e=>typeof e=="function",Tt=e=>typeof e=="string",ae=e=>typeof e=="boolean",ce=e=>e!==null&&typeof e=="object",iN=e=>ce(e)&&Se(e.then)&&Se(e.catch),_I=Object.prototype.toString,op=e=>_I.call(e),Zt=e=>op(e)==="[object Object]",rN=e=>e==null?"":De(e)||Zt(e)&&e.toString===_I?JSON.stringify(e,null,2):String(e);function ap(e,t=""){return e.reduce((n,i,r)=>r===0?n+i:n+t+i,"")}const Qc=e=>!ce(e)||De(e);function pu(e,t){if(Qc(e)||Qc(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:i,des:r}=n.pop();Object.keys(i).forEach(o=>{o!=="__proto__"&&(ce(i[o])&&!ce(r[o])&&(r[o]=Array.isArray(i[o])?[]:ve()),Qc(r[o])||Qc(i[o])?r[o]=i[o]:n.push({src:i[o],des:r[o]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function sN(e,t,n){return{line:e,column:t,offset:n}}function Tf(e,t,n){return{start:e,end:t}}const me={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},oN=17;function Uh(e,t,n={}){const{domain:i,messages:r,args:o}=n,a=e,c=new SyntaxError(String(a));return c.code=e,t&&(c.location=t),c.domain=i,c}function aN(e){throw e}const xi=" ",lN="\r",mn=`
`,cN="\u2028",uN="\u2029";function hN(e){const t=e;let n=0,i=1,r=1,o=0;const a=S=>t[S]===lN&&t[S+1]===mn,c=S=>t[S]===mn,u=S=>t[S]===uN,f=S=>t[S]===cN,m=S=>a(S)||c(S)||u(S)||f(S),_=()=>n,y=()=>i,w=()=>r,b=()=>o,I=S=>a(S)||u(S)||f(S)?mn:t[S],M=()=>I(n),A=()=>I(n+o);function D(){return o=0,m(n)&&(i++,r=0),a(n)&&n++,n++,r++,t[n]}function B(){return a(n+o)&&o++,o++,t[n+o]}function z(){n=0,i=1,r=1,o=0}function Q(S=0){o=S}function rt(){const S=n+o;for(;S!==n;)D();o=0}return{index:_,line:y,column:w,peekOffset:b,charAt:I,currentChar:M,currentPeek:A,next:D,peek:B,reset:z,resetPeek:Q,skipToPeek:rt}}const pr=void 0,dN=".",Ty="'",fN="tokenizer";function mN(e,t={}){const n=t.location!==!1,i=hN(e),r=()=>i.index(),o=()=>sN(i.line(),i.column(),i.index()),a=o(),c=r(),u={currentType:13,offset:c,startLoc:a,endLoc:a,lastType:13,lastOffset:c,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},f=()=>u,{onError:m}=t;function _(k,R,H,...Z){const pt=f();if(R.column+=H,R.offset+=H,m){const ot=n?Tf(pt.startLoc,R):null,W=Uh(k,ot,{domain:fN,args:Z});m(W)}}function y(k,R,H){k.endLoc=o(),k.currentType=R;const Z={type:R};return n&&(Z.loc=Tf(k.startLoc,k.endLoc)),H!=null&&(Z.value=H),Z}const w=k=>y(k,13);function b(k,R){return k.currentChar()===R?(k.next(),R):(_(me.EXPECTED_TOKEN,o(),0,R),"")}function I(k){let R="";for(;k.currentPeek()===xi||k.currentPeek()===mn;)R+=k.currentPeek(),k.peek();return R}function M(k){const R=I(k);return k.skipToPeek(),R}function A(k){if(k===pr)return!1;const R=k.charCodeAt(0);return R>=97&&R<=122||R>=65&&R<=90||R===95}function D(k){if(k===pr)return!1;const R=k.charCodeAt(0);return R>=48&&R<=57}function B(k,R){const{currentType:H}=R;if(H!==2)return!1;I(k);const Z=A(k.currentPeek());return k.resetPeek(),Z}function z(k,R){const{currentType:H}=R;if(H!==2)return!1;I(k);const Z=k.currentPeek()==="-"?k.peek():k.currentPeek(),pt=D(Z);return k.resetPeek(),pt}function Q(k,R){const{currentType:H}=R;if(H!==2)return!1;I(k);const Z=k.currentPeek()===Ty;return k.resetPeek(),Z}function rt(k,R){const{currentType:H}=R;if(H!==7)return!1;I(k);const Z=k.currentPeek()===".";return k.resetPeek(),Z}function S(k,R){const{currentType:H}=R;if(H!==8)return!1;I(k);const Z=A(k.currentPeek());return k.resetPeek(),Z}function C(k,R){const{currentType:H}=R;if(!(H===7||H===11))return!1;I(k);const Z=k.currentPeek()===":";return k.resetPeek(),Z}function O(k,R){const{currentType:H}=R;if(H!==9)return!1;const Z=()=>{const ot=k.currentPeek();return ot==="{"?A(k.peek()):ot==="@"||ot==="|"||ot===":"||ot==="."||ot===xi||!ot?!1:ot===mn?(k.peek(),Z()):x(k,!1)},pt=Z();return k.resetPeek(),pt}function F(k){I(k);const R=k.currentPeek()==="|";return k.resetPeek(),R}function x(k,R=!0){const H=(pt=!1,ot="")=>{const W=k.currentPeek();return W==="{"||W==="@"||!W?pt:W==="|"?!(ot===xi||ot===mn):W===xi?(k.peek(),H(!0,xi)):W===mn?(k.peek(),H(!0,mn)):!0},Z=H();return R&&k.resetPeek(),Z}function j(k,R){const H=k.currentChar();return H===pr?pr:R(H)?(k.next(),H):null}function V(k){const R=k.charCodeAt(0);return R>=97&&R<=122||R>=65&&R<=90||R>=48&&R<=57||R===95||R===36}function Kt(k){return j(k,V)}function xe(k){const R=k.charCodeAt(0);return R>=97&&R<=122||R>=65&&R<=90||R>=48&&R<=57||R===95||R===36||R===45}function Ut(k){return j(k,xe)}function Lt(k){const R=k.charCodeAt(0);return R>=48&&R<=57}function dt(k){return j(k,Lt)}function we(k){const R=k.charCodeAt(0);return R>=48&&R<=57||R>=65&&R<=70||R>=97&&R<=102}function At(k){return j(k,we)}function zt(k){let R="",H="";for(;R=dt(k);)H+=R;return H}function Yt(k){let R="";for(;;){const H=k.currentChar();if(H==="{"||H==="}"||H==="@"||H==="|"||!H)break;if(H===xi||H===mn)if(x(k))R+=H,k.next();else{if(F(k))break;R+=H,k.next()}else R+=H,k.next()}return R}function ye(k){M(k);let R="",H="";for(;R=Ut(k);)H+=R;const Z=k.currentChar();if(Z&&Z!=="}"&&Z!==pr&&Z!==xi&&Z!==mn&&Z!=="　"){const pt=wt(k);return _(me.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,H+pt),H+pt}return k.currentChar()===pr&&_(me.UNTERMINATED_CLOSING_BRACE,o(),0),H}function Qt(k){M(k);let R="";return k.currentChar()==="-"?(k.next(),R+=`-${zt(k)}`):R+=zt(k),k.currentChar()===pr&&_(me.UNTERMINATED_CLOSING_BRACE,o(),0),R}function Ht(k){return k!==Ty&&k!==mn}function Ct(k){M(k),b(k,"'");let R="",H="";for(;R=j(k,Ht);)R==="\\"?H+=tt(k):H+=R;const Z=k.currentChar();return Z===mn||Z===pr?(_(me.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,o(),0),Z===mn&&(k.next(),b(k,"'")),H):(b(k,"'"),H)}function tt(k){const R=k.currentChar();switch(R){case"\\":case"'":return k.next(),`\\${R}`;case"u":return ut(k,R,4);case"U":return ut(k,R,6);default:return _(me.UNKNOWN_ESCAPE_SEQUENCE,o(),0,R),""}}function ut(k,R,H){b(k,R);let Z="";for(let pt=0;pt<H;pt++){const ot=At(k);if(!ot){_(me.INVALID_UNICODE_ESCAPE_SEQUENCE,o(),0,`\\${R}${Z}${k.currentChar()}`);break}Z+=ot}return`\\${R}${Z}`}function ft(k){return k!=="{"&&k!=="}"&&k!==xi&&k!==mn}function wt(k){M(k);let R="",H="";for(;R=j(k,ft);)H+=R;return H}function Gt(k){let R="",H="";for(;R=Kt(k);)H+=R;return H}function N(k){const R=H=>{const Z=k.currentChar();return Z==="{"||Z==="@"||Z==="|"||Z==="("||Z===")"||!Z||Z===xi?H:(H+=Z,k.next(),R(H))};return R("")}function U(k){M(k);const R=b(k,"|");return M(k),R}function q(k,R){let H=null;switch(k.currentChar()){case"{":return R.braceNest>=1&&_(me.NOT_ALLOW_NEST_PLACEHOLDER,o(),0),k.next(),H=y(R,2,"{"),M(k),R.braceNest++,H;case"}":return R.braceNest>0&&R.currentType===2&&_(me.EMPTY_PLACEHOLDER,o(),0),k.next(),H=y(R,3,"}"),R.braceNest--,R.braceNest>0&&M(k),R.inLinked&&R.braceNest===0&&(R.inLinked=!1),H;case"@":return R.braceNest>0&&_(me.UNTERMINATED_CLOSING_BRACE,o(),0),H=it(k,R)||w(R),R.braceNest=0,H;default:{let pt=!0,ot=!0,W=!0;if(F(k))return R.braceNest>0&&_(me.UNTERMINATED_CLOSING_BRACE,o(),0),H=y(R,1,U(k)),R.braceNest=0,R.inLinked=!1,H;if(R.braceNest>0&&(R.currentType===4||R.currentType===5||R.currentType===6))return _(me.UNTERMINATED_CLOSING_BRACE,o(),0),R.braceNest=0,st(k,R);if(pt=B(k,R))return H=y(R,4,ye(k)),M(k),H;if(ot=z(k,R))return H=y(R,5,Qt(k)),M(k),H;if(W=Q(k,R))return H=y(R,6,Ct(k)),M(k),H;if(!pt&&!ot&&!W)return H=y(R,12,wt(k)),_(me.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,H.value),M(k),H;break}}return H}function it(k,R){const{currentType:H}=R;let Z=null;const pt=k.currentChar();switch((H===7||H===8||H===11||H===9)&&(pt===mn||pt===xi)&&_(me.INVALID_LINKED_FORMAT,o(),0),pt){case"@":return k.next(),Z=y(R,7,"@"),R.inLinked=!0,Z;case".":return M(k),k.next(),y(R,8,".");case":":return M(k),k.next(),y(R,9,":");default:return F(k)?(Z=y(R,1,U(k)),R.braceNest=0,R.inLinked=!1,Z):rt(k,R)||C(k,R)?(M(k),it(k,R)):S(k,R)?(M(k),y(R,11,Gt(k))):O(k,R)?(M(k),pt==="{"?q(k,R)||Z:y(R,10,N(k))):(H===7&&_(me.INVALID_LINKED_FORMAT,o(),0),R.braceNest=0,R.inLinked=!1,st(k,R))}}function st(k,R){let H={type:13};if(R.braceNest>0)return q(k,R)||w(R);if(R.inLinked)return it(k,R)||w(R);switch(k.currentChar()){case"{":return q(k,R)||w(R);case"}":return _(me.UNBALANCED_CLOSING_BRACE,o(),0),k.next(),y(R,3,"}");case"@":return it(k,R)||w(R);default:{if(F(k))return H=y(R,1,U(k)),R.braceNest=0,R.inLinked=!1,H;if(x(k))return y(R,0,Yt(k));break}}return H}function et(){const{currentType:k,offset:R,startLoc:H,endLoc:Z}=u;return u.lastType=k,u.lastOffset=R,u.lastStartLoc=H,u.lastEndLoc=Z,u.offset=r(),u.startLoc=o(),i.currentChar()===pr?y(u,13):st(i,u)}return{nextToken:et,currentOffset:r,currentPosition:o,context:f}}const pN="parser",_N=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function gN(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||n,16);return i<=55295||i>=57344?String.fromCodePoint(i):"�"}}}function yN(e={}){const t=e.location!==!1,{onError:n}=e;function i(A,D,B,z,...Q){const rt=A.currentPosition();if(rt.offset+=z,rt.column+=z,n){const S=t?Tf(B,rt):null,C=Uh(D,S,{domain:pN,args:Q});n(C)}}function r(A,D,B){const z={type:A};return t&&(z.start=D,z.end=D,z.loc={start:B,end:B}),z}function o(A,D,B,z){t&&(A.end=D,A.loc&&(A.loc.end=B))}function a(A,D){const B=A.context(),z=r(3,B.offset,B.startLoc);return z.value=D,o(z,A.currentOffset(),A.currentPosition()),z}function c(A,D){const B=A.context(),{lastOffset:z,lastStartLoc:Q}=B,rt=r(5,z,Q);return rt.index=parseInt(D,10),A.nextToken(),o(rt,A.currentOffset(),A.currentPosition()),rt}function u(A,D){const B=A.context(),{lastOffset:z,lastStartLoc:Q}=B,rt=r(4,z,Q);return rt.key=D,A.nextToken(),o(rt,A.currentOffset(),A.currentPosition()),rt}function f(A,D){const B=A.context(),{lastOffset:z,lastStartLoc:Q}=B,rt=r(9,z,Q);return rt.value=D.replace(_N,gN),A.nextToken(),o(rt,A.currentOffset(),A.currentPosition()),rt}function m(A){const D=A.nextToken(),B=A.context(),{lastOffset:z,lastStartLoc:Q}=B,rt=r(8,z,Q);return D.type!==11?(i(A,me.UNEXPECTED_EMPTY_LINKED_MODIFIER,B.lastStartLoc,0),rt.value="",o(rt,z,Q),{nextConsumeToken:D,node:rt}):(D.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,Mi(D)),rt.value=D.value||"",o(rt,A.currentOffset(),A.currentPosition()),{node:rt})}function _(A,D){const B=A.context(),z=r(7,B.offset,B.startLoc);return z.value=D,o(z,A.currentOffset(),A.currentPosition()),z}function y(A){const D=A.context(),B=r(6,D.offset,D.startLoc);let z=A.nextToken();if(z.type===8){const Q=m(A);B.modifier=Q.node,z=Q.nextConsumeToken||A.nextToken()}switch(z.type!==9&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(z)),z=A.nextToken(),z.type===2&&(z=A.nextToken()),z.type){case 10:z.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(z)),B.key=_(A,z.value||"");break;case 4:z.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(z)),B.key=u(A,z.value||"");break;case 5:z.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(z)),B.key=c(A,z.value||"");break;case 6:z.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(z)),B.key=f(A,z.value||"");break;default:{i(A,me.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const Q=A.context(),rt=r(7,Q.offset,Q.startLoc);return rt.value="",o(rt,Q.offset,Q.startLoc),B.key=rt,o(B,Q.offset,Q.startLoc),{nextConsumeToken:z,node:B}}}return o(B,A.currentOffset(),A.currentPosition()),{node:B}}function w(A){const D=A.context(),B=D.currentType===1?A.currentOffset():D.offset,z=D.currentType===1?D.endLoc:D.startLoc,Q=r(2,B,z);Q.items=[];let rt=null;do{const O=rt||A.nextToken();switch(rt=null,O.type){case 0:O.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(O)),Q.items.push(a(A,O.value||""));break;case 5:O.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(O)),Q.items.push(c(A,O.value||""));break;case 4:O.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(O)),Q.items.push(u(A,O.value||""));break;case 6:O.value==null&&i(A,me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Mi(O)),Q.items.push(f(A,O.value||""));break;case 7:{const F=y(A);Q.items.push(F.node),rt=F.nextConsumeToken||null;break}}}while(D.currentType!==13&&D.currentType!==1);const S=D.currentType===1?D.lastOffset:A.currentOffset(),C=D.currentType===1?D.lastEndLoc:A.currentPosition();return o(Q,S,C),Q}function b(A,D,B,z){const Q=A.context();let rt=z.items.length===0;const S=r(1,D,B);S.cases=[],S.cases.push(z);do{const C=w(A);rt||(rt=C.items.length===0),S.cases.push(C)}while(Q.currentType!==13);return rt&&i(A,me.MUST_HAVE_MESSAGES_IN_PLURAL,B,0),o(S,A.currentOffset(),A.currentPosition()),S}function I(A){const D=A.context(),{offset:B,startLoc:z}=D,Q=w(A);return D.currentType===13?Q:b(A,B,z,Q)}function M(A){const D=mN(A,tn({},e)),B=D.context(),z=r(0,B.offset,B.startLoc);return t&&z.loc&&(z.loc.source=A),z.body=I(D),e.onCacheKey&&(z.cacheKey=e.onCacheKey(A)),B.currentType!==13&&i(D,me.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,A[B.offset]||""),o(z,D.currentOffset(),D.currentPosition()),z}return{parse:M}}function Mi(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function vN(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:o=>(n.helpers.add(o),o)}}function Iy(e,t){for(let n=0;n<e.length;n++)lp(e[n],t)}function lp(e,t){switch(e.type){case 1:Iy(e.cases,t),t.helper("plural");break;case 2:Iy(e.items,t);break;case 6:{lp(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function wN(e,t={}){const n=vN(e);n.helper("normalize"),e.body&&lp(e.body,n);const i=n.context();e.helpers=Array.from(i.helpers)}function EN(e){const t=e.body;return t.type===2?by(t):t.cases.forEach(n=>by(n)),e}function by(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const i=e.items[n];if(!(i.type===3||i.type===9)||i.value==null)break;t.push(i.value)}if(t.length===e.items.length){e.static=ap(t);for(let n=0;n<e.items.length;n++){const i=e.items[n];(i.type===3||i.type===9)&&delete i.value}}}}function jo(e){switch(e.t=e.type,e.type){case 0:{const t=e;jo(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let i=0;i<n.length;i++)jo(n[i]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let i=0;i<n.length;i++)jo(n[i]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;jo(t.key),t.k=t.key,delete t.key,t.modifier&&(jo(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function TN(e,t){const{filename:n,breakLineCode:i,needIndent:r}=t,o=t.location!==!1,a={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:r,indentLevel:0};o&&e.loc&&(a.source=e.loc.source);const c=()=>a;function u(I,M){a.code+=I}function f(I,M=!0){const A=M?i:"";u(r?A+"  ".repeat(I):A)}function m(I=!0){const M=++a.indentLevel;I&&f(M)}function _(I=!0){const M=--a.indentLevel;I&&f(M)}function y(){f(a.indentLevel)}return{context:c,push:u,indent:m,deindent:_,newline:y,helper:I=>`_${I}`,needIndent:()=>a.needIndent}}function IN(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),ma(e,t.key),t.modifier?(e.push(", "),ma(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function bN(e,t){const{helper:n,needIndent:i}=e;e.push(`${n("normalize")}([`),e.indent(i());const r=t.items.length;for(let o=0;o<r&&(ma(e,t.items[o]),o!==r-1);o++)e.push(", ");e.deindent(i()),e.push("])")}function PN(e,t){const{helper:n,needIndent:i}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(i());const r=t.cases.length;for(let o=0;o<r&&(ma(e,t.cases[o]),o!==r-1);o++)e.push(", ");e.deindent(i()),e.push("])")}}function AN(e,t){t.body?ma(e,t.body):e.push("null")}function ma(e,t){const{helper:n}=e;switch(t.type){case 0:AN(e,t);break;case 1:PN(e,t);break;case 2:bN(e,t);break;case 6:IN(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const SN=(e,t={})=>{const n=Tt(t.mode)?t.mode:"normal",i=Tt(t.filename)?t.filename:"message.intl";t.sourceMap;const r=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,o=t.needIndent?t.needIndent:n!=="arrow",a=e.helpers||[],c=TN(e,{filename:i,breakLineCode:r,needIndent:o});c.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(o),a.length>0&&(c.push(`const { ${ap(a.map(m=>`${m}: _${m}`),", ")} } = ctx`),c.newline()),c.push("return "),ma(c,e),c.deindent(o),c.push("}"),delete e.helpers;const{code:u,map:f}=c.context();return{ast:e,code:u,map:f?f.toJSON():void 0}};function CN(e,t={}){const n=tn({},t),i=!!n.jit,r=!!n.minify,o=n.optimize==null?!0:n.optimize,c=yN(n).parse(e);return i?(o&&EN(c),r&&jo(c),{ast:c,code:""}):(wN(c,n),SN(c,n))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function kN(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(js().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(js().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Yi(e){return ce(e)&&cp(e)===0&&(_i(e,"b")||_i(e,"body"))}const gI=["b","body"];function LN(e){return Ps(e,gI)}const yI=["c","cases"];function RN(e){return Ps(e,yI,[])}const vI=["s","static"];function ON(e){return Ps(e,vI)}const wI=["i","items"];function xN(e){return Ps(e,wI,[])}const EI=["t","type"];function cp(e){return Ps(e,EI)}const TI=["v","value"];function Xc(e,t){const n=Ps(e,TI);if(n!=null)return n;throw Bl(t)}const II=["m","modifier"];function MN(e){return Ps(e,II)}const bI=["k","key"];function NN(e){const t=Ps(e,bI);if(t)return t;throw Bl(6)}function Ps(e,t,n){for(let i=0;i<t.length;i++){const r=t[i];if(_i(e,r)&&e[r]!=null)return e[r]}return n}const PI=[...gI,...yI,...vI,...wI,...bI,...II,...TI,...EI];function Bl(e){return new Error(`unhandled node type: ${e}`)}function kd(e){return n=>DN(n,e)}function DN(e,t){const n=LN(t);if(n==null)throw Bl(0);if(cp(n)===1){const o=RN(n);return e.plural(o.reduce((a,c)=>[...a,Py(e,c)],[]))}else return Py(e,n)}function Py(e,t){const n=ON(t);if(n!=null)return e.type==="text"?n:e.normalize([n]);{const i=xN(t).reduce((r,o)=>[...r,If(e,o)],[]);return e.normalize(i)}}function If(e,t){const n=cp(t);switch(n){case 3:return Xc(t,n);case 9:return Xc(t,n);case 4:{const i=t;if(_i(i,"k")&&i.k)return e.interpolate(e.named(i.k));if(_i(i,"key")&&i.key)return e.interpolate(e.named(i.key));throw Bl(n)}case 5:{const i=t;if(_i(i,"i")&&Ye(i.i))return e.interpolate(e.list(i.i));if(_i(i,"index")&&Ye(i.index))return e.interpolate(e.list(i.index));throw Bl(n)}case 6:{const i=t,r=MN(i),o=NN(i);return e.linked(If(e,o),r?If(e,r):void 0,e.type)}case 7:return Xc(t,n);case 8:return Xc(t,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const VN=e=>e;let Jc=ve();function FN(e,t={}){let n=!1;const i=t.onError||aN;return t.onError=r=>{n=!0,i(r)},{...CN(e,t),detectError:n}}function UN(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Tt(e)){ae(t.warnHtmlMessage)&&t.warnHtmlMessage;const i=(t.onCacheKey||VN)(e),r=Jc[i];if(r)return r;const{ast:o,detectError:a}=FN(e,{...t,location:!1,jit:!0}),c=kd(o);return a?c:Jc[i]=c}else{const n=e.cacheKey;if(n){const i=Jc[n];return i||(Jc[n]=kd(e))}else return kd(e)}}let $l=null;function BN(e){$l=e}function $N(e,t,n){$l&&$l.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const zN=jN("function:translate");function jN(e){return t=>$l&&$l.emit(e,t)}const Tr={INVALID_ARGUMENT:oN,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},HN=24;function Ir(e){return Uh(e,null,void 0)}function up(e,t){return t.locale!=null?Ay(t.locale):Ay(e.locale)}let Ld;function Ay(e){if(Tt(e))return e;if(Se(e)){if(e.resolvedOnce&&Ld!=null)return Ld;if(e.constructor.name==="Function"){const t=e();if(iN(t))throw Ir(Tr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ld=t}else throw Ir(Tr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Ir(Tr.NOT_SUPPORT_LOCALE_TYPE)}function WN(e,t,n){return[...new Set([n,...De(t)?t:ce(t)?Object.keys(t):Tt(t)?[t]:[n]])]}function AI(e,t,n){const i=Tt(n)?n:zl,r=e;r.__localeChainCache||(r.__localeChainCache=new Map);let o=r.__localeChainCache.get(i);if(!o){o=[];let a=[n];for(;De(a);)a=Sy(o,a,t);const c=De(t)||!Zt(t)?t:t.default?t.default:null;a=Tt(c)?[c]:c,De(a)&&Sy(o,a,!1),r.__localeChainCache.set(i,o)}return o}function Sy(e,t,n){let i=!0;for(let r=0;r<t.length&&ae(i);r++){const o=t[r];Tt(o)&&(i=qN(e,t[r],n))}return i}function qN(e,t,n){let i;const r=t.split("-");do{const o=r.join("-");i=GN(e,o,n),r.splice(-1,1)}while(r.length&&i===!0);return i}function GN(e,t,n){let i=!1;if(!e.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const r=t.replace(/!/g,"");e.push(r),(De(n)||Zt(n))&&n[r]&&(i=n[r])}return i}const As=[];As[0]={w:[0],i:[3,0],"[":[4],o:[7]};As[1]={w:[1],".":[2],"[":[4],o:[7]};As[2]={w:[2],i:[3,0],0:[3,0]};As[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};As[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};As[5]={"'":[4,0],o:8,l:[5,0]};As[6]={'"':[4,0],o:8,l:[6,0]};const ZN=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function KN(e){return ZN.test(e)}function YN(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function QN(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function XN(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:KN(t)?YN(t):"*"+t}function JN(e){const t=[];let n=-1,i=0,r=0,o,a,c,u,f,m,_;const y=[];y[0]=()=>{a===void 0?a=c:a+=c},y[1]=()=>{a!==void 0&&(t.push(a),a=void 0)},y[2]=()=>{y[0](),r++},y[3]=()=>{if(r>0)r--,i=4,y[0]();else{if(r=0,a===void 0||(a=XN(a),a===!1))return!1;y[1]()}};function w(){const b=e[n+1];if(i===5&&b==="'"||i===6&&b==='"')return n++,c="\\"+b,y[0](),!0}for(;i!==null;)if(n++,o=e[n],!(o==="\\"&&w())){if(u=QN(o),_=As[i],f=_[u]||_.l||8,f===8||(i=f[0],f[1]!==void 0&&(m=y[f[1]],m&&(c=o,m()===!1))))return;if(i===7)return t}}const Cy=new Map;function tD(e,t){return ce(e)?e[t]:null}function eD(e,t){if(!ce(e))return null;let n=Cy.get(t);if(n||(n=JN(t),n&&Cy.set(t,n)),!n)return null;const i=n.length;let r=e,o=0;for(;o<i;){const a=n[o];if(PI.includes(a)&&Yi(r))return null;const c=r[a];if(c===void 0||Se(r))return null;r=c,o++}return r}const nD="11.1.12",Bh=-1,zl="en-US",ky="",Ly=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function iD(){return{upper:(e,t)=>t==="text"&&Tt(e)?e.toUpperCase():t==="vnode"&&ce(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Tt(e)?e.toLowerCase():t==="vnode"&&ce(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Tt(e)?Ly(e):t==="vnode"&&ce(e)&&"__v_isVNode"in e?Ly(e.children):e}}let SI;function rD(e){SI=e}let CI;function sD(e){CI=e}let kI;function oD(e){kI=e}let LI=null;const aD=e=>{LI=e},lD=()=>LI;let RI=null;const Ry=e=>{RI=e},cD=()=>RI;let Oy=0;function uD(e={}){const t=Se(e.onWarn)?e.onWarn:YM,n=Tt(e.version)?e.version:nD,i=Tt(e.locale)||Se(e.locale)?e.locale:zl,r=Se(i)?zl:i,o=De(e.fallbackLocale)||Zt(e.fallbackLocale)||Tt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r,a=Zt(e.messages)?e.messages:Rd(r),c=Zt(e.datetimeFormats)?e.datetimeFormats:Rd(r),u=Zt(e.numberFormats)?e.numberFormats:Rd(r),f=tn(ve(),e.modifiers,iD()),m=e.pluralRules||ve(),_=Se(e.missing)?e.missing:null,y=ae(e.missingWarn)||fa(e.missingWarn)?e.missingWarn:!0,w=ae(e.fallbackWarn)||fa(e.fallbackWarn)?e.fallbackWarn:!0,b=!!e.fallbackFormat,I=!!e.unresolving,M=Se(e.postTranslation)?e.postTranslation:null,A=Zt(e.processor)?e.processor:null,D=ae(e.warnHtmlMessage)?e.warnHtmlMessage:!0,B=!!e.escapeParameter,z=Se(e.messageCompiler)?e.messageCompiler:SI,Q=Se(e.messageResolver)?e.messageResolver:CI||tD,rt=Se(e.localeFallbacker)?e.localeFallbacker:kI||WN,S=ce(e.fallbackContext)?e.fallbackContext:void 0,C=e,O=ce(C.__datetimeFormatters)?C.__datetimeFormatters:new Map,F=ce(C.__numberFormatters)?C.__numberFormatters:new Map,x=ce(C.__meta)?C.__meta:{};Oy++;const j={version:n,cid:Oy,locale:i,fallbackLocale:o,messages:a,modifiers:f,pluralRules:m,missing:_,missingWarn:y,fallbackWarn:w,fallbackFormat:b,unresolving:I,postTranslation:M,processor:A,warnHtmlMessage:D,escapeParameter:B,messageCompiler:z,messageResolver:Q,localeFallbacker:rt,fallbackContext:S,onWarn:t,__meta:x};return j.datetimeFormats=c,j.numberFormats=u,j.__datetimeFormatters=O,j.__numberFormatters=F,__INTLIFY_PROD_DEVTOOLS__&&$N(j,n,x),j}const Rd=e=>({[e]:ve()});function hp(e,t,n,i,r){const{missing:o,onWarn:a}=e;if(o!==null){const c=o(e,n,t,r);return Tt(c)?c:t}else return t}function Ya(e,t,n){const i=e;i.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function hD(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function dD(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let i=n+1;i<t.length;i++)if(hD(e,t[i]))return!0;return!1}function xy(e,...t){const{datetimeFormats:n,unresolving:i,fallbackLocale:r,onWarn:o,localeFallbacker:a}=e,{__datetimeFormatters:c}=e,[u,f,m,_]=bf(...t),y=ae(m.missingWarn)?m.missingWarn:e.missingWarn;ae(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const w=!!m.part,b=up(e,m),I=a(e,r,b);if(!Tt(u)||u==="")return new Intl.DateTimeFormat(b,_).format(f);let M={},A,D=null;const B="datetime format";for(let rt=0;rt<I.length&&(A=I[rt],M=n[A]||{},D=M[u],!Zt(D));rt++)hp(e,u,A,y,B);if(!Zt(D)||!Tt(A))return i?Bh:u;let z=`${A}__${u}`;Fh(_)||(z=`${z}__${JSON.stringify(_)}`);let Q=c.get(z);return Q||(Q=new Intl.DateTimeFormat(A,tn({},D,_)),c.set(z,Q)),w?Q.formatToParts(f):Q.format(f)}const OI=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function bf(...e){const[t,n,i,r]=e,o=ve();let a=ve(),c;if(Tt(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw Ir(Tr.INVALID_ISO_DATE_ARGUMENT);const f=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();c=new Date(f);try{c.toISOString()}catch{throw Ir(Tr.INVALID_ISO_DATE_ARGUMENT)}}else if(JM(t)){if(isNaN(t.getTime()))throw Ir(Tr.INVALID_DATE_ARGUMENT);c=t}else if(Ye(t))c=t;else throw Ir(Tr.INVALID_ARGUMENT);return Tt(n)?o.key=n:Zt(n)&&Object.keys(n).forEach(u=>{OI.includes(u)?a[u]=n[u]:o[u]=n[u]}),Tt(i)?o.locale=i:Zt(i)&&(a=i),Zt(r)&&(a=r),[o.key||"",c,o,a]}function My(e,t,n){const i=e;for(const r in n){const o=`${t}__${r}`;i.__datetimeFormatters.has(o)&&i.__datetimeFormatters.delete(o)}}function Ny(e,...t){const{numberFormats:n,unresolving:i,fallbackLocale:r,onWarn:o,localeFallbacker:a}=e,{__numberFormatters:c}=e,[u,f,m,_]=Pf(...t),y=ae(m.missingWarn)?m.missingWarn:e.missingWarn;ae(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const w=!!m.part,b=up(e,m),I=a(e,r,b);if(!Tt(u)||u==="")return new Intl.NumberFormat(b,_).format(f);let M={},A,D=null;const B="number format";for(let rt=0;rt<I.length&&(A=I[rt],M=n[A]||{},D=M[u],!Zt(D));rt++)hp(e,u,A,y,B);if(!Zt(D)||!Tt(A))return i?Bh:u;let z=`${A}__${u}`;Fh(_)||(z=`${z}__${JSON.stringify(_)}`);let Q=c.get(z);return Q||(Q=new Intl.NumberFormat(A,tn({},D,_)),c.set(z,Q)),w?Q.formatToParts(f):Q.format(f)}const xI=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Pf(...e){const[t,n,i,r]=e,o=ve();let a=ve();if(!Ye(t))throw Ir(Tr.INVALID_ARGUMENT);const c=t;return Tt(n)?o.key=n:Zt(n)&&Object.keys(n).forEach(u=>{xI.includes(u)?a[u]=n[u]:o[u]=n[u]}),Tt(i)?o.locale=i:Zt(i)&&(a=i),Zt(r)&&(a=r),[o.key||"",c,o,a]}function Dy(e,t,n){const i=e;for(const r in n){const o=`${t}__${r}`;i.__numberFormatters.has(o)&&i.__numberFormatters.delete(o)}}const fD=e=>e,mD=e=>"",pD="text",_D=e=>e.length===0?"":ap(e),gD=rN;function Vy(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function yD(e){const t=Ye(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Ye(e.named.count)||Ye(e.named.n))?Ye(e.named.count)?e.named.count:Ye(e.named.n)?e.named.n:t:t}function vD(e,t){t.count||(t.count=e),t.n||(t.n=e)}function wD(e={}){const t=e.locale,n=yD(e),i=ce(e.pluralRules)&&Tt(t)&&Se(e.pluralRules[t])?e.pluralRules[t]:Vy,r=ce(e.pluralRules)&&Tt(t)&&Se(e.pluralRules[t])?Vy:void 0,o=A=>A[i(n,A.length,r)],a=e.list||[],c=A=>a[A],u=e.named||ve();Ye(e.pluralIndex)&&vD(n,u);const f=A=>u[A];function m(A,D){const B=Se(e.messages)?e.messages(A,!!D):ce(e.messages)?e.messages[A]:!1;return B||(e.parent?e.parent.message(A):mD)}const _=A=>e.modifiers?e.modifiers[A]:fD,y=Zt(e.processor)&&Se(e.processor.normalize)?e.processor.normalize:_D,w=Zt(e.processor)&&Se(e.processor.interpolate)?e.processor.interpolate:gD,b=Zt(e.processor)&&Tt(e.processor.type)?e.processor.type:pD,M={list:c,named:f,plural:o,linked:(A,...D)=>{const[B,z]=D;let Q="text",rt="";D.length===1?ce(B)?(rt=B.modifier||rt,Q=B.type||Q):Tt(B)&&(rt=B||rt):D.length===2&&(Tt(B)&&(rt=B||rt),Tt(z)&&(Q=z||Q));const S=m(A,!0)(M),C=Q==="vnode"&&De(S)&&rt?S[0]:S;return rt?_(rt)(C,Q):C},message:m,type:b,interpolate:w,normalize:y,values:tn(ve(),a,u)};return M}const Fy=()=>"",ri=e=>Se(e);function Uy(e,...t){const{fallbackFormat:n,postTranslation:i,unresolving:r,messageCompiler:o,fallbackLocale:a,messages:c}=e,[u,f]=Af(...t),m=ae(f.missingWarn)?f.missingWarn:e.missingWarn,_=ae(f.fallbackWarn)?f.fallbackWarn:e.fallbackWarn,y=ae(f.escapeParameter)?f.escapeParameter:e.escapeParameter,w=!!f.resolvedMessage,b=Tt(f.default)||ae(f.default)?ae(f.default)?o?u:()=>u:f.default:n?o?u:()=>u:null,I=n||b!=null&&(Tt(b)||Se(b)),M=up(e,f);y&&ED(f);let[A,D,B]=w?[u,M,c[M]||ve()]:MI(e,u,M,a,_,m),z=A,Q=u;if(!w&&!(Tt(z)||Yi(z)||ri(z))&&I&&(z=b,Q=z),!w&&(!(Tt(z)||Yi(z)||ri(z))||!Tt(D)))return r?Bh:u;let rt=!1;const S=()=>{rt=!0},C=ri(z)?z:NI(e,u,D,z,Q,S);if(rt)return z;const O=bD(e,D,B,f),F=wD(O),x=TD(e,C,F);let j=i?i(x,u):x;if(y&&Tt(j)&&(j=eN(j)),__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:Tt(u)?u:ri(z)?z.key:"",locale:D||(ri(z)?z.locale:""),format:Tt(z)?z:ri(z)?z.source:"",message:j};V.meta=tn({},e.__meta,lD()||{}),zN(V)}return j}function ED(e){De(e.list)?e.list=e.list.map(t=>Tt(t)?wy(t):t):ce(e.named)&&Object.keys(e.named).forEach(t=>{Tt(e.named[t])&&(e.named[t]=wy(e.named[t]))})}function MI(e,t,n,i,r,o){const{messages:a,onWarn:c,messageResolver:u,localeFallbacker:f}=e,m=f(e,i,n);let _=ve(),y,w=null;const b="translate";for(let I=0;I<m.length&&(y=m[I],_=a[y]||ve(),(w=u(_,t))===null&&(w=_[t]),!(Tt(w)||Yi(w)||ri(w)));I++)if(!dD(y,m)){const M=hp(e,t,y,o,b);M!==t&&(w=M)}return[w,y,_]}function NI(e,t,n,i,r,o){const{messageCompiler:a,warnHtmlMessage:c}=e;if(ri(i)){const f=i;return f.locale=f.locale||n,f.key=f.key||t,f}if(a==null){const f=(()=>i);return f.locale=n,f.key=t,f}const u=a(i,ID(e,n,r,i,c,o));return u.locale=n,u.key=t,u.source=i,u}function TD(e,t,n){return t(n)}function Af(...e){const[t,n,i]=e,r=ve();if(!Tt(t)&&!Ye(t)&&!ri(t)&&!Yi(t))throw Ir(Tr.INVALID_ARGUMENT);const o=Ye(t)?String(t):(ri(t),t);return Ye(n)?r.plural=n:Tt(n)?r.default=n:Zt(n)&&!Fh(n)?r.named=n:De(n)&&(r.list=n),Ye(i)?r.plural=i:Tt(i)?r.default=i:Zt(i)&&tn(r,i),[o,r]}function ID(e,t,n,i,r,o){return{locale:t,key:n,warnHtmlMessage:r,onError:a=>{throw o&&o(a),a},onCacheKey:a=>QM(t,n,a)}}function bD(e,t,n,i){const{modifiers:r,pluralRules:o,messageResolver:a,fallbackLocale:c,fallbackWarn:u,missingWarn:f,fallbackContext:m}=e,y={locale:t,modifiers:r,pluralRules:o,messages:(w,b)=>{let I=a(n,w);if(I==null&&(m||b)){const[,,M]=MI(m||e,w,t,c,u,f);I=a(M,w)}if(Tt(I)||Yi(I)){let M=!1;const D=NI(e,w,t,I,w,()=>{M=!0});return M?Fy:D}else return ri(I)?I:Fy}};return e.processor&&(y.processor=e.processor),i.list&&(y.list=i.list),i.named&&(y.named=i.named),Ye(i.plural)&&(y.pluralIndex=i.plural),y}kN();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const PD="11.1.12";function AD(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(js().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(js().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(js().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(js().__INTLIFY_PROD_DEVTOOLS__=!1)}const Fn={UNEXPECTED_RETURN_TYPE:HN,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Kn(e,...t){return Uh(e,null,void 0)}const Sf=bs("__translateVNode"),Cf=bs("__datetimeParts"),kf=bs("__numberParts"),DI=bs("__setPluralRules"),VI=bs("__injectWithOption"),Lf=bs("__dispose");function jl(e){if(!ce(e)||Yi(e))return e;for(const t in e)if(_i(e,t))if(!t.includes("."))ce(e[t])&&jl(e[t]);else{const n=t.split("."),i=n.length-1;let r=e,o=!1;for(let a=0;a<i;a++){if(n[a]==="__proto__")throw new Error(`unsafe key: ${n[a]}`);if(n[a]in r||(r[n[a]]=ve()),!ce(r[n[a]])){o=!0;break}r=r[n[a]]}if(o||(Yi(r)?PI.includes(n[i])||delete e[t]:(r[n[i]]=e[t],delete e[t])),!Yi(r)){const a=r[n[i]];ce(a)&&jl(a)}}return e}function dp(e,t){const{messages:n,__i18n:i,messageResolver:r,flatJson:o}=t,a=Zt(n)?n:De(i)?ve():{[e]:ve()};if(De(i)&&i.forEach(c=>{if("locale"in c&&"resource"in c){const{locale:u,resource:f}=c;u?(a[u]=a[u]||ve(),pu(f,a[u])):pu(f,a)}else Tt(c)&&pu(JSON.parse(c),a)}),r==null&&o)for(const c in a)_i(a,c)&&jl(a[c]);return a}function FI(e){return e.type}function UI(e,t,n){let i=ce(t.messages)?t.messages:ve();"__i18nGlobal"in n&&(i=dp(e.locale.value,{messages:i,__i18n:n.__i18nGlobal}));const r=Object.keys(i);r.length&&r.forEach(o=>{e.mergeLocaleMessage(o,i[o])});{if(ce(t.datetimeFormats)){const o=Object.keys(t.datetimeFormats);o.length&&o.forEach(a=>{e.mergeDateTimeFormat(a,t.datetimeFormats[a])})}if(ce(t.numberFormats)){const o=Object.keys(t.numberFormats);o.length&&o.forEach(a=>{e.mergeNumberFormat(a,t.numberFormats[a])})}}}function By(e){return Ft(ql,null,e,0)}const $y="__INTLIFY_META__",zy=()=>[],SD=()=>!1;let jy=0;function Hy(e){return((t,n,i,r)=>e(n,i,ls()||void 0,r))}const CD=()=>{const e=ls();let t=null;return e&&(t=FI(e)[$y])?{[$y]:t}:null};function fp(e={}){const{__root:t,__injectWithOption:n}=e,i=t===void 0,r=e.flatJson,o=Ku?Le:Sv;let a=ae(e.inheritLocale)?e.inheritLocale:!0;const c=o(t&&a?t.locale.value:Tt(e.locale)?e.locale:zl),u=o(t&&a?t.fallbackLocale.value:Tt(e.fallbackLocale)||De(e.fallbackLocale)||Zt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:c.value),f=o(dp(c.value,e)),m=o(Zt(e.datetimeFormats)?e.datetimeFormats:{[c.value]:{}}),_=o(Zt(e.numberFormats)?e.numberFormats:{[c.value]:{}});let y=t?t.missingWarn:ae(e.missingWarn)||fa(e.missingWarn)?e.missingWarn:!0,w=t?t.fallbackWarn:ae(e.fallbackWarn)||fa(e.fallbackWarn)?e.fallbackWarn:!0,b=t?t.fallbackRoot:ae(e.fallbackRoot)?e.fallbackRoot:!0,I=!!e.fallbackFormat,M=Se(e.missing)?e.missing:null,A=Se(e.missing)?Hy(e.missing):null,D=Se(e.postTranslation)?e.postTranslation:null,B=t?t.warnHtmlMessage:ae(e.warnHtmlMessage)?e.warnHtmlMessage:!0,z=!!e.escapeParameter;const Q=t?t.modifiers:Zt(e.modifiers)?e.modifiers:{};let rt=e.pluralRules||t&&t.pluralRules,S;S=(()=>{i&&Ry(null);const W={version:PD,locale:c.value,fallbackLocale:u.value,messages:f.value,modifiers:Q,pluralRules:rt,missing:A===null?void 0:A,missingWarn:y,fallbackWarn:w,fallbackFormat:I,unresolving:!0,postTranslation:D===null?void 0:D,warnHtmlMessage:B,escapeParameter:z,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};W.datetimeFormats=m.value,W.numberFormats=_.value,W.__datetimeFormatters=Zt(S)?S.__datetimeFormatters:void 0,W.__numberFormatters=Zt(S)?S.__numberFormatters:void 0;const X=uD(W);return i&&Ry(X),X})(),Ya(S,c.value,u.value);function O(){return[c.value,u.value,f.value,m.value,_.value]}const F=ee({get:()=>c.value,set:W=>{S.locale=W,c.value=W}}),x=ee({get:()=>u.value,set:W=>{S.fallbackLocale=W,u.value=W,Ya(S,c.value,W)}}),j=ee(()=>f.value),V=ee(()=>m.value),Kt=ee(()=>_.value);function xe(){return Se(D)?D:null}function Ut(W){D=W,S.postTranslation=W}function Lt(){return M}function dt(W){W!==null&&(A=Hy(W)),M=W,S.missing=A}const we=(W,X,vt,kt,Bt,ke)=>{O();let Ie;try{__INTLIFY_PROD_DEVTOOLS__,i||(S.fallbackContext=t?cD():void 0),Ie=W(S)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(S.fallbackContext=void 0)}if(vt!=="translate exists"&&Ye(Ie)&&Ie===Bh||vt==="translate exists"&&!Ie){const[en,hn]=X();return t&&b?kt(t):Bt(en)}else{if(ke(Ie))return Ie;throw Kn(Fn.UNEXPECTED_RETURN_TYPE)}};function At(...W){return we(X=>Reflect.apply(Uy,null,[X,...W]),()=>Af(...W),"translate",X=>Reflect.apply(X.t,X,[...W]),X=>X,X=>Tt(X))}function zt(...W){const[X,vt,kt]=W;if(kt&&!ce(kt))throw Kn(Fn.INVALID_ARGUMENT);return At(X,vt,tn({resolvedMessage:!0},kt||{}))}function Yt(...W){return we(X=>Reflect.apply(xy,null,[X,...W]),()=>bf(...W),"datetime format",X=>Reflect.apply(X.d,X,[...W]),()=>ky,X=>Tt(X)||De(X))}function ye(...W){return we(X=>Reflect.apply(Ny,null,[X,...W]),()=>Pf(...W),"number format",X=>Reflect.apply(X.n,X,[...W]),()=>ky,X=>Tt(X)||De(X))}function Qt(W){return W.map(X=>Tt(X)||Ye(X)||ae(X)?By(String(X)):X)}const Ct={normalize:Qt,interpolate:W=>W,type:"vnode"};function tt(...W){return we(X=>{let vt;const kt=X;try{kt.processor=Ct,vt=Reflect.apply(Uy,null,[kt,...W])}finally{kt.processor=null}return vt},()=>Af(...W),"translate",X=>X[Sf](...W),X=>[By(X)],X=>De(X))}function ut(...W){return we(X=>Reflect.apply(Ny,null,[X,...W]),()=>Pf(...W),"number format",X=>X[kf](...W),zy,X=>Tt(X)||De(X))}function ft(...W){return we(X=>Reflect.apply(xy,null,[X,...W]),()=>bf(...W),"datetime format",X=>X[Cf](...W),zy,X=>Tt(X)||De(X))}function wt(W){rt=W,S.pluralRules=rt}function Gt(W,X){return we(()=>{if(!W)return!1;const vt=Tt(X)?X:c.value,kt=q(vt),Bt=S.messageResolver(kt,W);return Yi(Bt)||ri(Bt)||Tt(Bt)},()=>[W],"translate exists",vt=>Reflect.apply(vt.te,vt,[W,X]),SD,vt=>ae(vt))}function N(W){let X=null;const vt=AI(S,u.value,c.value);for(let kt=0;kt<vt.length;kt++){const Bt=f.value[vt[kt]]||{},ke=S.messageResolver(Bt,W);if(ke!=null){X=ke;break}}return X}function U(W){const X=N(W);return X??(t?t.tm(W)||{}:{})}function q(W){return f.value[W]||{}}function it(W,X){if(r){const vt={[W]:X};for(const kt in vt)_i(vt,kt)&&jl(vt[kt]);X=vt[W]}f.value[W]=X,S.messages=f.value}function st(W,X){f.value[W]=f.value[W]||{};const vt={[W]:X};if(r)for(const kt in vt)_i(vt,kt)&&jl(vt[kt]);X=vt[W],pu(X,f.value[W]),S.messages=f.value}function et(W){return m.value[W]||{}}function k(W,X){m.value[W]=X,S.datetimeFormats=m.value,My(S,W,X)}function R(W,X){m.value[W]=tn(m.value[W]||{},X),S.datetimeFormats=m.value,My(S,W,X)}function H(W){return _.value[W]||{}}function Z(W,X){_.value[W]=X,S.numberFormats=_.value,Dy(S,W,X)}function pt(W,X){_.value[W]=tn(_.value[W]||{},X),S.numberFormats=_.value,Dy(S,W,X)}jy++,t&&Ku&&(Gn(t.locale,W=>{a&&(c.value=W,S.locale=W,Ya(S,c.value,u.value))}),Gn(t.fallbackLocale,W=>{a&&(u.value=W,S.fallbackLocale=W,Ya(S,c.value,u.value))}));const ot={id:jy,locale:F,fallbackLocale:x,get inheritLocale(){return a},set inheritLocale(W){a=W,W&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,Ya(S,c.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:j,get modifiers(){return Q},get pluralRules(){return rt||{}},get isGlobal(){return i},get missingWarn(){return y},set missingWarn(W){y=W,S.missingWarn=y},get fallbackWarn(){return w},set fallbackWarn(W){w=W,S.fallbackWarn=w},get fallbackRoot(){return b},set fallbackRoot(W){b=W},get fallbackFormat(){return I},set fallbackFormat(W){I=W,S.fallbackFormat=I},get warnHtmlMessage(){return B},set warnHtmlMessage(W){B=W,S.warnHtmlMessage=W},get escapeParameter(){return z},set escapeParameter(W){z=W,S.escapeParameter=W},t:At,getLocaleMessage:q,setLocaleMessage:it,mergeLocaleMessage:st,getPostTranslationHandler:xe,setPostTranslationHandler:Ut,getMissingHandler:Lt,setMissingHandler:dt,[DI]:wt};return ot.datetimeFormats=V,ot.numberFormats=Kt,ot.rt=zt,ot.te=Gt,ot.tm=U,ot.d=Yt,ot.n=ye,ot.getDateTimeFormat=et,ot.setDateTimeFormat=k,ot.mergeDateTimeFormat=R,ot.getNumberFormat=H,ot.setNumberFormat=Z,ot.mergeNumberFormat=pt,ot[VI]=n,ot[Sf]=tt,ot[Cf]=ft,ot[kf]=ut,ot}function kD(e){const t=Tt(e.locale)?e.locale:zl,n=Tt(e.fallbackLocale)||De(e.fallbackLocale)||Zt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,i=Se(e.missing)?e.missing:void 0,r=ae(e.silentTranslationWarn)||fa(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,o=ae(e.silentFallbackWarn)||fa(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,a=ae(e.fallbackRoot)?e.fallbackRoot:!0,c=!!e.formatFallbackMessages,u=Zt(e.modifiers)?e.modifiers:{},f=e.pluralizationRules,m=Se(e.postTranslation)?e.postTranslation:void 0,_=Tt(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,y=!!e.escapeParameterHtml,w=ae(e.sync)?e.sync:!0;let b=e.messages;if(Zt(e.sharedMessages)){const Q=e.sharedMessages;b=Object.keys(Q).reduce((S,C)=>{const O=S[C]||(S[C]={});return tn(O,Q[C]),S},b||{})}const{__i18n:I,__root:M,__injectWithOption:A}=e,D=e.datetimeFormats,B=e.numberFormats,z=e.flatJson;return{locale:t,fallbackLocale:n,messages:b,flatJson:z,datetimeFormats:D,numberFormats:B,missing:i,missingWarn:r,fallbackWarn:o,fallbackRoot:a,fallbackFormat:c,modifiers:u,pluralRules:f,postTranslation:m,warnHtmlMessage:_,escapeParameter:y,messageResolver:e.messageResolver,inheritLocale:w,__i18n:I,__root:M,__injectWithOption:A}}function Rf(e={}){const t=fp(kD(e)),{__extender:n}=e,i={id:t.id,get locale(){return t.locale.value},set locale(r){t.locale.value=r},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(r){t.fallbackLocale.value=r},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(r){t.setMissingHandler(r)},get silentTranslationWarn(){return ae(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(r){t.missingWarn=ae(r)?!r:r},get silentFallbackWarn(){return ae(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(r){t.fallbackWarn=ae(r)?!r:r},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(r){t.fallbackFormat=r},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(r){t.setPostTranslationHandler(r)},get sync(){return t.inheritLocale},set sync(r){t.inheritLocale=r},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(r){t.warnHtmlMessage=r!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(r){t.escapeParameter=r},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...r){return Reflect.apply(t.t,t,[...r])},rt(...r){return Reflect.apply(t.rt,t,[...r])},te(r,o){return t.te(r,o)},tm(r){return t.tm(r)},getLocaleMessage(r){return t.getLocaleMessage(r)},setLocaleMessage(r,o){t.setLocaleMessage(r,o)},mergeLocaleMessage(r,o){t.mergeLocaleMessage(r,o)},d(...r){return Reflect.apply(t.d,t,[...r])},getDateTimeFormat(r){return t.getDateTimeFormat(r)},setDateTimeFormat(r,o){t.setDateTimeFormat(r,o)},mergeDateTimeFormat(r,o){t.mergeDateTimeFormat(r,o)},n(...r){return Reflect.apply(t.n,t,[...r])},getNumberFormat(r){return t.getNumberFormat(r)},setNumberFormat(r,o){t.setNumberFormat(r,o)},mergeNumberFormat(r,o){t.mergeNumberFormat(r,o)}};return i.__extender=n,i}function LD(e,t,n){return{beforeCreate(){const i=ls();if(!i)throw Kn(Fn.UNEXPECTED_ERROR);const r=this.$options;if(r.i18n){const o=r.i18n;if(r.__i18n&&(o.__i18n=r.__i18n),o.__root=t,this===this.$root)this.$i18n=Wy(e,o);else{o.__injectWithOption=!0,o.__extender=n.__vueI18nExtend,this.$i18n=Rf(o);const a=this.$i18n;a.__extender&&(a.__disposer=a.__extender(this.$i18n))}}else if(r.__i18n)if(this===this.$root)this.$i18n=Wy(e,r);else{this.$i18n=Rf({__i18n:r.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}else this.$i18n=e;r.__i18nGlobal&&UI(t,r,r),this.$t=(...o)=>this.$i18n.t(...o),this.$rt=(...o)=>this.$i18n.rt(...o),this.$te=(o,a)=>this.$i18n.te(o,a),this.$d=(...o)=>this.$i18n.d(...o),this.$n=(...o)=>this.$i18n.n(...o),this.$tm=o=>this.$i18n.tm(o),n.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=ls();if(!i)throw Kn(Fn.UNEXPECTED_ERROR);const r=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__disposer&&(r.__disposer(),delete r.__disposer,delete r.__extender),n.__deleteInstance(i),delete this.$i18n}}}function Wy(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[DI](t.pluralizationRules||e.pluralizationRules);const n=dp(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(i=>e.mergeLocaleMessage(i,n[i])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(i=>e.mergeDateTimeFormat(i,t.datetimeFormats[i])),t.numberFormats&&Object.keys(t.numberFormats).forEach(i=>e.mergeNumberFormat(i,t.numberFormats[i])),e}const mp={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function RD({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((i,r)=>[...i,...r.type===Ne?r.children:[r]],[]):t.reduce((n,i)=>{const r=e[i];return r&&(n[i]=r()),n},ve())}function BI(){return Ne}const OD=ue({name:"i18n-t",props:tn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Ye(e)||!isNaN(e)}},mp),setup(e,t){const{slots:n,attrs:i}=t,r=e.i18n||$h({useScope:e.scope,__useComponent:!0});return()=>{const o=Object.keys(n).filter(_=>_[0]!=="_"),a=ve();e.locale&&(a.locale=e.locale),e.plural!==void 0&&(a.plural=Tt(e.plural)?+e.plural:e.plural);const c=RD(t,o),u=r[Sf](e.keypath,c,a),f=tn(ve(),i),m=Tt(e.tag)||ce(e.tag)?e.tag:BI();return lh(m,f,u)}}}),qy=OD;function xD(e){return De(e)&&!Tt(e[0])}function $I(e,t,n,i){const{slots:r,attrs:o}=t;return()=>{const a={part:!0};let c=ve();e.locale&&(a.locale=e.locale),Tt(e.format)?a.key=e.format:ce(e.format)&&(Tt(e.format.key)&&(a.key=e.format.key),c=Object.keys(e.format).reduce((y,w)=>n.includes(w)?tn(ve(),y,{[w]:e.format[w]}):y,ve()));const u=i(e.value,a,c);let f=[a.key];De(u)?f=u.map((y,w)=>{const b=r[y.type],I=b?b({[y.type]:y.value,index:w,parts:u}):[y.value];return xD(I)&&(I[0].key=`${y.type}-${w}`),I}):Tt(u)&&(f=[u]);const m=tn(ve(),o),_=Tt(e.tag)||ce(e.tag)?e.tag:BI();return lh(_,m,f)}}const MD=ue({name:"i18n-n",props:tn({value:{type:Number,required:!0},format:{type:[String,Object]}},mp),setup(e,t){const n=e.i18n||$h({useScope:e.scope,__useComponent:!0});return $I(e,t,xI,(...i)=>n[kf](...i))}}),Gy=MD;function ND(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const i=n.__getInstance(t);return i!=null?i.__composer:e.global.__composer}}function DD(e){const t=a=>{const{instance:c,value:u}=a;if(!c||!c.$)throw Kn(Fn.UNEXPECTED_ERROR);const f=ND(e,c.$),m=Zy(u);return[Reflect.apply(f.t,f,[...Ky(m)]),f]};return{created:(a,c)=>{const[u,f]=t(c);Ku&&e.global===f&&(a.__i18nWatcher=Gn(f.locale,()=>{c.instance&&c.instance.$forceUpdate()})),a.__composer=f,a.textContent=u},unmounted:a=>{Ku&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:c})=>{if(a.__composer){const u=a.__composer,f=Zy(c);a.textContent=Reflect.apply(u.t,u,[...Ky(f)])}},getSSRProps:a=>{const[c]=t(a);return{textContent:c}}}}function Zy(e){if(Tt(e))return{path:e};if(Zt(e)){if(!("path"in e))throw Kn(Fn.REQUIRED_VALUE,"path");return e}else throw Kn(Fn.INVALID_VALUE)}function Ky(e){const{path:t,locale:n,args:i,choice:r,plural:o}=e,a={},c=i||{};return Tt(n)&&(a.locale=n),Ye(r)&&(a.plural=r),Ye(o)&&(a.plural=o),[t,c,a]}function VD(e,t,...n){const i=Zt(n[0])?n[0]:{};(ae(i.globalInstall)?i.globalInstall:!0)&&([qy.name,"I18nT"].forEach(o=>e.component(o,qy)),[Gy.name,"I18nN"].forEach(o=>e.component(o,Gy)),[Qy.name,"I18nD"].forEach(o=>e.component(o,Qy))),e.directive("t",DD(t))}const FD=bs("global-vue-i18n");function UD(e={}){const t=__VUE_I18N_LEGACY_API__&&ae(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=ae(e.globalInjection)?e.globalInjection:!0,i=new Map,[r,o]=BD(e,t),a=bs("");function c(_){return i.get(_)||null}function u(_,y){i.set(_,y)}function f(_){i.delete(_)}const m={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(_,...y){if(_.__VUE_I18N_SYMBOL__=a,_.provide(_.__VUE_I18N_SYMBOL__,m),Zt(y[0])){const I=y[0];m.__composerExtend=I.__composerExtend,m.__vueI18nExtend=I.__vueI18nExtend}let w=null;!t&&n&&(w=ZD(_,m.global)),__VUE_I18N_FULL_INSTALL__&&VD(_,m,...y),__VUE_I18N_LEGACY_API__&&t&&_.mixin(LD(o,o.__composer,m));const b=_.unmount;_.unmount=()=>{w&&w(),m.dispose(),b()}},get global(){return o},dispose(){r.stop()},__instances:i,__getInstance:c,__setInstance:u,__deleteInstance:f};return m}function $h(e={}){const t=ls();if(t==null)throw Kn(Fn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Kn(Fn.NOT_INSTALLED);const n=$D(t),i=jD(n),r=FI(t),o=zD(e,r);if(o==="global")return UI(i,e,r),i;if(o==="parent"){let u=HD(n,t,e.__useComponent);return u==null&&(u=i),u}const a=n;let c=a.__getInstance(t);if(c==null){const u=tn({},e);"__i18n"in r&&(u.__i18n=r.__i18n),i&&(u.__root=i),c=fp(u),a.__composerExtend&&(c[Lf]=a.__composerExtend(c)),qD(a,t,c),a.__setInstance(t,c)}return c}function BD(e,t){const n=Ff(),i=__VUE_I18N_LEGACY_API__&&t?n.run(()=>Rf(e)):n.run(()=>fp(e));if(i==null)throw Kn(Fn.UNEXPECTED_ERROR);return[n,i]}function $D(e){const t=qn(e.isCE?FD:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Kn(e.isCE?Fn.NOT_INSTALLED_WITH_PROVIDE:Fn.UNEXPECTED_ERROR);return t}function zD(e,t){return Fh(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function jD(e){return e.mode==="composition"?e.global:e.global.__composer}function HD(e,t,n=!1){let i=null;const r=t.root;let o=WD(t,n);for(;o!=null;){const a=e;if(e.mode==="composition")i=a.__getInstance(o);else if(__VUE_I18N_LEGACY_API__){const c=a.__getInstance(o);c!=null&&(i=c.__composer,n&&i&&!i[VI]&&(i=null))}if(i!=null||r===o)break;o=o.parent}return i}function WD(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function qD(e,t,n){ys(()=>{},t),io(()=>{const i=n;e.__deleteInstance(t);const r=i[Lf];r&&(r(),delete i[Lf])},t)}const GD=["locale","fallbackLocale","availableLocales"],Yy=["t","rt","d","n","tm","te"];function ZD(e,t){const n=Object.create(null);return GD.forEach(r=>{const o=Object.getOwnPropertyDescriptor(t,r);if(!o)throw Kn(Fn.UNEXPECTED_ERROR);const a=Fe(o.value)?{get(){return o.value.value},set(c){o.value.value=c}}:{get(){return o.get&&o.get()}};Object.defineProperty(n,r,a)}),e.config.globalProperties.$i18n=n,Yy.forEach(r=>{const o=Object.getOwnPropertyDescriptor(t,r);if(!o||!o.value)throw Kn(Fn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${r}`,o)}),()=>{delete e.config.globalProperties.$i18n,Yy.forEach(r=>{delete e.config.globalProperties[`$${r}`]})}}const KD=ue({name:"i18n-d",props:tn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},mp),setup(e,t){const n=e.i18n||$h({useScope:e.scope,__useComponent:!0});return $I(e,t,OI,(...i)=>n[Cf](...i))}}),Qy=KD;AD();rD(UN);sD(eD);oD(AI);if(__INTLIFY_PROD_DEVTOOLS__){const e=js();e.__INTLIFY__=!0,BN(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const YD=Jf("locale",()=>{const{locale:e}=$h(),t=Le(localStorage.getItem("locale")||"en");e.value=t.value,Gn(t,i=>{e.value=i,localStorage.setItem("locale",i)});function n(i){t.value=i}return{currentLocale:t,setLocale:n}}),QD={save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",loading:"Loading...",error:"Error",success:"Success"},XD={logout:"Logout"},JD={landmarks:"Landmarks",landmark:"Landmark",addLandmark:"Add Landmark",editLandmark:"Edit Landmark",name:"Name",description:"Description",location:"Location",rating:"Rating",photos:"Photos",yourRating:"Your Rating",overallRating:"Overall Rating",selectLocation:"Click on the map to select location",noLocationSelected:"Please select a location on the map",maxPhotos:"Maximum 5 photos",dragDropPhotos:"Drag & drop photos here or",browseFiles:"Browse Files",addMorePhotos:"Add More",visits:"visits",score:"Score",myLandmarks:"My Landmarks",topLandmarks:"Top Landmarks",showOnlyMyLandmarks:"Show only my landmarks",noLandmarksFound:"No landmarks found",addFirstLandmark:"Add your first landmark",loadMore:"Load More",loadingMore:"Loading more landmarks...",backToMap:"Back to Map",coordinates:"Coordinates"},tV={admin:"Admin",cannotRate:"Administrators cannot rate landmarks",allLandmarks:"All Landmarks"},eV={common:QD,auth:XD,landmark:JD,admin:tV},nV={save:"Сохранить",cancel:"Отмена",edit:"Редактировать",delete:"Удалить",loading:"Загрузка...",error:"Ошибка",success:"Успешно"},iV={logout:"Выйти"},rV={landmarks:"Достопримечательности",landmark:"Достопримечательность",addLandmark:"Добавить достопримечательность",editLandmark:"Редактировать достопримечательность",name:"Название",description:"Описание",location:"Местоположение",rating:"Рейтинг",photos:"Фотографии",yourRating:"Ваш рейтинг",overallRating:"Общий рейтинг",selectLocation:"Нажмите на карту чтобы выбрать местоположение",noLocationSelected:"Пожалуйста выберите местоположение на карте",maxPhotos:"Максимум 5 фотографий",dragDropPhotos:"Перетащите фотографии сюда или",browseFiles:"Выбрать файлы",addMorePhotos:"Добавить еще",visits:"посещений",score:"Очки",myLandmarks:"Мои достопримечательности",topLandmarks:"Лучшие достопримечательности",showOnlyMyLandmarks:"Показывать только мои достопримечательности",noLandmarksFound:"Достопримечательности не найдены",addFirstLandmark:"Добавьте свою первую достопримечательность",loadMore:"Загрузить еще",loadingMore:"Загрузка дополнительных достопримечательностей...",backToMap:"Назад к карте",coordinates:"Координаты"},sV={admin:"Администратор",cannotRate:"Администраторы не могут оценивать достопримечательности",allLandmarks:"Все достопримечательности"},oV={common:nV,auth:iV,landmark:rV,admin:sV},aV={save:"Захаваць",cancel:"Адмяніць",edit:"Рэдагаваць",delete:"Выдаліць",loading:"Загрузка...",error:"Памылка",success:"Паспяхова"},lV={logout:"Выйсці"},cV={landmarks:"Славутасці",landmark:"Славутасць",addLandmark:"Дадаць славутасць",editLandmark:"Рэдагаваць славутасць",name:"Назва",description:"Апісанне",location:"Месцазнаходжанне",rating:"Рэйтынг",photos:"Фатаграфіі",yourRating:"Ваш рэйтынг",overallRating:"Агульны рэйтынг",selectLocation:"Націсніце на карту каб выбраць месцазнаходжанне",noLocationSelected:"Калі ласка, выберыце месцазнаходжанне на карце",maxPhotos:"Максімум 5 фатаграфій",dragDropPhotos:"Перацягніце фатаграфіі сюды альбо",browseFiles:"Выбраць файлы",addMorePhotos:"Дадаць яшчэ",visits:"наведванняў",score:"Ачкі",myLandmarks:"Мае славутасці",topLandmarks:"Лепшыя славутасці",showOnlyMyLandmarks:"Паказваць толькі мае славутасці",noLandmarksFound:"Славутасці не знойдзены",addFirstLandmark:"Дадайце сваю першую славутасць",loadMore:"Загрузіць яшчэ",loadingMore:"Загрузка дадатковых славутасцей...",backToMap:"Назад да карты",coordinates:"Каардынаты"},uV={admin:"Адміністратар",cannotRate:"Адміністратары не могуць ацэньваць славутасці",allLandmarks:"Усе славутасці"},hV={common:aV,auth:lV,landmark:cV,admin:uV},tu=[{code:"en",name:"English",flag:"🇺🇸"},{code:"ru",name:"Русский",flag:"🇷🇺"},{code:"be",name:"Беларуская",flag:"🇧🇾"}],dV=UD({legacy:!1,locale:"en",fallbackLocale:"en",messages:{en:eV,ru:oV,be:hV}}),fV={class:"language-switcher"},mV={class:"language-switcher__current"},pV={key:0,class:"language-switcher__dropdown"},_V=["onClick"],gV={class:"language-switcher__flag"},yV={class:"language-switcher__name"},vV=ue({__name:"LanguageSwitcher",setup(e){const t=YD(),n=Le(!1);function i(){return tu.find(u=>u.code===t.currentLocale)||tu[0]}function r(u){u.stopPropagation(),n.value=!n.value}function o(u){a(u)&&(t.setLocale(u),n.value=!1)}function a(u){return tu.some(f=>f.code===u)}function c(u){u.target.closest(".language-switcher")||(n.value=!1)}return ys(()=>{document.addEventListener("click",c)}),io(()=>{document.removeEventListener("click",c)}),(u,f)=>(_t(),bt("div",fV,[lt("button",{onClick:r,class:Zn(["language-switcher__trigger",{"language-switcher__trigger_active":n.value}])},[lt("span",mV,yt(i()?.flag)+" "+yt(i()?.name),1),f[0]||(f[0]=lt("span",{class:"language-switcher__arrow"},"▼",-1))],2),n.value?(_t(),bt("div",pV,[(_t(!0),bt(Ne,null,ro(wn(tu),m=>(_t(),bt("button",{key:m.code,onClick:_=>o(m.code),class:Zn(["language-switcher__option",{"language-switcher__option_active":m.code===wn(t).currentLocale}])},[lt("span",gV,yt(m.flag),1),lt("span",yV,yt(m.name),1)],10,_V))),128))])):Ve("",!0)]))}}),wV=Ae(vV,[["__scopeId","data-v-c28f9f5c"]]),EV={class:"general-map__header"},TV={class:"general-map__header-content"},IV={class:"general-map__brand"},bV={class:"general-map__title"},PV={class:"general-map__user"},AV={key:0,class:"general-map__admin-badge"},SV={class:"general-map__nav"},CV={class:"general-map__filters"},kV={class:"general-map__filter-label"},LV=ue({__name:"Header",props:{showOnlyUserLandmarks:{type:Boolean},showOnlyUserLandmarksModifiers:{}},emits:Zf(["add-landmark","logout","filter-change"],["update:showOnlyUserLandmarks"]),setup(e){const t=sh(e,"showOnlyUserLandmarks"),n=Sn(),i=ee(()=>n.user?.displayName||n.user?.email);return(r,o)=>(_t(),bt("header",EV,[lt("div",TV,[lt("div",IV,[lt("h1",bV,yt(r.$t("landmark.landmarks")),1),lt("p",PV,[zi(yt(r.$t("welcome"))+", "+yt(i.value)+"! ",1),wn(n).isAdmin?(_t(),bt("span",AV," ("+yt(r.$t("admin.admin"))+") ",1)):Ve("",!0)])]),lt("nav",SV,[Ft(wV,{class:"general-map__language-switcher"}),lt("div",CV,[lt("label",kV,[Tu(lt("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),onChange:o[1]||(o[1]=a=>r.$emit("filter-change")),class:"general-map__checkbox"},null,544),[[aw,t.value]]),zi(" "+yt(r.$t("landmark.showOnlyMyLandmarks")),1)])]),lt("button",{onClick:o[2]||(o[2]=a=>r.$emit("add-landmark")),class:"general-map__add-btn"},yt(r.$t("landmark.addLandmark")),1),lt("button",{onClick:o[3]||(o[3]=a=>r.$emit("logout")),class:"general-map__logout"},yt(r.$t("auth.logout")),1)])])]))}}),RV=Ae(LV,[["__scopeId","data-v-f79d4a95"]]);function OV(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var xV=sl.exports,Xy;function MV(){return Xy||(Xy=1,(function(e,t){(function(n,i){i(t)})(xV,(function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||(function(){function s(){}return function(l){return s.prototype=l,new s}})();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var c=0;function u(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,l,d){var p,v,T,$;return $=function(){p=!1,v&&(T.apply(d,v),v=!1)},T=function(){p?v=arguments:(s.apply(d,arguments),setTimeout($,l),p=!0)},T}function m(s,l,d){var p=l[1],v=l[0],T=p-v;return s===p&&d?s:((s-v)%T+T)%T+v}function _(){return!1}function y(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function w(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return w(s).split(/\s+/)}function I(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function M(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(s,l){return s.replace(A,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var B=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function rt(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var S=0;function C(s){var l=+new Date,d=Math.max(0,16-(l-S));return S=l+d,window.setTimeout(s,d)}var O=window.requestAnimationFrame||rt("RequestAnimationFrame")||C,F=window.cancelAnimationFrame||rt("CancelAnimationFrame")||rt("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function x(s,l,d){if(d&&O===C)s.call(l);else return O.call(window,a(s,l))}function j(s){s&&F.call(window,s)}var V={__proto__:null,extend:r,create:o,bind:a,get lastId(){return c},stamp:u,throttle:f,wrapNum:m,falseFn:_,formatNum:y,trim:w,splitWords:b,setOptions:I,getParamString:M,template:D,isArray:B,indexOf:z,emptyImageUrl:Q,requestFn:O,cancelFn:F,requestAnimFrame:x,cancelAnimFrame:j};function Kt(){}Kt.extend=function(s){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(xe(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,$=p._initHooks.length;T<$;T++)p._initHooks[T].call(this)}},l},Kt.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Kt.mergeOptions=function(s){return r(this.prototype.options,s),this},Kt.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function xe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=B(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ut={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=b(s);for(var v=0,T=s.length;v<T;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=b(s);for(var v=arguments.length===1,T=0,$=s.length;T<$;T++)v?this._off(s[T]):this._off(s[T],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,T;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,T=p.length;v<T;v++)p[v].fn=_;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var $=this._listens(s,l,d);if($!==!1){var K=p[$];this._firingCount&&(K.fn=_,this._events[s]=p=p.slice()),p.splice($,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var T=0,$=v.length;T<$;T++){var K=v[T],J=K.fn;K.once&&this.off(s,J,K.ctx),J.call(K.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var T=this._events&&this._events[s];if(T&&T.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var $ in this._eventParents)if(this._eventParents[$].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,T=p.length;v<T;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=b(s);for(var v=0,T=s.length;v<T;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[u(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[u(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ut.addEventListener=Ut.on,Ut.removeEventListener=Ut.clearAllEventListeners=Ut.off,Ut.addOneTimeEventListener=Ut.once,Ut.fireEvent=Ut.fire,Ut.hasEventListeners=Ut.listens;var Lt=Kt.extend(Ut);function dt(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var we=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};dt.prototype={clone:function(){return new dt(this.x,this.y)},add:function(s){return this.clone()._add(At(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(At(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new dt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new dt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(s){s=At(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=At(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=At(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function At(s,l,d){return s instanceof dt?s:B(s)?new dt(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new dt(s.x,s.y):new dt(s,l,d)}function zt(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}zt.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof dt||typeof s[0]=="number"||"x"in s)l=d=At(s);else if(s=Yt(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return At((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return At(this.min.x,this.max.y)},getTopRight:function(){return At(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof dt?s=At(s):s=Yt(s),s instanceof zt?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Yt(s);var l=this.min,d=this.max,p=s.min,v=s.max,T=v.x>=l.x&&p.x<=d.x,$=v.y>=l.y&&p.y<=d.y;return T&&$},overlaps:function(s){s=Yt(s);var l=this.min,d=this.max,p=s.min,v=s.max,T=v.x>l.x&&p.x<d.x,$=v.y>l.y&&p.y<d.y;return T&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Yt(At(l.x-p,l.y-v),At(d.x+p,d.y+v))},equals:function(s){return s?(s=Yt(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Yt(s,l){return!s||s instanceof zt?s:new zt(s,l)}function ye(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ye.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Ht)p=s,v=s;else if(s instanceof ye){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(Ct(s)||Qt(s)):this;return!l&&!d?(this._southWest=new Ht(p.lat,p.lng),this._northEast=new Ht(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new ye(new Ht(l.lat-p,l.lng-v),new Ht(d.lat+p,d.lng+v))},getCenter:function(){return new Ht((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ht(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ht(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ht||"lat"in s?s=Ct(s):s=Qt(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof ye?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Qt(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),T=v.lat>=l.lat&&p.lat<=d.lat,$=v.lng>=l.lng&&p.lng<=d.lng;return T&&$},overlaps:function(s){s=Qt(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),T=v.lat>l.lat&&p.lat<d.lat,$=v.lng>l.lng&&p.lng<d.lng;return T&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Qt(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Qt(s,l){return s instanceof ye?s:new ye(s,l)}function Ht(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ht.prototype={equals:function(s,l){if(!s)return!1;s=Ct(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+y(this.lat,s)+", "+y(this.lng,s)+")"},distanceTo:function(s){return ut.distance(this,Ct(s))},wrap:function(){return ut.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Qt([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ht(this.lat,this.lng,this.alt)}};function Ct(s,l,d){return s instanceof Ht?s:B(s)&&typeof s[0]!="object"?s.length===3?new Ht(s[0],s[1],s[2]):s.length===2?new Ht(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ht(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ht(s,l,d)}var tt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new zt(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ht(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var T=s.getSouthWest(),$=s.getNorthEast(),K=new Ht(T.lat-p,T.lng-v),J=new Ht($.lat-p,$.lng-v);return new ye(K,J)}},ut=r({},tt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,T=Math.sin((l.lat-s.lat)*d/2),$=Math.sin((l.lng-s.lng)*d/2),K=T*T+Math.cos(p)*Math.cos(v)*$*$,J=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*J}}),ft=6378137,wt={R:ft,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new dt(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Ht((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:(function(){var s=ft*Math.PI;return new zt([-s,-s],[s,s])})()};function Gt(s,l,d,p){if(B(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Gt.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new dt((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function N(s,l,d,p){return new Gt(s,l,d,p)}var U=r({},ut,{code:"EPSG:3857",projection:wt,transformation:(function(){var s=.5/(Math.PI*wt.R);return N(s,.5,-s,.5)})()}),q=r({},U,{code:"EPSG:900913"});function it(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function st(s,l){var d="",p,v,T,$,K,J;for(p=0,T=s.length;p<T;p++){for(K=s[p],v=0,$=K.length;v<$;v++)J=K[v],d+=(v?"L":"M")+J.x+" "+J.y;d+=l?Pt.svg?"z":"x":""}return d||"M0 0"}var et=document.documentElement.style,k="ActiveXObject"in window,R=k&&!document.addEventListener,H="msLaunchUri"in navigator&&!("documentMode"in document),Z=Rn("webkit"),pt=Rn("android"),ot=Rn("android 2")||Rn("android 3"),W=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),X=pt&&Rn("Google")&&W<537&&!("AudioNode"in window),vt=!!window.opera,kt=!H&&Rn("chrome"),Bt=Rn("gecko")&&!Z&&!vt&&!k,ke=!kt&&Rn("safari"),Ie=Rn("phantom"),en="OTransition"in et,hn=navigator.platform.indexOf("Win")===0,Ln=k&&"transition"in et,Ii="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,He="MozPerspective"in et,We=!window.L_DISABLE_3D&&(Ln||Ii||He)&&!en&&!Ie,ci=typeof orientation<"u"||Rn("mobile"),er=ci&&Z,ac=ci&&Ii,Dr=!window.PointerEvent&&window.MSPointerEvent,Ta=!!(window.PointerEvent||Dr),nn="ontouchstart"in window||!!window.TouchEvent,lc=!window.L_NO_TOUCH&&(nn||Ta),Ss=ci&&vt,Cs=ci&&Bt,jh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hh=(function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return s})(),Vr=(function(){return!!document.createElement("canvas").getContext})(),Ia=!!(document.createElementNS&&it("svg").createSVGRect),Wh=!!Ia&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ho=!Ia&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),cc=navigator.platform.indexOf("Mac")===0,uc=navigator.platform.indexOf("Linux")===0;function Rn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Pt={ie:k,ielt9:R,edge:H,webkit:Z,android:pt,android23:ot,androidStock:X,opera:vt,chrome:kt,gecko:Bt,safari:ke,phantom:Ie,opera12:en,win:hn,ie3d:Ln,webkit3d:Ii,gecko3d:He,any3d:We,mobile:ci,mobileWebkit:er,mobileWebkit3d:ac,msPointer:Dr,pointer:Ta,touch:lc,touchNative:nn,mobileOpera:Ss,mobileGecko:Cs,retina:jh,passiveEvents:Hh,canvas:Vr,svg:Ia,vml:ho,inlineSvg:Wh,mac:cc,linux:uc},hc=Pt.msPointer?"MSPointerDown":"pointerdown",ui=Pt.msPointer?"MSPointerMove":"pointermove",ba=Pt.msPointer?"MSPointerUp":"pointerup",Pa=Pt.msPointer?"MSPointerCancel":"pointercancel",ks={touchstart:hc,touchmove:ui,touchend:ba,touchcancel:Pa},fo={touchstart:Aa,touchmove:Yn,touchend:Yn,touchcancel:Yn},nr={},dc=!1;function fc(s,l,d){return l==="touchstart"&&Ls(),fo[l]?(d=fo[l].bind(this,d),s.addEventListener(ks[l],d,!1),d):(console.warn("wrong event specified:",l),_)}function qh(s,l,d){if(!ks[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(ks[l],d,!1)}function mo(s){nr[s.pointerId]=s}function mc(s){nr[s.pointerId]&&(nr[s.pointerId]=s)}function po(s){delete nr[s.pointerId]}function Ls(){dc||(document.addEventListener(hc,mo,!0),document.addEventListener(ui,mc,!0),document.addEventListener(ba,po,!0),document.addEventListener(Pa,po,!0),dc=!0)}function Yn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in nr)l.touches.push(nr[d]);l.changedTouches=[l],s(l)}}function Aa(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&qe(l),Yn(s,l)}function Gh(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var pc=200;function _c(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(T){if(T.detail!==1){p=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var $=Ra(T);if(!($.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!$.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var K=Date.now();K-d<=pc?(p++,p===2&&l(Gh(T))):p=1,d=K}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function gc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Rs=_o(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ir=_o(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Sa=ir==="webkitTransition"||ir==="OTransition"?ir+"End":"transitionend";function Ca(s){return typeof s=="string"?document.getElementById(s):s}function Fr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function ne(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function re(s){var l=s.parentNode;l&&l.removeChild(s)}function Tn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Qn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Xn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Os(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=bi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function It(s,l){if(s.classList!==void 0)for(var d=b(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Os(s,l)){var T=bi(s);rr(s,(T?T+" ":"")+l)}}function be(s,l){s.classList!==void 0?s.classList.remove(l):rr(s,w((" "+bi(s)+" ").replace(" "+l+" "," ")))}function rr(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function bi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function On(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&yc(s,l)}function yc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function _o(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function sr(s,l,d){var p=l||new dt(0,0);s.style[Rs]=(Pt.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function Me(s,l){s._leaflet_pos=l,Pt.any3d?sr(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function or(s){return s._leaflet_pos||new dt(0,0)}var hi,Un,go;if("onselectstart"in document)hi=function(){Nt(window,"selectstart",qe)},Un=function(){ge(window,"selectstart",qe)};else{var Ur=_o(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hi=function(){if(Ur){var s=document.documentElement.style;go=s[Ur],s[Ur]="none"}},Un=function(){Ur&&(document.documentElement.style[Ur]=go,go=void 0)}}function yo(){Nt(window,"dragstart",qe)}function vo(){ge(window,"dragstart",qe)}var xs,Pi;function ka(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(wo(),xs=s,Pi=s.style.outlineStyle,s.style.outlineStyle="none",Nt(window,"keydown",wo))}function wo(){xs&&(xs.style.outlineStyle=Pi,xs=void 0,Pi=void 0,ge(window,"keydown",wo))}function vc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Jn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Zh={__proto__:null,TRANSFORM:Rs,TRANSITION:ir,TRANSITION_END:Sa,get:Ca,getStyle:Fr,create:ne,remove:re,empty:Tn,toFront:Qn,toBack:Xn,hasClass:Os,addClass:It,removeClass:be,setClass:rr,getClass:bi,setOpacity:On,testProp:_o,setTransform:sr,setPosition:Me,getPosition:or,get disableTextSelection(){return hi},get enableTextSelection(){return Un},disableImageDrag:yo,enableImageDrag:vo,preventOutline:ka,restoreOutline:wo,getSizedParentNode:vc,getScale:Jn};function Nt(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Eo(s,v,l[v],d);else{l=b(l);for(var T=0,$=l.length;T<$;T++)Eo(s,l[T],d,p)}return this}var In="_leaflet_events";function ge(s,l,d,p){if(arguments.length===1)Br(s),delete s[In];else if(l&&typeof l=="object")for(var v in l)Ms(s,v,l[v],d);else if(l=b(l),arguments.length===2)Br(s,function(K){return z(l,K)!==-1});else for(var T=0,$=l.length;T<$;T++)Ms(s,l[T],d,p);return this}function Br(s,l){for(var d in s[In]){var p=d.split(/\d/)[0];(!l||l(p))&&Ms(s,p,null,null,d)}}var ar={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Eo(s,l,d,p){var v=l+u(d)+(p?"_"+u(p):"");if(s[In]&&s[In][v])return this;var T=function(K){return d.call(p||s,K||window.event)},$=T;!Pt.touchNative&&Pt.pointer&&l.indexOf("touch")===0?T=fc(s,l,T):Pt.touch&&l==="dblclick"?T=_c(s,T):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(ar[l]||l,T,Pt.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(T=function(K){K=K||window.event,xa(s,K)&&$(K)},s.addEventListener(ar[l],T,!1)):s.addEventListener(l,$,!1):s.attachEvent("on"+l,T),s[In]=s[In]||{},s[In][v]=T}function Ms(s,l,d,p,v){v=v||l+u(d)+(p?"_"+u(p):"");var T=s[In]&&s[In][v];if(!T)return this;!Pt.touchNative&&Pt.pointer&&l.indexOf("touch")===0?qh(s,l,T):Pt.touch&&l==="dblclick"?gc(s,T):"removeEventListener"in s?s.removeEventListener(ar[l]||l,T,!1):s.detachEvent("on"+l,T),s[In][v]=null}function he(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function La(s){return Eo(s,"wheel",he),this}function Ns(s){return Nt(s,"mousedown touchstart dblclick contextmenu",he),s._leaflet_disable_click=!0,this}function qe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ai(s){return qe(s),he(s),this}function Ra(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ds(s,l){if(!l)return new dt(s.clientX,s.clientY);var d=Jn(l),p=d.boundingClientRect;return new dt((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var Si=Pt.linux&&Pt.chrome?window.devicePixelRatio:Pt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oa(s){return Pt.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Si:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function xa(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Vs={__proto__:null,on:Nt,off:ge,stopPropagation:he,disableScrollPropagation:La,disableClickPropagation:Ns,preventDefault:qe,stop:Ai,getPropagationPath:Ra,getMousePosition:Ds,getWheelDelta:Oa,isExternalTarget:xa,addListener:Nt,removeListener:ge},Ma=Lt.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=or(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),Me(this._el,d),this.fire("step")},_complete:function(){j(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Wt=Lt.extend({options:{crs:U,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Ct(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ir&&Pt.any3d&&!Pt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,Sa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(Ct(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),T=s instanceof dt?s:this.latLngToContainerPoint(s),$=T.subtract(v).multiplyBy(1-1/p),K=this.containerPointToLatLng(v.add($));return this.setView(K,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Qt(s);var d=At(l.paddingTopLeft||l.padding||[0,0]),p=At(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var T=p.subtract(d).divideBy(2),$=this.project(s.getSouthWest(),v),K=this.project(s.getNorthEast(),v),J=this.unproject($.add(K).divideBy(2).add(T),v);return{center:J,zoom:v}},fitBounds:function(s,l){if(s=Qt(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=At(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ma,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){It(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!Pt.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),T=this.getSize(),$=this._zoom;s=Ct(s),l=l===void 0?$:l;var K=Math.max(T.x,T.y),J=K*this.getZoomScale($,l),ct=v.distanceTo(p)||1,gt=1.42,Ot=gt*gt;function qt(Ge){var Nc=Ge?-1:1,_b=Ge?J:K,gb=J*J-K*K+Nc*Ot*Ot*ct*ct,yb=2*_b*Ot*ct,Jh=gb/yb,Vp=Math.sqrt(Jh*Jh+1)-Jh,vb=Vp<1e-9?-18:Math.log(Vp);return vb}function bn(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function rn(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}function ni(Ge){return bn(Ge)/rn(Ge)}var Mn=qt(0);function Mo(Ge){return K*(rn(Mn)/rn(Mn+gt*Ge))}function db(Ge){return K*(rn(Mn)*ni(Mn+gt*Ge)-bn(Mn))/Ot}function fb(Ge){return 1-Math.pow(1-Ge,1.5)}var mb=Date.now(),Np=(qt(1)-Mn)/gt,pb=d.duration?1e3*d.duration:1e3*Np*.8;function Dp(){var Ge=(Date.now()-mb)/pb,Nc=fb(Ge)*Np;Ge<=1?(this._flyToFrame=x(Dp,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(db(Nc)/ct)),$),this.getScaleZoom(K/Mo(Nc),$),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Dp.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Qt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Qt(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=At(l.paddingTopLeft||l.padding||[0,0]),p=At(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),T=this.project(s),$=this.getPixelBounds(),K=Yt([$.min.add(d),$.max.subtract(p)]),J=K.getSize();if(!K.contains(T)){this._enforcingBounds=!0;var ct=T.subtract(K.getCenter()),gt=K.extend(T).getSize().subtract(J);v.x+=ct.x<0?-gt.x:gt.x,v.y+=ct.y<0?-gt.y:gt.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),T=p.subtract(v);return!T.x&&!T.y?this:(s.animate&&s.pan?this.panBy(T):(s.pan&&this._rawPanBy(T),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ht(l,d),v=p.toBounds(s.coords.accuracy*2),T=this._locateOptions;if(T.setView){var $=this.getBoundsZoom(v);this.setView(p,T.maxZoom?Math.min($,T.maxZoom):$)}var K={latlng:p,bounds:v,timestamp:s.timestamp};for(var J in s.coords)typeof s.coords[J]=="number"&&(K[J]=s.coords[J]);this.fire("locationfound",K)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),re(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(j(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)re(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=ne("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new ye(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Qt(s),d=At(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),T=this.getMaxZoom(),$=s.getNorthWest(),K=s.getSouthEast(),J=this.getSize().subtract(d),ct=Yt(this.project(K,p),this.project($,p)).getSize(),gt=Pt.any3d?this.options.zoomSnap:1,Ot=J.x/ct.x,qt=J.y/ct.y,bn=l?Math.max(Ot,qt):Math.min(Ot,qt);return p=this.getScaleZoom(bn,p),gt&&(p=Math.round(p/(gt/100))*(gt/100),p=l?Math.ceil(p/gt)*gt:Math.floor(p/gt)*gt),Math.max(v,Math.min(T,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new dt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new zt(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Ct(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(At(s),l)},layerPointToLatLng:function(s){var l=At(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(Ct(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ct(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Qt(s))},distance:function(s,l){return this.options.crs.distance(Ct(s),Ct(l))},containerPointToLayerPoint:function(s){return At(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return At(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(At(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ct(s)))},mouseEventToContainerPoint:function(s){return Ds(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ca(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(l,"scroll",this._onScroll,this),this._containerId=u(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pt.any3d,It(s,"leaflet-container"+(Pt.touch?" leaflet-touch":"")+(Pt.retina?" leaflet-retina":"")+(Pt.ielt9?" leaflet-oldie":"")+(Pt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Fr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Me(this._mapPane,new dt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(It(s.markerPane,"leaflet-zoom-hide"),It(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){Me(this._mapPane,new dt(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Me(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[u(this._container)]=this;var l=s?ge:Nt;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Pt.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){j(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",T=s.target||s.srcElement,$=!1;T;){if(p=this._targets[u(T)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){$=!0;break}if(p&&p.listens(l,!0)&&(v&&!xa(T,s)||(d.push(p),v))||T===this._container)break;T=T.parentNode}return!d.length&&!$&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&ka(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var T=[],$=0;$<d.length;$++)d[$].listens(l,!0)&&T.push(d[$]);v=T.concat(v)}if(v.length){l==="contextmenu"&&qe(s);var K=v[0],J={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var ct=K.getLatLng&&(!K._radius||K._radius<=10);J.containerPoint=ct?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(s),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ct?K.getLatLng():this.layerPointToLatLng(J.layerPoint)}for($=0;$<v.length;$++)if(v[$].fire(l,J,!0),J.originalEvent._stopped||v[$].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return or(this._mapPane)||new dt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Yt([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),T=new zt(p.subtract(v),p.add(v)),$=this._getBoundsOffset(T,d,l);return Math.abs($.x)<=1&&Math.abs($.y)<=1?s:this.unproject(p.add($),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new zt(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Yt(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),T=p.max.subtract(s.max),$=this._rebound(v.x,-T.x),K=this._rebound(v.y,-T.y);return new dt($,K)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=Pt.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Rs,p=this._proxy.style[d];sr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){re(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();sr(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(x(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,It(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function To(s,l){return new Wt(s,l)}var xn=Kt.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return It(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(re(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ci=function(s){return new xn(s)};Wt.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=ne("div",l+"control-container",this._container);function p(v,T){var $=l+v+" "+l+T;s[v+T]=ne("div",$,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)re(this._controlCorners[s]);re(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wc=xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){I(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return xn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(u(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){It(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(It(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=ne("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ns(l),La(l);var p=this._section=ne("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Nt(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=ne("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Nt(v,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){qe(T),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ne("div",s+"-base",p),this._separator=ne("div",s+"-separator",p),this._overlaysList=ne("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&u(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tn(this._baseLayersList),Tn(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(u(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+u(this),d),this._layerControlInputs.push(p),p.layerId=u(s.layer),Nt(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var T=document.createElement("span");l.appendChild(T),T.appendChild(p),T.appendChild(v);var $=s.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var T=s.length-1;T>=0;T--)l=s[T],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(T=0;T<v.length;T++)this._map.hasLayer(v[T])&&this._map.removeLayer(v[T]);for(T=0;T<p.length;T++)this._map.hasLayer(p[T])||this._map.addLayer(p[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Nt(s,"click",qe),this.expand();var l=this;setTimeout(function(){ge(s,"click",qe),l._preventClick=!1})}}),Ec=function(s,l,d){return new wc(s,l,d)},lr=xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=ne("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var T=ne("a",d,p);return T.innerHTML=s,T.href="#",T.title=l,T.setAttribute("role","button"),T.setAttribute("aria-label",l),Ns(T),Nt(T,"click",Ai),Nt(T,"click",v,this),Nt(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";be(this._zoomInButton,l),be(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(It(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(It(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Wt.mergeOptions({zoomControl:!0}),Wt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new lr,this.addControl(this.zoomControl))});var Tc=function(s){return new lr(s)},Na=xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=ne("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=ne("div",l,d)),s.imperial&&(this._iScale=ne("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Da=function(s){return new Na(s)},Va='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Io=xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pt.inlineSvg?Va+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Ns(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Wt.mergeOptions({attributionControl:!0}),Wt.addInitHook(function(){this.options.attributionControl&&new Io().addTo(this)});var bo=function(s){return new Io(s)};xn.Layers=wc,xn.Zoom=lr,xn.Scale=Na,xn.Attribution=Io,Ci.layers=Ec,Ci.zoom=Tc,Ci.scale=Da,Ci.attribution=bo;var Bn=Kt.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bn.addTo=function(s,l){return s.addHandler(l,this),this};var Ic={Events:Ut},ki=Pt.touch?"touchstart mousedown":"mousedown",di=Lt.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){I(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Nt(this._dragStartTarget,ki,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(di._dragging===this&&this.finishDrag(!0),ge(this._dragStartTarget,ki,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Os(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){di._dragging===this&&this.finishDrag();return}if(!(di._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(di._dragging=this,this._preventOutline&&ka(this._element),yo(),hi(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=vc(this._element);this._startPoint=new dt(l.clientX,l.clientY),this._startPos=or(this._element),this._parentScale=Jn(d);var p=s.type==="mousedown";Nt(document,p?"mousemove":"touchmove",this._onMove,this),Nt(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new dt(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,qe(s),this._moved||(this.fire("dragstart"),this._moved=!0,It(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),It(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Me(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ge(document,"mousemove touchmove",this._onMove,this),ge(document,"mouseup touchend touchcancel",this._onUp,this),vo(),Un();var l=this._moved&&this._moving;this._moving=!1,di._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Fa(s,l,d){var p,v=[1,4,2,8],T,$,K,J,ct,gt,Ot,qt;for(T=0,gt=s.length;T<gt;T++)s[T]._code=Y(s[T],l);for(K=0;K<4;K++){for(Ot=v[K],p=[],T=0,gt=s.length,$=gt-1;T<gt;$=T++)J=s[T],ct=s[$],J._code&Ot?ct._code&Ot||(qt=G(ct,J,Ot,l,d),qt._code=Y(qt,l),p.push(qt)):(ct._code&Ot&&(qt=G(ct,J,Ot,l,d),qt._code=Y(qt,l),p.push(qt)),p.push(J));s=p}return s}function Ua(s,l){var d,p,v,T,$,K,J,ct,gt;if(!s||s.length===0)throw new Error("latlngs not passed");se(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ot=Ct([0,0]),qt=Qt(s),bn=qt.getNorthWest().distanceTo(qt.getSouthWest())*qt.getNorthEast().distanceTo(qt.getNorthWest());bn<1700&&(Ot=Po(s));var rn=s.length,ni=[];for(d=0;d<rn;d++){var Mn=Ct(s[d]);ni.push(l.project(Ct([Mn.lat-Ot.lat,Mn.lng-Ot.lng])))}for(K=J=ct=0,d=0,p=rn-1;d<rn;p=d++)v=ni[d],T=ni[p],$=v.y*T.x-T.y*v.x,J+=(v.x+T.x)*$,ct+=(v.y+T.y)*$,K+=$*3;K===0?gt=ni[0]:gt=[J/K,ct/K];var Mo=l.unproject(At(gt));return Ct([Mo.lat+Ot.lat,Mo.lng+Ot.lng])}function Po(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var T=Ct(s[v]);l+=T.lat,d+=T.lng,p++}return Ct([l/p,d/p])}var Ao={__proto__:null,clipPolygon:Fa,polygonCenter:Ua,centroid:Po};function dn(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=g(s,d),s=$r(s,d),s}function Ba(s,l,d){return Math.sqrt(Dt(s,l,d,!0))}function bc(s,l,d){return Dt(s,l,d)}function $r(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,h(s,v,l,0,d-1);var T,$=[];for(T=0;T<d;T++)v[T]&&$.push(s[T]);return $}function h(s,l,d,p,v){var T=0,$,K,J;for(K=p+1;K<=v-1;K++)J=Dt(s[K],s[p],s[v],!0),J>T&&($=K,T=J);T>d&&(l[$]=1,h(s,l,d,p,$),h(s,l,d,$,v))}function g(s,l){for(var d=[s[0]],p=1,v=0,T=s.length;p<T;p++)ht(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<T-1&&d.push(s[T-1]),d}var E;function P(s,l,d,p,v){var T=p?E:Y(s,d),$=Y(l,d),K,J,ct;for(E=$;;){if(!(T|$))return[s,l];if(T&$)return!1;K=T||$,J=G(s,l,K,d,v),ct=Y(J,d),K===T?(s=J,T=ct):(l=J,$=ct)}}function G(s,l,d,p,v){var T=l.x-s.x,$=l.y-s.y,K=p.min,J=p.max,ct,gt;return d&8?(ct=s.x+T*(J.y-s.y)/$,gt=J.y):d&4?(ct=s.x+T*(K.y-s.y)/$,gt=K.y):d&2?(ct=J.x,gt=s.y+$*(J.x-s.x)/T):d&1&&(ct=K.x,gt=s.y+$*(K.x-s.x)/T),new dt(ct,gt,v)}function Y(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ht(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Dt(s,l,d,p){var v=l.x,T=l.y,$=d.x-v,K=d.y-T,J=$*$+K*K,ct;return J>0&&(ct=((s.x-v)*$+(s.y-T)*K)/J,ct>1?(v=d.x,T=d.y):ct>0&&(v+=$*ct,T+=K*ct)),$=s.x-v,K=s.y-T,p?$*$+K*K:new dt(v,T)}function se(s){return!B(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function de(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),se(s)}function $e(s,l){var d,p,v,T,$,K,J,ct;if(!s||s.length===0)throw new Error("latlngs not passed");se(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var gt=Ct([0,0]),Ot=Qt(s),qt=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());qt<1700&&(gt=Po(s));var bn=s.length,rn=[];for(d=0;d<bn;d++){var ni=Ct(s[d]);rn.push(l.project(Ct([ni.lat-gt.lat,ni.lng-gt.lng])))}for(d=0,p=0;d<bn-1;d++)p+=rn[d].distanceTo(rn[d+1])/2;if(p===0)ct=rn[0];else for(d=0,T=0;d<bn-1;d++)if($=rn[d],K=rn[d+1],v=$.distanceTo(K),T+=v,T>p){J=(T-p)/v,ct=[K.x-J*(K.x-$.x),K.y-J*(K.y-$.y)];break}var Mn=l.unproject(At(ct));return Ct([Mn.lat+gt.lat,Mn.lng+gt.lng])}var ti={__proto__:null,simplify:dn,pointToSegmentDistance:Ba,closestPointOnSegment:bc,clipSegment:P,_getEdgeIntersection:G,_getBitCode:Y,_sqClosestPointOnSegment:Dt,isFlat:se,_flat:de,polylineCenter:$e},fi={project:function(s){return new dt(s.lng,s.lat)},unproject:function(s){return new Ht(s.y,s.x)},bounds:new zt([-180,-90],[180,90])},ei={R:6378137,R_MINOR:6356752314245179e-9,bounds:new zt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,T=Math.sqrt(1-v*v),$=T*Math.sin(p),K=Math.tan(Math.PI/4-p/2)/Math.pow((1-$)/(1+$),T/2);return p=-d*Math.log(Math.max(K,1e-10)),new dt(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),T=Math.exp(-s.y/d),$=Math.PI/2-2*Math.atan(T),K=0,J=.1,ct;K<15&&Math.abs(J)>1e-7;K++)ct=v*Math.sin($),ct=Math.pow((1-ct)/(1+ct),v/2),J=Math.PI/2-2*Math.atan(T*ct)-$,$+=J;return new Ht($*l,s.x*l/d)}},Li={__proto__:null,LonLat:fi,Mercator:ei,SphericalMercator:wt},So=r({},ut,{code:"EPSG:3395",projection:ei,transformation:(function(){var s=.5/(Math.PI*ei.R);return N(s,.5,-s,.5)})()}),Co=r({},ut,{code:"EPSG:4326",projection:fi,transformation:N(1/180,1,-1/180,.5)}),HI=r({},tt,{projection:fi,transformation:N(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});tt.Earth=ut,tt.EPSG3395=So,tt.EPSG3857=U,tt.EPSG900913=q,tt.EPSG4326=Co,tt.Simple=HI;var mi=Lt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[u(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[u(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Wt.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=u(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=u(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return u(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?B(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[u(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=u(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ko=mi.extend({initialize:function(s,l){I(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return u(s)}}),WI=function(s,l){return new ko(s,l)},cr=ko.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ko.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ko.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ye;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),qI=function(s,l){return new cr(s,l)},Lo=Kt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=At(p),T=At(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),T&&(s.style.marginLeft=-T.x+"px",s.style.marginTop=-T.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return Pt.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function GI(s){return new Lo(s)}var $a=Lo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof $a.imagePath!="string"&&($a.imagePath=this._detectIconPath()),(this.options.imagePath||$a.imagePath)+Lo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var T=p.exec(d);return T&&T[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ne("div","leaflet-default-icon-path",document.body),l=Fr(s,"background-image")||Fr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),_p=Bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new di(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),It(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,T=or(l._icon),$=d.getPixelBounds(),K=d.getPixelOrigin(),J=Yt($.min._subtract(K).add(v),$.max._subtract(K).subtract(v));if(!J.contains(T)){var ct=At((Math.max(J.max.x,T.x)-J.max.x)/($.max.x-J.max.x)-(Math.min(J.min.x,T.x)-J.min.x)/($.min.x-J.min.x),(Math.max(J.max.y,T.y)-J.max.y)/($.max.y-J.max.y)-(Math.min(J.min.y,T.y)-J.min.y)/($.min.y-J.min.y)).multiplyBy(p);d.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),Me(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=x(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(j(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=or(l._icon),v=l._map.layerPointToLatLng(p);d&&Me(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){j(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Pc=mi.extend({options:{icon:new $a,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){I(this,l),this._latlng=Ct(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=Ct(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),It(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),T=!1;v!==this._shadow&&(this._removeShadow(),T=!0),v&&(It(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&T&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(this._icon,"focus",this._panOnFocus,this),re(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&re(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Me(this._icon,s),this._shadow&&Me(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(It(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_p)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _p(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&On(this._icon,s),this._shadow&&On(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?At(l.iconSize):At(0,0),p=l.iconAnchor?At(l.iconAnchor):At(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ZI(s,l){return new Pc(s,l)}var zr=mi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ac=zr.extend({options:{fill:!0,radius:10},initialize:function(s,l){I(this,l),this._latlng=Ct(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=Ct(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return zr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new zt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function KI(s,l){return new Ac(s,l)}var Kh=Ac.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),I(this,l),this._latlng=Ct(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:zr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===ut.distance){var v=Math.PI/180,T=this._mRadius/ut.R/v,$=d.project([l+T,s]),K=d.project([l-T,s]),J=$.add(K).divideBy(2),ct=d.unproject(J).lat,gt=Math.acos((Math.cos(T*v)-Math.sin(l*v)*Math.sin(ct*v))/(Math.cos(l*v)*Math.cos(ct*v)))/v;(isNaN(gt)||gt===0)&&(gt=T/Math.cos(Math.PI/180*l)),this._point=J.subtract(d.getPixelOrigin()),this._radius=isNaN(gt)?0:J.x-d.project([ct,s-gt]).x,this._radiusY=J.y-$.y}else{var Ot=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ot).x}this._updateBounds()}});function YI(s,l,d){return new Kh(s,l,d)}var ur=zr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){I(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Dt,v,T,$=0,K=this._parts.length;$<K;$++)for(var J=this._parts[$],ct=1,gt=J.length;ct<gt;ct++){v=J[ct-1],T=J[ct];var Ot=p(s,v,T,!0);Ot<l&&(l=Ot,d=p(s,v,T))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $e(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=Ct(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ye,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return se(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=se(s),p=0,v=s.length;p<v;p++)d?(l[p]=Ct(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new zt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new dt(s,s);this._rawPxBounds&&(this._pxBounds=new zt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ht,v=s.length,T,$;if(p){for($=[],T=0;T<v;T++)$[T]=this._map.latLngToLayerPoint(s[T]),d.extend($[T]);l.push($)}else for(T=0;T<v;T++)this._projectLatlngs(s[T],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,T,$,K,J;for(d=0,v=0,T=this._rings.length;d<T;d++)for(J=this._rings[d],p=0,$=J.length;p<$-1;p++)K=P(J[p],J[p+1],s,p,!0),K&&(l[v]=l[v]||[],l[v].push(K[0]),(K[1]!==J[p+1]||p===$-2)&&(l[v].push(K[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=dn(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,T,$,K,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,T=this._parts.length;d<T;d++)for(K=this._parts[d],p=0,$=K.length,v=$-1;p<$;v=p++)if(!(!l&&p===0)&&Ba(s,K[v],K[p])<=J)return!0;return!1}});function QI(s,l){return new ur(s,l)}ur._flat=de;var Ro=ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ua(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=ur.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ht&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){ur.prototype._setLatLngs.call(this,s),se(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return se(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new dt(l,l);if(s=new zt(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,T;p<v;p++)T=Fa(this._rings[p],s,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,T,$,K,J,ct;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(T=0,J=this._parts.length;T<J;T++)for(d=this._parts[T],$=0,ct=d.length,K=ct-1;$<ct;K=$++)p=d[$],v=d[K],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||ur.prototype._containsPoint.call(this,s,!0)}});function XI(s,l){return new Ro(s,l)}var hr=cr.extend({initialize:function(s,l){I(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=B(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var T=this.options;if(T.filter&&!T.filter(s))return this;var $=Sc(s,T);return $?($.feature=Lc(s),$.defaultOptions=$.options,this.resetStyle($),T.onEachFeature&&T.onEachFeature(s,$),this.addLayer($)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Sc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],T=l&&l.pointToLayer,$=l&&l.coordsToLatLng||Yh,K,J,ct,gt;if(!p&&!d)return null;switch(d.type){case"Point":return K=$(p),gp(T,s,K,l);case"MultiPoint":for(ct=0,gt=p.length;ct<gt;ct++)K=$(p[ct]),v.push(gp(T,s,K,l));return new cr(v);case"LineString":case"MultiLineString":return J=Cc(p,d.type==="LineString"?0:1,$),new ur(J,l);case"Polygon":case"MultiPolygon":return J=Cc(p,d.type==="Polygon"?1:2,$),new Ro(J,l);case"GeometryCollection":for(ct=0,gt=d.geometries.length;ct<gt;ct++){var Ot=Sc({geometry:d.geometries[ct],type:"Feature",properties:s.properties},l);Ot&&v.push(Ot)}return new cr(v);case"FeatureCollection":for(ct=0,gt=d.features.length;ct<gt;ct++){var qt=Sc(d.features[ct],l);qt&&v.push(qt)}return new cr(v);default:throw new Error("Invalid GeoJSON object.")}}function gp(s,l,d,p){return s?s(l,d):new Pc(d,p&&p.markersInheritOptions&&p)}function Yh(s){return new Ht(s[1],s[0],s[2])}function Cc(s,l,d){for(var p=[],v=0,T=s.length,$;v<T;v++)$=l?Cc(s[v],l-1,d):(d||Yh)(s[v]),p.push($);return p}function Qh(s,l){return s=Ct(s),s.alt!==void 0?[y(s.lng,l),y(s.lat,l),y(s.alt,l)]:[y(s.lng,l),y(s.lat,l)]}function kc(s,l,d,p){for(var v=[],T=0,$=s.length;T<$;T++)v.push(l?kc(s[T],se(s[T])?0:l-1,d,p):Qh(s[T],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Oo(s,l){return s.feature?r({},s.feature,{geometry:l}):Lc(l)}function Lc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Xh={toGeoJSON:function(s){return Oo(this,{type:"Point",coordinates:Qh(this.getLatLng(),s)})}};Pc.include(Xh),Kh.include(Xh),Ac.include(Xh),ur.include({toGeoJSON:function(s){var l=!se(this._latlngs),d=kc(this._latlngs,l?1:0,!1,s);return Oo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ro.include({toGeoJSON:function(s){var l=!se(this._latlngs),d=l&&!se(this._latlngs[0]),p=kc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Oo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),ko.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Oo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var T=v.toGeoJSON(s);if(d)p.push(T.geometry);else{var $=Lc(T);$.type==="FeatureCollection"?p.push.apply(p,$.features):p.push($)}}}),d?Oo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function yp(s,l){return new hr(s,l)}var JI=yp,Rc=mi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Qt(l),I(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(It(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){re(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Qn(this._image),this},bringToBack:function(){return this._map&&Xn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Qt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:ne("img");if(It(l,"leaflet-image-layer"),this._zoomAnimated&&It(l,"leaflet-zoom-animated"),this.options.className&&It(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;sr(this._image,d,l)},_reset:function(){var s=this._image,l=new zt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Me(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){On(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),tb=function(s,l,d){return new Rc(s,l,d)},vp=Rc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:ne("video");if(It(l,"leaflet-image-layer"),this._zoomAnimated&&It(l,"leaflet-zoom-animated"),this.options.className&&It(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var $=ne("source");$.src=this._url[T],l.appendChild($)}}});function eb(s,l,d){return new vp(s,l,d)}var wp=Rc.extend({_initImage:function(){var s=this._image=this._url;It(s,"leaflet-image-layer"),this._zoomAnimated&&It(s,"leaflet-zoom-animated"),this.options.className&&It(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function nb(s,l,d){return new wp(s,l,d)}var Ri=mi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ht||B(s))?(this._latlng=Ct(s),I(this,l)):(I(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&On(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&On(this._container,1),this.bringToFront(),this.options.interactive&&(It(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(On(this._container,0),this._removeTimeout=setTimeout(a(re,void 0,this._container),200)):re(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ct(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qn(this._container),this},bringToBack:function(){return this._map&&Xn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof cr){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=At(this.options.offset),d=this._getAnchor();this._zoomAnimated?Me(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Wt.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),mi.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(I(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Oc=Ri.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ri.prototype.openOn.call(this,s)},onAdd:function(s){Ri.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zr||this._source.on("preclick",he))},onRemove:function(s){Ri.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zr||this._source.off("preclick",he))},getEvents:function(){var s=Ri.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ne("div",s+"-content-wrapper",l);if(this._contentNode=ne("div",s+"-content",d),Ns(l),La(this._contentNode),Nt(l,"contextmenu",he),this._tipContainer=ne("div",s+"-tip-container",l),this._tip=ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=ne("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(p,"click",function(v){qe(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,T="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",It(s,T)):be(s,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();Me(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Fr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new dt(this._containerLeft,-d-this._containerBottom);v._add(or(this._container));var T=s.layerPointToContainerPoint(v),$=At(this.options.autoPanPadding),K=At(this.options.autoPanPaddingTopLeft||$),J=At(this.options.autoPanPaddingBottomRight||$),ct=s.getSize(),gt=0,Ot=0;T.x+p+J.x>ct.x&&(gt=T.x+p-ct.x+J.x),T.x-gt-K.x<0&&(gt=T.x-K.x),T.y+d+J.y>ct.y&&(Ot=T.y+d-ct.y+J.y),T.y-Ot-K.y<0&&(Ot=T.y-K.y),(gt||Ot)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([gt,Ot]))}},_getAnchor:function(){return At(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ib=function(s,l){return new Oc(s,l)};Wt.mergeOptions({closePopupOnClick:!0}),Wt.include({openPopup:function(s,l,d){return this._initOverlay(Oc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),mi.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Oc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof cr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ai(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof zr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var xc=Ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ri.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ri.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ri.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,T=p.latLngToContainerPoint(p.getCenter()),$=p.layerPointToContainerPoint(s),K=this.options.direction,J=v.offsetWidth,ct=v.offsetHeight,gt=At(this.options.offset),Ot=this._getAnchor();K==="top"?(l=J/2,d=ct):K==="bottom"?(l=J/2,d=0):K==="center"?(l=J/2,d=ct/2):K==="right"?(l=0,d=ct/2):K==="left"?(l=J,d=ct/2):$.x<T.x?(K="right",l=0,d=ct/2):(K="left",l=J+(gt.x+Ot.x)*2,d=ct/2),s=s.subtract(At(l,d,!0)).add(gt).add(Ot),be(v,"leaflet-tooltip-right"),be(v,"leaflet-tooltip-left"),be(v,"leaflet-tooltip-top"),be(v,"leaflet-tooltip-bottom"),It(v,"leaflet-tooltip-"+K),Me(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&On(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return At(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),rb=function(s,l){return new xc(s,l)};Wt.include({openTooltip:function(s,l,d){return this._initOverlay(xc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),mi.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof cr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Nt(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Nt(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ep=Lo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Tn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=At(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function sb(s){return new Ep(s)}Lo.Default=$a;var za=mi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),re(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof dt?s:new dt(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,T;p<v;p++)T=l[p].style.zIndex,l[p]!==this._container&&T&&(d=s(d,+T));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pt.ielt9){On(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var T=Math.min(1,(s-v.loaded)/200);On(v.el,T),T<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(j(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(re(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),_(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)re(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),T=Math.floor(l/2),$=d-1,K=new dt(+v,+T);K.z=+$;var J=this._tileCoordsToKey(K),ct=this._tiles[J];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),$>p?this._retainParent(v,T,$,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var T=2*l;T<2*l+2;T++){var $=new dt(v,T);$.z=d+1;var K=this._tileCoordsToKey($),J=this._tiles[K];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);d+1<p&&this._retainChildren(v,T,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var T=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||T)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();Pt.any3d?sr(s.el,v,p):Me(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),T=l.getSize().divideBy(p*2);return new zt(v.subtract(T),v.add(T))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),T=v.getCenter(),$=[],K=this.options.keepBuffer,J=new zt(v.getBottomLeft().subtract([K,-K]),v.getTopRight().add([K,-K]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var gt=this._tiles[ct].coords;(gt.z!==this._tileZoom||!J.contains(new dt(gt.x,gt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var Ot=v.min.y;Ot<=v.max.y;Ot++)for(var qt=v.min.x;qt<=v.max.x;qt++){var bn=new dt(qt,Ot);if(bn.z=this._tileZoom,!!this._isValidTile(bn)){var rn=this._tiles[this._tileCoordsToKey(bn)];rn?rn.current=!0:$.push(bn)}}if($.sort(function(Mn,Mo){return Mn.distanceTo(T)-Mo.distanceTo(T)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ni=document.createDocumentFragment();for(qt=0;qt<$.length;qt++)this._addTile($[qt],ni);this._level.el.appendChild(ni)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Qt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),T=l.unproject(p,s.z),$=l.unproject(v,s.z);return[T,$]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new ye(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new dt(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(re(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){It(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=_,s.onmousemove=_,Pt.ielt9&&this.options.opacity<1&&On(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&x(a(this._tileReady,this,s,null,v)),Me(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(On(d.el,0),j(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(It(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pt.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new dt(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new zt(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function ob(s){return new za(s)}var xo=za.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=I(this,l),l.detectRetina&&Pt.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Nt(d,"load",a(this._tileOnLoad,this,l,d)),Nt(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:Pt.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return D(this._url,r(l,this.options))},_tileOnLoad:function(s,l){Pt.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=_,l.onerror=_,!l.complete)){l.src=Q;var d=this._tiles[s].coords;re(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Q),za.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===Q))return za.prototype._tileReady.call(this,s,l,d)}});function Tp(s,l){return new xo(s,l)}var Ip=xo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=I(this,l);var v=l.detectRetina&&Pt.retina?2:1,T=this.getTileSize();d.width=T.x*v,d.height=T.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,xo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Yt(d.project(l[0]),d.project(l[1])),v=p.min,T=p.max,$=(this._wmsVersion>=1.3&&this._crs===Co?[v.y,v.x,T.y,T.x]:[v.x,v.y,T.x,T.y]).join(","),K=xo.prototype.getTileUrl.call(this,s);return K+M(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function ab(s,l){return new Ip(s,l)}xo.WMS=Ip,Tp.wms=ab;var dr=mi.extend({options:{padding:.1},initialize:function(s){I(this,s),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),It(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),T=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));Pt.any3d?sr(this._container,T,d):Me(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new zt(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bp=dr.extend({options:{tolerance:0},getEvents:function(){var s=dr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Nt(s,"mousemove",this._onMouseMove,this),Nt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){j(this._redrawRequest),delete this._ctx,re(this._container),ge(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=Pt.retina?2:1;Me(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Pt.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[u(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[u(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new zt,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,T,$=s._parts,K=$.length,J=this._ctx;if(K){for(J.beginPath(),d=0;d<K;d++){for(p=0,v=$[d].length;p<v;p++)T=$[d][p],J[p?"lineTo":"moveTo"](T.x,T.y);l&&J.closePath()}this._fillStroke(J,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(be(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(It(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Pp(s){return Pt.canvas?new bp(s):null}var ja=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),lb={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=ja("shape");It(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=ja("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[u(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;re(l),s.removeInteractiveTarget(l),delete this._layers[u(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=ja("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=B(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=ja("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Qn(s._container)},_bringToBack:function(s){Xn(s._container)}},Mc=Pt.vml?ja:it,Ha=dr.extend({_initContainer:function(){this._container=Mc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Mc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){re(this._container),ge(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Me(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Mc("path");s.options.className&&It(l,s.options.className),s.options.interactive&&It(l,"leaflet-interactive"),this._updateStyle(s),this._layers[u(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){re(s._path),s.removeInteractiveTarget(s._path),delete this._layers[u(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,st(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",T=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,T)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Qn(s._path)},_bringToBack:function(s){Xn(s._path)}});Pt.vml&&Ha.include(lb);function Ap(s){return Pt.svg||Pt.vml?new Ha(s):null}Wt.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Pp(s)||Ap(s)}});var Sp=Ro.extend({initialize:function(s,l){Ro.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Qt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function cb(s,l){return new Sp(s,l)}Ha.create=Mc,Ha.pointsToPath=st,hr.geometryToLayer=Sc,hr.coordsToLatLng=Yh,hr.coordsToLatLngs=Cc,hr.latLngToCoords=Qh,hr.latLngsToCoords=kc,hr.getFeature=Oo,hr.asFeature=Lc,Wt.mergeOptions({boxZoom:!0});var Cp=Bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){re(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hi(),yo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Nt(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),It(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new zt(this._point,this._startPoint),d=l.getSize();Me(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(re(this._box),be(this._container,"leaflet-crosshair")),Un(),vo(),ge(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Wt.addInitHook("addHandler","boxZoom",Cp),Wt.mergeOptions({doubleClickZoom:!0});var kp=Bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Wt.addInitHook("addHandler","doubleClickZoom",kp),Wt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Lp=Bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new di(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}It(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Qt(this._map.options.maxBounds);this._offsetLimit=Yt(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,T=(p+l+d)%s-l-d,$=Math.abs(v+d)<Math.abs(T+d)?v:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,$=d.easeLinearity,K=v.multiplyBy($/T),J=K.distanceTo([0,0]),ct=Math.min(d.inertiaMaxSpeed,J),gt=K.multiplyBy(ct/J),Ot=ct/(d.inertiaDeceleration*$),qt=gt.multiplyBy(-Ot/2).round();!qt.x&&!qt.y?l.fire("moveend"):(qt=l._limitOffset(qt,l.options.maxBounds),x(function(){l.panBy(qt,{duration:Ot,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});Wt.addInitHook("addHandler","dragging",Lp),Wt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rp=Bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Nt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ge(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=At(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(At(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ai(s)}}});Wt.addInitHook("addHandler","keyboard",Rp),Wt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Op=Bn.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Oa(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),Ai(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,T=d?Math.ceil(v/d)*d:v,$=s._limitZoom(l+(this._delta>0?T:-T))-l;this._delta=0,this._startTime=null,$&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+$):s.setZoomAround(this._lastMousePos,l+$))}});Wt.addInitHook("addHandler","scrollWheelZoom",Op);var ub=600;Wt.mergeOptions({tapHold:Pt.touchNative&&Pt.safari&&Pt.mobile,tapTolerance:15});var xp=Bn.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new dt(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",qe),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ub),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ge(document,"touchend",qe),ge(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new dt(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Wt.addInitHook("addHandler","tapHold",xp),Wt.mergeOptions({touchZoom:Pt.touch,bounceAtZoomLimits:!0});var Mp=Bn.extend({addHooks:function(){It(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),qe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var T=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&T.x===0&&T.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),j(this._animRequest);var $=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x($,this,!0),qe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,j(this._animRequest),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Wt.addInitHook("addHandler","touchZoom",Mp),Wt.BoxZoom=Cp,Wt.DoubleClickZoom=kp,Wt.Drag=Lp,Wt.Keyboard=Rp,Wt.ScrollWheelZoom=Op,Wt.TapHold=xp,Wt.TouchZoom=Mp,n.Bounds=zt,n.Browser=Pt,n.CRS=tt,n.Canvas=bp,n.Circle=Kh,n.CircleMarker=Ac,n.Class=Kt,n.Control=xn,n.DivIcon=Ep,n.DivOverlay=Ri,n.DomEvent=Vs,n.DomUtil=Zh,n.Draggable=di,n.Evented=Lt,n.FeatureGroup=cr,n.GeoJSON=hr,n.GridLayer=za,n.Handler=Bn,n.Icon=Lo,n.ImageOverlay=Rc,n.LatLng=Ht,n.LatLngBounds=ye,n.Layer=mi,n.LayerGroup=ko,n.LineUtil=ti,n.Map=Wt,n.Marker=Pc,n.Mixin=Ic,n.Path=zr,n.Point=dt,n.PolyUtil=Ao,n.Polygon=Ro,n.Polyline=ur,n.Popup=Oc,n.PosAnimation=Ma,n.Projection=Li,n.Rectangle=Sp,n.Renderer=dr,n.SVG=Ha,n.SVGOverlay=wp,n.TileLayer=xo,n.Tooltip=xc,n.Transformation=Gt,n.Util=V,n.VideoOverlay=vp,n.bind=a,n.bounds=Yt,n.canvas=Pp,n.circle=YI,n.circleMarker=KI,n.control=Ci,n.divIcon=sb,n.extend=r,n.featureGroup=qI,n.geoJSON=yp,n.geoJson=JI,n.gridLayer=ob,n.icon=GI,n.imageOverlay=tb,n.latLng=Ct,n.latLngBounds=Qt,n.layerGroup=WI,n.map=To,n.marker=ZI,n.point=At,n.polygon=XI,n.polyline=QI,n.popup=ib,n.rectangle=cb,n.setOptions=I,n.stamp=u,n.svg=Ap,n.svgOverlay=nb,n.tileLayer=Tp,n.tooltip=rb,n.transformation=N,n.version=i,n.videoOverlay=eb;var hb=window.L;n.noConflict=function(){return window.L=hb,this},window.L=n}))})(sl,sl.exports)),sl.exports}var NV=MV();const Ni=OV(NV);var ol={exports:{}},DV=ol.exports,Jy;function VV(){return Jy||(Jy=1,(function(e,t){(function(n,i){i(t)})(DV,function(n){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(o){L.Util.setOptions(this,o),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var a=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,a?this._withAnimation:this._noAnimation),this._markerCluster=a?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(o){if(o instanceof L.LayerGroup)return this.addLayers([o]);if(!o.getLatLng)return this._nonPointGroup.addLayer(o),this.fire("layeradd",{layer:o}),this;if(!this._map)return this._needsClustering.push(o),this.fire("layeradd",{layer:o}),this;if(this.hasLayer(o))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(o,this._maxZoom),this.fire("layeradd",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var a=o,c=this._zoom;if(o.__parent)for(;a.__parent._zoom>=c;)a=a.__parent;return this._currentShownBounds.contains(a.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(o,a):this._animationAddLayerNonAnimated(o,a)),this},removeLayer:function(o){return o instanceof L.LayerGroup?this.removeLayers([o]):o.getLatLng?this._map?o.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(o)),this._removeLayer(o,!0),this.fire("layerremove",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),o.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(o)&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,o)&&this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o}),this):(this._nonPointGroup.removeLayer(o),this.fire("layerremove",{layer:o}),this)},addLayers:function(o,a){if(!L.Util.isArray(o))return this.addLayer(o);var c=this._featureGroup,u=this._nonPointGroup,f=this.options.chunkedLoading,m=this.options.chunkInterval,_=this.options.chunkProgress,y=o.length,w=0,b=!0,I;if(this._map){var M=new Date().getTime(),A=L.bind(function(){var B=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();w<y;w++){if(f&&w%200===0){var z=new Date().getTime()-B;if(z>m)break}if(I=o[w],I instanceof L.LayerGroup){b&&(o=o.slice(),b=!1),this._extractNonGroupLayers(I,o),y=o.length;continue}if(!I.getLatLng){u.addLayer(I),a||this.fire("layeradd",{layer:I});continue}if(!this.hasLayer(I)&&(this._addLayer(I,this._maxZoom),a||this.fire("layeradd",{layer:I}),I.__parent&&I.__parent.getChildCount()===2)){var Q=I.__parent.getAllChildMarkers(),rt=Q[0]===I?Q[1]:Q[0];c.removeLayer(rt)}}_&&_(w,y,new Date().getTime()-M),w===y?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(A,this.options.chunkDelay)},this);A()}else for(var D=this._needsClustering;w<y;w++){if(I=o[w],I instanceof L.LayerGroup){b&&(o=o.slice(),b=!1),this._extractNonGroupLayers(I,o),y=o.length;continue}if(!I.getLatLng){u.addLayer(I);continue}this.hasLayer(I)||D.push(I)}return this},removeLayers:function(o){var a,c,u=o.length,f=this._featureGroup,m=this._nonPointGroup,_=!0;if(!this._map){for(a=0;a<u;a++){if(c=o[a],c instanceof L.LayerGroup){_&&(o=o.slice(),_=!1),this._extractNonGroupLayers(c,o),u=o.length;continue}this._arraySplice(this._needsClustering,c),m.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c})}return this}if(this._unspiderfy){this._unspiderfy();var y=o.slice(),w=u;for(a=0;a<w;a++){if(c=y[a],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,y),w=y.length;continue}this._unspiderfyLayer(c)}}for(a=0;a<u;a++){if(c=o[a],c instanceof L.LayerGroup){_&&(o=o.slice(),_=!1),this._extractNonGroupLayers(c,o),u=o.length;continue}if(!c.__parent){m.removeLayer(c),this.fire("layerremove",{layer:c});continue}this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),f.hasLayer(c)&&(f.removeLayer(c),c.clusterShow&&c.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(o){o.off(this._childMarkerEventHandlers,this),delete o.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var o=new L.LatLngBounds;this._topClusterLevel&&o.extend(this._topClusterLevel._bounds);for(var a=this._needsClustering.length-1;a>=0;a--)o.extend(this._needsClustering[a].getLatLng());return o.extend(this._nonPointGroup.getBounds()),o},eachLayer:function(o,a){var c=this._needsClustering.slice(),u=this._needsRemoving,f,m,_;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),m=c.length-1;m>=0;m--){for(f=!0,_=u.length-1;_>=0;_--)if(u[_].layer===c[m]){f=!1;break}f&&o.call(a,c[m])}this._nonPointGroup.eachLayer(o,a)},getLayers:function(){var o=[];return this.eachLayer(function(a){o.push(a)}),o},getLayer:function(o){var a=null;return o=parseInt(o,10),this.eachLayer(function(c){L.stamp(c)===o&&(a=c)}),a},hasLayer:function(o){if(!o)return!1;var a,c=this._needsClustering;for(a=c.length-1;a>=0;a--)if(c[a]===o)return!0;for(c=this._needsRemoving,a=c.length-1;a>=0;a--)if(c[a].layer===o)return!1;return!!(o.__parent&&o.__parent._group===this)||this._nonPointGroup.hasLayer(o)},zoomToShowLayer:function(o,a){var c=this._map;typeof a!="function"&&(a=function(){});var u=function(){(c.hasLayer(o)||c.hasLayer(o.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",u,this),this.off("animationend",u,this),c.hasLayer(o)?a():o.__parent._icon&&(this.once("spiderfied",a,this),o.__parent.spiderfy()))};o._icon&&this._map.getBounds().contains(o.getLatLng())?a():o.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",u,this),this._map.panTo(o.getLatLng())):(this._map.on("moveend",u,this),this.on("animationend",u,this),o.__parent.zoomToBounds())},onAdd:function(o){this._map=o;var a,c,u;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(o),this._nonPointGroup.addTo(o),this._gridClusters||this._generateInitialClusters(),this._maxLat=o.options.crs.projection.MAX_LATITUDE,a=0,c=this._needsRemoving.length;a<c;a++)u=this._needsRemoving[a],u.newlatlng=u.layer._latlng,u.layer._latlng=u.latlng;for(a=0,c=this._needsRemoving.length;a<c;a++)u=this._needsRemoving[a],this._removeLayer(u.layer,!0),u.layer._latlng=u.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(o){o.off("zoomend",this._zoomEnd,this),o.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(o){for(var a=o;a&&!a._icon;)a=a.__parent;return a||null},_arraySplice:function(o,a){for(var c=o.length-1;c>=0;c--)if(o[c]===a)return o.splice(c,1),!0},_removeFromGridUnclustered:function(o,a){for(var c=this._map,u=this._gridUnclustered,f=Math.floor(this._map.getMinZoom());a>=f&&u[a].removeObject(o,c.project(o.getLatLng(),a));a--);},_childMarkerDragStart:function(o){o.target.__dragStart=o.target._latlng},_childMarkerMoved:function(o){if(!this._ignoreMove&&!o.target.__dragStart){var a=o.target._popup&&o.target._popup.isOpen();this._moveChild(o.target,o.oldLatLng,o.latlng),a&&o.target.openPopup()}},_moveChild:function(o,a,c){o._latlng=a,this.removeLayer(o),o._latlng=c,this.addLayer(o)},_childMarkerDragEnd:function(o){var a=o.target.__dragStart;delete o.target.__dragStart,a&&this._moveChild(o.target,a,o.target._latlng)},_removeLayer:function(o,a,c){var u=this._gridClusters,f=this._gridUnclustered,m=this._featureGroup,_=this._map,y=Math.floor(this._map.getMinZoom());a&&this._removeFromGridUnclustered(o,this._maxZoom);var w=o.__parent,b=w._markers,I;for(this._arraySplice(b,o);w&&(w._childCount--,w._boundsNeedUpdate=!0,!(w._zoom<y));)a&&w._childCount<=1?(I=w._markers[0]===o?w._markers[1]:w._markers[0],u[w._zoom].removeObject(w,_.project(w._cLatLng,w._zoom)),f[w._zoom].addObject(I,_.project(I.getLatLng(),w._zoom)),this._arraySplice(w.__parent._childClusters,w),w.__parent._markers.push(I),I.__parent=w.__parent,w._icon&&(m.removeLayer(w),c||m.addLayer(I))):w._iconNeedsUpdate=!0,w=w.__parent;delete o.__parent},_isOrIsParent:function(o,a){for(;a;){if(o===a)return!0;a=a.parentNode}return!1},fire:function(o,a,c){if(a&&a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;o="cluster"+o}L.FeatureGroup.prototype.fire.call(this,o,a,c)},listens:function(o,a){return L.FeatureGroup.prototype.listens.call(this,o,a)||L.FeatureGroup.prototype.listens.call(this,"cluster"+o,a)},_defaultIconCreateFunction:function(o){var a=o.getChildCount(),c=" marker-cluster-";return a<10?c+="small":a<100?c+="medium":c+="large",new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var o=this._map,a=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,u=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom;(a||u||f)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),o.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(o){var a=o.layer,c=a;if(!(o.type==="clusterkeypress"&&o.originalEvent&&o.originalEvent.keyCode!==13)){for(;c._childClusters.length===1;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===a._childCount&&this.options.spiderfyOnMaxZoom?a.spiderfy():this.options.zoomToBoundsOnClick&&a.zoomToBounds(),this.options.spiderfyOnEveryZoom&&a.spiderfy(),o.originalEvent&&o.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(o){var a=this._map;this._inZoomAnimation||(this._shownPolygon&&a.removeLayer(this._shownPolygon),o.layer.getChildCount()>2&&o.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(o.layer.getConvexHull(),this.options.polygonOptions),a.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var o=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,u=this.options.spiderfyOnEveryZoom,f=this._map;(o||c||u)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),f.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var o=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),o),this._currentShownBounds=o}},_generateInitialClusters:function(){var o=Math.ceil(this._map.getMaxZoom()),a=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,u=c;typeof c!="function"&&(u=function(){return c}),this.options.disableClusteringAtZoom!==null&&(o=this.options.disableClusteringAtZoom-1),this._maxZoom=o,this._gridClusters={},this._gridUnclustered={};for(var f=o;f>=a;f--)this._gridClusters[f]=new L.DistanceGrid(u(f)),this._gridUnclustered[f]=new L.DistanceGrid(u(f));this._topClusterLevel=new this._markerCluster(this,a-1)},_addLayer:function(o,a){var c=this._gridClusters,u=this._gridUnclustered,f=Math.floor(this._map.getMinZoom()),m,_;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(o),o.on(this._childMarkerEventHandlers,this);a>=f;a--){m=this._map.project(o.getLatLng(),a);var y=c[a].getNearObject(m);if(y){y._addChild(o),o.__parent=y;return}if(y=u[a].getNearObject(m),y){var w=y.__parent;w&&this._removeLayer(y,!1);var b=new this._markerCluster(this,a,y,o);c[a].addObject(b,this._map.project(b._cLatLng,a)),y.__parent=b,o.__parent=b;var I=b;for(_=a-1;_>w._zoom;_--)I=new this._markerCluster(this,_,I),c[_].addObject(I,this._map.project(y.getLatLng(),_));w._addChild(I),this._removeFromGridUnclustered(y,a);return}u[a].addObject(o,m)}this._topClusterLevel._addChild(o),o.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(o){o instanceof L.MarkerCluster&&o._iconNeedsUpdate&&o._updateIcon()})},_enqueue:function(o){this._queue.push(o),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var o=0;o<this._queue.length;o++)this._queue[o].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var o=Math.round(this._map._zoom);this._processQueue(),this._zoom<o&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,o)):this._zoom>o?(this._animationStart(),this._animationZoomOut(this._zoom,o)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(o){var a=this._maxLat;return a!==void 0&&(o.getNorth()>=a&&(o._northEast.lat=1/0),o.getSouth()<=-a&&(o._southWest.lat=-1/0)),o},_animationAddLayerNonAnimated:function(o,a){if(a===o)this._featureGroup.addLayer(o);else if(a._childCount===2){a._addToMap();var c=a.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else a._updateIcon()},_extractNonGroupLayers:function(o,a){var c=o.getLayers(),u=0,f;for(a=a||[];u<c.length;u++){if(f=c[u],f instanceof L.LayerGroup){this._extractNonGroupLayers(f,a);continue}a.push(f)}return a},_overrideMarkerIcon:function(o){var a=o.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[o]}});return a}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(o,a){this._animationAddLayerNonAnimated(o,a)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(o,a){var c=this._getExpandedVisibleBounds(),u=this._featureGroup,f=Math.floor(this._map.getMinZoom()),m;this._ignoreMove=!0,this._topClusterLevel._recursively(c,o,f,function(_){var y=_._latlng,w=_._markers,b;for(c.contains(y)||(y=null),_._isSingleParent()&&o+1===a?(u.removeLayer(_),_._recursivelyAddChildrenToMap(null,a,c)):(_.clusterHide(),_._recursivelyAddChildrenToMap(y,a,c)),m=w.length-1;m>=0;m--)b=w[m],c.contains(b._latlng)||u.removeLayer(b)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(c,a),u.eachLayer(function(_){!(_ instanceof L.MarkerCluster)&&_._icon&&_.clusterShow()}),this._topClusterLevel._recursively(c,o,a,function(_){_._recursivelyRestoreChildPositions(a)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(c,o,f,function(_){u.removeLayer(_),_.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(o,a){this._animationZoomOutSingle(this._topClusterLevel,o-1,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o,this._getExpandedVisibleBounds())},_animationAddLayer:function(o,a){var c=this,u=this._featureGroup;u.addLayer(o),a!==o&&(a._childCount>2?(a._updateIcon(),this._forceLayout(),this._animationStart(),o._setPos(this._map.latLngToLayerPoint(a.getLatLng())),o.clusterHide(),this._enqueue(function(){u.removeLayer(o),o.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(a,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(o,a,c){var u=this._getExpandedVisibleBounds(),f=Math.floor(this._map.getMinZoom());o._recursivelyAnimateChildrenInAndAddSelfToMap(u,f,a+1,c);var m=this;this._forceLayout(),o._recursivelyBecomeVisible(u,c),this._enqueue(function(){if(o._childCount===1){var _=o._markers[0];this._ignoreMove=!0,_.setLatLng(_.getLatLng()),this._ignoreMove=!1,_.clusterShow&&_.clusterShow()}else o._recursively(u,c,f,function(y){y._recursivelyRemoveChildrenFromMap(u,f,a+1)});m._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(o){return new L.MarkerClusterGroup(o)};var r=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(o,a,c,u){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this,pane:o.options.clusterPane}),this._group=o,this._zoom=a,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),u&&this._addChild(u)},getAllChildMarkers:function(o,a){o=o||[];for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c].getAllChildMarkers(o,a);for(var u=this._markers.length-1;u>=0;u--)a&&this._markers[u].__dragStart||o.push(this._markers[u]);return o},getChildCount:function(){return this._childCount},zoomToBounds:function(o){for(var a=this._childClusters.slice(),c=this._group._map,u=c.getBoundsZoom(this._bounds),f=this._zoom+1,m=c.getZoom(),_;a.length>0&&u>f;){f++;var y=[];for(_=0;_<a.length;_++)y=y.concat(a[_]._childClusters);a=y}u>f?this._group._map.setView(this._latlng,f):u<=m?this._group._map.setView(this._latlng,m+1):this._group._map.fitBounds(this._bounds,o)},getBounds:function(){var o=new L.LatLngBounds;return o.extend(this._bounds),o},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(o,a){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(o),o instanceof L.MarkerCluster?(a||(this._childClusters.push(o),o.__parent=this),this._childCount+=o._childCount):(a||this._markers.push(o),this._childCount++),this.__parent&&this.__parent._addChild(o,!0)},_setClusterCenter:function(o){this._cLatLng||(this._cLatLng=o._cLatLng||o._latlng)},_resetBounds:function(){var o=this._bounds;o._southWest&&(o._southWest.lat=1/0,o._southWest.lng=1/0),o._northEast&&(o._northEast.lat=-1/0,o._northEast.lng=-1/0)},_recalculateBounds:function(){var o=this._markers,a=this._childClusters,c=0,u=0,f=this._childCount,m,_,y,w;if(f!==0){for(this._resetBounds(),m=0;m<o.length;m++)y=o[m]._latlng,this._bounds.extend(y),c+=y.lat,u+=y.lng;for(m=0;m<a.length;m++)_=a[m],_._boundsNeedUpdate&&_._recalculateBounds(),this._bounds.extend(_._bounds),y=_._wLatLng,w=_._childCount,c+=y.lat*w,u+=y.lng*w;this._latlng=this._wLatLng=new L.LatLng(c/f,u/f),this._boundsNeedUpdate=!1}},_addToMap:function(o){o&&(this._backupLatlng=this._latlng,this.setLatLng(o)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(o,a,c){this._recursively(o,this._group._map.getMinZoom(),c-1,function(u){var f=u._markers,m,_;for(m=f.length-1;m>=0;m--)_=f[m],_._icon&&(_._setPos(a),_.clusterHide())},function(u){var f=u._childClusters,m,_;for(m=f.length-1;m>=0;m--)_=f[m],_._icon&&(_._setPos(a),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(o,a,c,u){this._recursively(o,u,a,function(f){f._recursivelyAnimateChildrenIn(o,f._group._map.latLngToLayerPoint(f.getLatLng()).round(),c),f._isSingleParent()&&c-1===u?(f.clusterShow(),f._recursivelyRemoveChildrenFromMap(o,a,c)):f.clusterHide(),f._addToMap()})},_recursivelyBecomeVisible:function(o,a){this._recursively(o,this._group._map.getMinZoom(),a,null,function(c){c.clusterShow()})},_recursivelyAddChildrenToMap:function(o,a,c){this._recursively(c,this._group._map.getMinZoom()-1,a,function(u){if(a!==u._zoom)for(var f=u._markers.length-1;f>=0;f--){var m=u._markers[f];c.contains(m._latlng)&&(o&&(m._backupLatlng=m.getLatLng(),m.setLatLng(o),m.clusterHide&&m.clusterHide()),u._group._featureGroup.addLayer(m))}},function(u){u._addToMap(o)})},_recursivelyRestoreChildPositions:function(o){for(var a=this._markers.length-1;a>=0;a--){var c=this._markers[a];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(o-1===this._zoom)for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._restorePosition();else for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f]._recursivelyRestoreChildPositions(o)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(o,a,c,u){var f,m;this._recursively(o,a-1,c-1,function(_){for(m=_._markers.length-1;m>=0;m--)f=_._markers[m],(!u||!u.contains(f._latlng))&&(_._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())},function(_){for(m=_._childClusters.length-1;m>=0;m--)f=_._childClusters[m],(!u||!u.contains(f._latlng))&&(_._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())})},_recursively:function(o,a,c,u,f){var m=this._childClusters,_=this._zoom,y,w;if(a<=_&&(u&&u(this),f&&_===c&&f(this)),_<a||_<c)for(y=m.length-1;y>=0;y--)w=m[y],w._boundsNeedUpdate&&w._recalculateBounds(),o.intersects(w._bounds)&&w._recursively(o,a,c,u,f)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var o=this.options.opacity;return this.setOpacity(0),this.options.opacity=o,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(o){this._cellSize=o,this._sqCellSize=o*o,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(o,a){var c=this._getCoord(a.x),u=this._getCoord(a.y),f=this._grid,m=f[u]=f[u]||{},_=m[c]=m[c]||[],y=L.Util.stamp(o);this._objectPoint[y]=a,_.push(o)},updateObject:function(o,a){this.removeObject(o),this.addObject(o,a)},removeObject:function(o,a){var c=this._getCoord(a.x),u=this._getCoord(a.y),f=this._grid,m=f[u]=f[u]||{},_=m[c]=m[c]||[],y,w;for(delete this._objectPoint[L.Util.stamp(o)],y=0,w=_.length;y<w;y++)if(_[y]===o)return _.splice(y,1),w===1&&delete m[c],!0},eachObject:function(o,a){var c,u,f,m,_,y,w,b=this._grid;for(c in b){_=b[c];for(u in _)for(y=_[u],f=0,m=y.length;f<m;f++)w=o.call(a,y[f]),w&&(f--,m--)}},getNearObject:function(o){var a=this._getCoord(o.x),c=this._getCoord(o.y),u,f,m,_,y,w,b,I,M=this._objectPoint,A=this._sqCellSize,D=null;for(u=c-1;u<=c+1;u++)if(_=this._grid[u],_){for(f=a-1;f<=a+1;f++)if(y=_[f],y)for(m=0,w=y.length;m<w;m++)b=y[m],I=this._sqDist(M[L.Util.stamp(b)],o),(I<A||I<=A&&D===null)&&(A=I,D=b)}return D},_getCoord:function(o){var a=Math.floor(o/this._cellSize);return isFinite(a)?a:o},_sqDist:function(o,a){var c=a.x-o.x,u=a.y-o.y;return c*c+u*u}},(function(){L.QuickHull={getDistant:function(o,a){var c=a[1].lat-a[0].lat,u=a[0].lng-a[1].lng;return u*(o.lat-a[0].lat)+c*(o.lng-a[0].lng)},findMostDistantPointFromBaseLine:function(o,a){var c=0,u=null,f=[],m,_,y;for(m=a.length-1;m>=0;m--){if(_=a[m],y=this.getDistant(_,o),y>0)f.push(_);else continue;y>c&&(c=y,u=_)}return{maxPoint:u,newPoints:f}},buildConvexHull:function(o,a){var c=[],u=this.findMostDistantPointFromBaseLine(o,a);return u.maxPoint?(c=c.concat(this.buildConvexHull([o[0],u.maxPoint],u.newPoints)),c=c.concat(this.buildConvexHull([u.maxPoint,o[1]],u.newPoints)),c):[o[0]]},getConvexHull:function(o){var a=!1,c=!1,u=!1,f=!1,m=null,_=null,y=null,w=null,b=null,I=null,M;for(M=o.length-1;M>=0;M--){var A=o[M];(a===!1||A.lat>a)&&(m=A,a=A.lat),(c===!1||A.lat<c)&&(_=A,c=A.lat),(u===!1||A.lng>u)&&(y=A,u=A.lng),(f===!1||A.lng<f)&&(w=A,f=A.lng)}c!==a?(I=_,b=m):(I=w,b=y);var D=[].concat(this.buildConvexHull([I,b],o),this.buildConvexHull([b,I],o));return D}}})(),L.MarkerCluster.include({getConvexHull:function(){var o=this.getAllChildMarkers(),a=[],c,u;for(u=o.length-1;u>=0;u--)c=o[u].getLatLng(),a.push(c);return L.QuickHull.getConvexHull(a)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var o=this.getAllChildMarkers(null,!0),a=this._group,c=a._map,u=c.latLngToLayerPoint(this._latlng),f;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?f=this._group.options.spiderfyShapePositions(o.length,u):o.length>=this._circleSpiralSwitchover?f=this._generatePointsSpiral(o.length,u):(u.y+=10,f=this._generatePointsCircle(o.length,u)),this._animationSpiderfy(o,f)}},unspiderfy:function(o){this._group._inZoomAnimation||(this._animationUnspiderfy(o),this._group._spiderfied=null)},_generatePointsCircle:function(o,a){var c=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+o),u=c/this._2PI,f=this._2PI/o,m=[],_,y;for(u=Math.max(u,35),m.length=o,_=0;_<o;_++)y=this._circleStartAngle+_*f,m[_]=new L.Point(a.x+u*Math.cos(y),a.y+u*Math.sin(y))._round();return m},_generatePointsSpiral:function(o,a){var c=this._group.options.spiderfyDistanceMultiplier,u=c*this._spiralLengthStart,f=c*this._spiralFootSeparation,m=c*this._spiralLengthFactor*this._2PI,_=0,y=[],w;for(y.length=o,w=o;w>=0;w--)w<o&&(y[w]=new L.Point(a.x+u*Math.cos(_),a.y+u*Math.sin(_))._round()),_+=f/u+w*5e-4,u+=m/_;return y},_noanimationUnspiderfy:function(){var o=this._group,a=o._map,c=o._featureGroup,u=this.getAllChildMarkers(null,!0),f,m;for(o._ignoreMove=!0,this.setOpacity(1),m=u.length-1;m>=0;m--)f=u[m],c.removeLayer(f),f._preSpiderfyLatlng&&(f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng),f.setZIndexOffset&&f.setZIndexOffset(0),f._spiderLeg&&(a.removeLayer(f._spiderLeg),delete f._spiderLeg);o.fire("unspiderfied",{cluster:this,markers:u}),o._ignoreMove=!1,o._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(o,a){var c=this._group,u=c._map,f=c._featureGroup,m=this._group.options.spiderLegPolylineOptions,_,y,w,b;for(c._ignoreMove=!0,_=0;_<o.length;_++)b=u.layerPointToLatLng(a[_]),y=o[_],w=new L.Polyline([this._latlng,b],m),u.addLayer(w),y._spiderLeg=w,y._preSpiderfyLatlng=y._latlng,y.setLatLng(b),y.setZIndexOffset&&y.setZIndexOffset(1e6),f.addLayer(y);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:o})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(o,a){var c=this,u=this._group,f=u._map,m=u._featureGroup,_=this._latlng,y=f.latLngToLayerPoint(_),w=L.Path.SVG,b=L.extend({},this._group.options.spiderLegPolylineOptions),I=b.opacity,M,A,D,B,z,Q;for(I===void 0&&(I=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),w?(b.opacity=0,b.className=(b.className||"")+" leaflet-cluster-spider-leg"):b.opacity=I,u._ignoreMove=!0,M=0;M<o.length;M++)A=o[M],Q=f.layerPointToLatLng(a[M]),D=new L.Polyline([_,Q],b),f.addLayer(D),A._spiderLeg=D,w&&(B=D._path,z=B.getTotalLength()+.1,B.style.strokeDasharray=z,B.style.strokeDashoffset=z),A.setZIndexOffset&&A.setZIndexOffset(1e6),A.clusterHide&&A.clusterHide(),m.addLayer(A),A._setPos&&A._setPos(y);for(u._forceLayout(),u._animationStart(),M=o.length-1;M>=0;M--)Q=f.layerPointToLatLng(a[M]),A=o[M],A._preSpiderfyLatlng=A._latlng,A.setLatLng(Q),A.clusterShow&&A.clusterShow(),w&&(D=A._spiderLeg,B=D._path,B.style.strokeDashoffset=0,D.setStyle({opacity:I}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:c,markers:o})},200)},_animationUnspiderfy:function(o){var a=this,c=this._group,u=c._map,f=c._featureGroup,m=o?u._latLngToNewLayerPoint(this._latlng,o.zoom,o.center):u.latLngToLayerPoint(this._latlng),_=this.getAllChildMarkers(null,!0),y=L.Path.SVG,w,b,I,M,A,D;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),b=_.length-1;b>=0;b--)w=_[b],w._preSpiderfyLatlng&&(w.closePopup(),w.setLatLng(w._preSpiderfyLatlng),delete w._preSpiderfyLatlng,D=!0,w._setPos&&(w._setPos(m),D=!1),w.clusterHide&&(w.clusterHide(),D=!1),D&&f.removeLayer(w),y&&(I=w._spiderLeg,M=I._path,A=M.getTotalLength()+.1,M.style.strokeDashoffset=A,I.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout(function(){var B=0;for(b=_.length-1;b>=0;b--)w=_[b],w._spiderLeg&&B++;for(b=_.length-1;b>=0;b--)w=_[b],w._spiderLeg&&(w.clusterShow&&w.clusterShow(),w.setZIndexOffset&&w.setZIndexOffset(0),B>1&&f.removeLayer(w),u.removeLayer(w._spiderLeg),delete w._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:a,markers:_})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(o){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(o))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(o){this._spiderfied&&this._spiderfied.unspiderfy(o)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(o){o._spiderLeg&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow(),o.setZIndexOffset&&o.setZIndexOffset(0),this._map.removeLayer(o._spiderLeg),delete o._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(o){return o?o instanceof L.MarkerClusterGroup?o=o._topClusterLevel.getAllChildMarkers():o instanceof L.LayerGroup?o=o._layers:o instanceof L.MarkerCluster?o=o.getAllChildMarkers():o instanceof L.Marker&&(o=[o]):o=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(o),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(o),this},_flagParentsIconsNeedUpdate:function(o){var a,c;for(a in o)for(c=o[a].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(o){var a,c;for(a in o)c=o[a],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(o,a){var c=this.options.icon;return L.setOptions(c,o),this.setIcon(c),a&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=i,n.MarkerCluster=r,Object.defineProperty(n,"__esModule",{value:!0})})})(ol,ol.exports)),ol.exports}VV();const FV={class:"landmark-map"},UV={key:0,class:"landmark-map__position-info"},BV=ue({__name:"LandmarkMap",props:{landmarks:{default:()=>[]},selectable:{type:Boolean,default:!1},selectedPosition:{default:null},clusterEnabled:{type:Boolean,default:!0}},emits:["marker-click","position-select","cluster-click"],setup(e,{emit:t}){const n=Ni.Icon.Default.prototype;"_getIconUrl"in n&&delete n._getIconUrl,Ni.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const i=e,r=t,o=Le();let a=null,c=[],u=null,f=null;function m(b){const I=b.getChildCount();let M="small";I>50?M="large":I>10&&(M="medium");const A=`
    <div class="marker-cluster marker-cluster-${M}">
      <span>${I}</span>
    </div>
  `;return Ni.divIcon({html:A,className:"marker-cluster-custom",iconSize:Ni.point(40,40)})}function _(b){if(!a||!i.selectable)return;const{lat:I,lng:M}=b.latlng;u&&a.removeLayer(u),u=Ni.marker([I,M]).addTo(a),r("position-select",{lat:I,lng:M})}function y(){a&&(f&&i.clusterEnabled?f.clearLayers():(c.forEach(b=>{a&&a.hasLayer(b)&&a.removeLayer(b)}),c=[]),i.landmarks.forEach(b=>{const I=Ni.marker([b.latitude,b.longitude]),M=`
  <div class="landmark-popup">
    <h3>${b.name}</h3>
    <p>Rating: ${b.averageRating.toFixed(1)}/5</p>
    <button onclick="window.dispatchEvent(new CustomEvent('landmark-click', { detail: '${b.id}' }))">
      View Details
    </button>
  </div>
`;I.bindPopup(M),I.on("click",()=>{r("marker-click",b)}),f&&i.clusterEnabled?f.addLayer(I):a&&(I.addTo(a),c.push(I))}))}ys(()=>{o.value&&(a=Ni.map(o.value).setView([51.505,-.09],2),Ni.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(a),i.clusterEnabled&&w(),i.selectable&&a.on("click",_),y())});function w(){if(!a)return;f=Ni.markerClusterGroup({chunkedLoading:!0,maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,disableClusteringAtZoom:17,iconCreateFunction:m}),f.on("clusterclick",I=>{const M=I.layer.getAllChildMarkers(),A=[];M.forEach(D=>{const B=D.getLatLng(),z=i.landmarks.find(Q=>Math.abs(Q.latitude-B.lat)<1e-4&&Math.abs(Q.longitude-B.lng)<1e-4);z&&A.push(z)}),r("cluster-click",A)}),a.addLayer(f)}return io(()=>{a&&(a.remove(),a=null)}),Gn(()=>i.landmarks,y,{deep:!0}),Gn(()=>i.selectedPosition,b=>{!a||!b||(u&&a.removeLayer(u),u=Ni.marker([b.lat,b.lng]).addTo(a),a.setView([b.lat,b.lng],13))}),Gn(()=>i.clusterEnabled,b=>{a&&(b&&!f?(w(),y()):!b&&f&&(a.removeLayer(f),f=null,y()))}),(b,I)=>(_t(),bt("div",FV,[lt("div",{ref_key:"mapContainer",ref:o,class:"landmark-map__container"},null,512),e.selectedPosition?(_t(),bt("div",UV," Selected: "+yt(e.selectedPosition.lat.toFixed(4))+", "+yt(e.selectedPosition.lng.toFixed(4)),1)):Ve("",!0)]))}}),pp=Ae(BV,[["__scopeId","data-v-cc4dca9f"]]),$V={class:"general-map__map-section"},zV=ue({__name:"MapSection",props:{landmarks:{}},emits:["marker-click"],setup(e){return(t,n)=>(_t(),bt("section",$V,[Ft(pp,{landmarks:e.landmarks,class:"general-map__map",onMarkerClick:n[0]||(n[0]=i=>t.$emit("marker-click",i))},null,8,["landmarks"])]))}}),jV=Ae(zV,[["__scopeId","data-v-dc944f45"]]),HV={class:"general-map__sidebar-header"},WV={class:"general-map__sidebar-title"},qV={key:0,class:"general-map__sidebar-subtitle"},GV=ue({__name:"SidebarHeader",props:{showOnlyUserLandmarks:{type:Boolean}},setup(e){return(t,n)=>(_t(),bt("div",HV,[lt("h2",WV,yt(e.showOnlyUserLandmarks?t.$t("landmark.myLandmarks"):t.$t("landmark.topLandmarks")),1),e.showOnlyUserLandmarks?Ve("",!0):(_t(),bt("p",qV,yt(t.$t("landmark.topLandmarks")),1))]))}}),ZV=Ae(GV,[["__scopeId","data-v-d24c1ae0"]]),KV={class:"landmark-card__header"},YV={class:"landmark-card__title"},QV={class:"landmark-card__rating"},XV={class:"landmark-card__rating-value"},JV={class:"landmark-card__meta"},tF={class:"landmark-card__visits"},eF={key:0,class:"landmark-card__score"},nF={key:1,class:"landmark-card__owner"},iF={class:"landmark-card__actions"},rF={class:"landmark-card__user-rating"},sF={class:"landmark-card__rating-label"},oF={class:"landmark-card__stars"},aF=["onClick","disabled"],lF={key:0,class:"landmark-card__admin-notice"},cF=ue({__name:"LandmarkCard",props:{landmark:{},isActive:{type:Boolean},showOnlyUserLandmarks:{type:Boolean}},emits:["view-details","rate-landmark"],setup(e){const t=e,n=Sn(),i=sp(),r=ee(()=>i.loading);function o(m,_){return m*(1-Math.exp(-.1*_))}const a=ee(()=>n.user&&t.landmark.userRatings?.[n.user.uid]||0),c=ee(()=>i.canRateLandmark(t.landmark)),u=ee(()=>n.isAdmin||t.landmark.createdBy!==n.user?.uid),f=ee(()=>t.landmark.createdBy===n.user?.uid?"Your landmark":"Other user");return(m,_)=>(_t(),bt("div",{class:Zn(["landmark-card",{"landmark-card_active":e.isActive}]),onClick:_[0]||(_[0]=y=>m.$emit("view-details",e.landmark))},[lt("div",KV,[lt("h3",YV,yt(e.landmark.name),1),lt("div",QV,[lt("span",XV,yt(e.landmark.averageRating.toFixed(1)),1),_[1]||(_[1]=lt("span",{class:"landmark-card__rating-star"},"★",-1))])]),lt("div",JV,[lt("span",tF,yt(e.landmark.visitCount)+" "+yt(m.$t("landmark.visits")),1),e.showOnlyUserLandmarks?Ve("",!0):(_t(),bt("span",eF,yt(m.$t("landmark.score"))+": "+yt(o(e.landmark.averageRating,e.landmark.visitCount).toFixed(2)),1)),u.value?(_t(),bt("span",nF,yt(f.value),1)):Ve("",!0)]),lt("div",iF,[lt("div",rF,[lt("span",sF,yt(m.$t("landmark.yourRating"))+":",1),lt("div",oF,[(_t(),bt(Ne,null,ro(5,y=>lt("button",{key:y,type:"button",class:Zn(["landmark-card__star",{"landmark-card__star_active":y<=a.value,"landmark-card__star_clickable":c.value}]),onClick:_a(w=>m.$emit("rate-landmark",e.landmark,y),["stop"]),disabled:!c.value||r.value}," ★ ",10,aF)),64))]),c.value?Ve("",!0):(_t(),bt("span",lF,yt(m.$t("admin.cannotRate")),1))])])],2))}}),uF=Ae(cF,[["__scopeId","data-v-bd01c460"]]),hF={class:"general-map__sidebar"},dF={key:0,class:"general-map__loading"},fF={key:2,class:"general-map__empty"},mF=ue({__name:"Sidebar",props:{landmarks:{},showOnlyUserLandmarks:{type:Boolean},selectedLandmarkId:{},loading:{type:Boolean},hasMore:{type:Boolean}},emits:["scroll","load-more-landmarks","add-first-landmark","view-landmark-details","rate-landmark"],setup(e){return(t,n)=>(_t(),bt("aside",hF,[Ft(ZV,{"show-only-user-landmarks":e.showOnlyUserLandmarks},null,8,["show-only-user-landmarks"]),lt("div",{class:"general-map__landmarks-list",onScroll:n[3]||(n[3]=i=>t.$emit("scroll",i))},[(_t(!0),bt(Ne,null,ro(e.landmarks,i=>(_t(),Ui(uF,{key:i.id,landmark:i,"is-active":e.selectedLandmarkId===i.id,"show-only-user-landmarks":e.showOnlyUserLandmarks,onViewDetails:n[0]||(n[0]=r=>t.$emit("view-landmark-details",r)),onRateLandmark:(r,o)=>t.$emit("rate-landmark",r,o)},null,8,["landmark","is-active","show-only-user-landmarks","onRateLandmark"]))),128)),e.loading?(_t(),bt("div",dF,yt(t.$t("landmark.loadingMore")),1)):Ve("",!0),!e.showOnlyUserLandmarks&&e.hasMore&&!e.loading?(_t(),bt("button",{key:1,onClick:n[1]||(n[1]=i=>t.$emit("load-more-landmarks")),class:"general-map__load-more"},yt(t.$t("landmark.loadMore")),1)):Ve("",!0),e.landmarks.length===0?(_t(),bt("div",fF,[lt("p",null,yt(t.$t("landmark.noLandmarksFound")),1),e.showOnlyUserLandmarks?(_t(),bt("button",{key:0,onClick:n[2]||(n[2]=i=>t.$emit("add-first-landmark")),class:"general-map__empty-btn"},yt(t.$t("landmark.addFirstLandmark")),1)):Ve("",!0)])):Ve("",!0)],32)]))}}),pF=Ae(mF,[["__scopeId","data-v-cc51e441"]]),_F={class:"landmark-form__group"},gF=["for"],yF=["id","placeholder"],vF=["id","type","placeholder"],wF=ue({__name:"InputGroup",props:Zf({id:{},label:{},placeholder:{},type:{default:"text"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=sh(e,"modelValue");return(n,i)=>(_t(),bt("div",_F,[lt("label",{for:e.id,class:"landmark-form__label"},yt(e.label),9,gF),e.type==="textarea"?Tu((_t(),bt("textarea",{key:0,id:e.id,"onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),required:"",class:"landmark-form__textarea",placeholder:e.placeholder,rows:"4"},null,8,yF)),[[zd,t.value]]):Tu((_t(),bt("input",{key:1,id:e.id,"onUpdate:modelValue":i[1]||(i[1]=r=>t.value=r),type:e.type,required:"",class:"landmark-form__input",placeholder:e.placeholder},null,8,vF)),[[cw,t.value]])]))}}),tv=Ae(wF,[["__scopeId","data-v-886515ac"]]),EF={class:"landmark-form__group"},TF={class:"landmark-form__label"},IF={class:"landmark-form__help"},bF={key:0,class:"landmark-form__error"},PF=ue({__name:"MapSelector",props:{selectedPosition:{}},emits:["update:selectedPosition"],setup(e){return(t,n)=>(_t(),bt("div",EF,[lt("label",TF,yt(t.$t("landmark.location")),1),lt("p",IF,yt(t.$t("landmark.selectLocation")),1),Ft(pp,{selectable:!0,"selected-position":e.selectedPosition,onPositionSelect:n[0]||(n[0]=i=>t.$emit("update:selectedPosition",i)),class:"landmark-form__map"},null,8,["selected-position"]),e.selectedPosition?Ve("",!0):(_t(),bt("div",bF,yt(t.$t("landmark.noLocationSelected")),1))]))}}),AF=Ae(PF,[["__scopeId","data-v-5942ed27"]]),SF={class:"landmark-form__group"},CF={for:"rating",class:"landmark-form__label"},kF={class:"landmark-form__rating"},LF=["onClick"],RF={class:"landmark-form__rating-text"},OF=ue({__name:"RatingSelector",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=sh(e,"modelValue");return(n,i)=>(_t(),bt("div",SF,[lt("label",CF,yt(n.$t("landmark.yourRating")),1),lt("div",kF,[(_t(),bt(Ne,null,ro(5,r=>lt("button",{key:r,type:"button",class:Zn(["landmark-form__star",{"landmark-form__star_active":r<=t.value}]),onClick:o=>t.value=r}," ★ ",10,LF)),64))]),lt("span",RF,yt(t.value)+"/5 ",1)]))}}),xF=Ae(OF,[["__scopeId","data-v-b3134f63"]]),MF={class:"landmark-form__group"},NF={class:"landmark-form__label"},DF={key:0,class:"landmark-form__dropzone-content"},VF={class:"landmark-form__help"},FF={key:1,class:"landmark-form__previews"},UF=["src","alt"],BF=["onClick"],$F={key:0,class:"landmark-form__photo-badge"},zF={key:0,class:"landmark-form__help landmark-form__help_warning"},Qa=5,jF=ue({__name:"PhotoUploader",props:{allPhotos:{}},emits:["add-files","remove-photo"],setup(e,{emit:t}){const n=e,i=t,r=Le(!1),o=Le();function a(){o.value?.click()}function c(_){const y=_.target;y.files&&i("add-files",Array.from(y.files)),y.value=""}function u(){n.allPhotos.length<Qa&&(r.value=!0)}function f(_){_.preventDefault(),r.value=!1,!(n.allPhotos.length>=Qa)&&_.dataTransfer?.files&&i("add-files",Array.from(_.dataTransfer.files))}function m(_){return _.type==="new"&&_.file?URL.createObjectURL(_.file):_.url||""}return(_,y)=>(_t(),bt("div",MF,[lt("label",NF,yt(_.$t("landmark.photos")),1),lt("div",{class:Zn(["landmark-form__dropzone",{"landmark-form__dropzone_active":r.value,"landmark-form__dropzone_full":e.allPhotos.length>=Qa}]),onDrop:f,onDragover:_a(u,["prevent"]),onDragleave:y[0]||(y[0]=w=>r.value=!1)},[lt("input",{ref_key:"fileInput",ref:o,type:"file",multiple:"",accept:"image/*",onChange:c,class:"landmark-form__file-input"},null,544),e.allPhotos.length===0?(_t(),bt("div",DF,[lt("p",null,yt(_.$t("landmark.dragDropPhotos")),1),lt("button",{type:"button",onClick:a,class:"landmark-form__browse-btn"},yt(_.$t("landmark.browseFiles")),1),lt("p",VF,yt(_.$t("landmark.maxPhotos")),1)])):(_t(),bt("div",FF,[(_t(!0),bt(Ne,null,ro(e.allPhotos,(w,b)=>(_t(),bt("div",{key:b,class:"landmark-form__preview"},[lt("img",{src:m(w),alt:`Preview ${b+1}`,class:"landmark-form__preview-img"},null,8,UF),lt("button",{type:"button",onClick:I=>_.$emit("remove-photo",b),class:"landmark-form__remove-photo"}," × ",8,BF),w.type==="new"?(_t(),bt("div",$F," New ")):Ve("",!0)]))),128)),e.allPhotos.length<Qa?(_t(),bt("div",{key:0,class:"landmark-form__add-more",onClick:a}," + "+yt(_.$t("landmark.addMorePhotos")),1)):Ve("",!0)]))],34),e.allPhotos.length>=Qa?(_t(),bt("p",zF,yt(_.$t("landmark.maxPhotos")),1)):Ve("",!0)]))}}),HF=Ae(jF,[["__scopeId","data-v-54f62960"]]),WF={class:"landmark-form__actions"},qF=["disabled"],GF=ue({__name:"Actions",props:{isFormValid:{type:Boolean},loading:{type:Boolean},isEditing:{type:Boolean}},emits:["cancel"],setup(e){return(t,n)=>(_t(),bt("div",WF,[lt("button",{type:"button",onClick:n[0]||(n[0]=i=>t.$emit("cancel")),class:"landmark-form__btn landmark-form__btn_secondary"},yt(t.$t("common.cancel")),1),lt("button",{type:"submit",disabled:!e.isFormValid||e.loading,class:"landmark-form__btn landmark-form__btn_primary"},yt(e.loading?t.$t("common.loading"):(e.isEditing,t.$t("common.save"))),9,qF)]))}}),ZF=Ae(GF,[["__scopeId","data-v-c3605c23"]]),KF={class:"landmark-form"},YF={class:"landmark-form__title"},QF=ue({__name:"LandmarkForm",props:{landmark:{default:null},loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,i=t,r=Sn(),o=ee(()=>!!n.landmark),a=Qi({name:"",description:"",latitude:0,longitude:0,userRating:0,photos:[],existingPhotos:[]}),c=Le(null),u=ee(()=>!!a.name.trim()&&!!a.description.trim()&&!!c.value&&a.userRating>0&&a.userRating<=5),f=ee(()=>{const I=(a.existingPhotos||[]).map(A=>({type:"existing",url:A})),M=a.photos.map(A=>({type:"new",file:A}));return[...I,...M]});Gn(()=>n.landmark,I=>{I?(a.name=I.name,a.description=I.description,a.userRating=I.userRatings[r.user?.uid||""]||0,c.value={lat:I.latitude,lng:I.longitude},a.latitude=I.latitude,a.longitude=I.longitude,a.existingPhotos=[...I.photos||[]],a.photos=[]):(a.name="",a.description="",a.userRating=0,c.value=null,a.latitude=0,a.longitude=0,a.photos=[],a.existingPhotos=[])},{immediate:!0});function m(I){c.value=I,a.latitude=I.lat,a.longitude=I.lng}function _(I){const A=5-f.value.length,D=I.slice(0,A);a.photos.push(...D)}function y(I){return I.type==="new"&&I.file?URL.createObjectURL(I.file):I.url||""}function w(I){const M=f.value[I];if(M){if(M.type==="existing"&&a.existingPhotos){const A=a.existingPhotos.indexOf(M.url||"");A!==-1&&a.existingPhotos.splice(A,1)}else if(M.type==="new"&&M.file){const A=a.photos.findIndex(D=>D===M.file);A!==-1&&(URL.revokeObjectURL(y(M)),a.photos.splice(A,1))}}}function b(){if(!u.value)return;const I=[...a.photos];i("submit",{...a,photos:I,existingPhotos:a.existingPhotos||[]})}return io(()=>{f.value.forEach(I=>{I.type==="new"&&I.file&&URL.revokeObjectURL(y(I))})}),(I,M)=>(_t(),bt("div",KF,[lt("form",{onSubmit:_a(b,["prevent"]),class:"landmark-form__form"},[lt("h2",YF,yt(o.value?I.$t("landmark.editLandmark"):I.$t("landmark.addLandmark")),1),Ft(tv,{id:"name",label:I.$t("landmark.name"),placeholder:I.$t("landmark.name"),modelValue:a.name,"onUpdate:modelValue":M[0]||(M[0]=A=>a.name=A),type:"text"},null,8,["label","placeholder","modelValue"]),Ft(tv,{id:"description",label:I.$t("landmark.description"),placeholder:I.$t("landmark.description"),modelValue:a.description,"onUpdate:modelValue":M[1]||(M[1]=A=>a.description=A),type:"textarea"},null,8,["label","placeholder","modelValue"]),Ft(AF,{"selected-position":c.value,"onUpdate:selectedPosition":m},null,8,["selected-position"]),Ft(xF,{modelValue:a.userRating,"onUpdate:modelValue":M[2]||(M[2]=A=>a.userRating=A)},null,8,["modelValue"]),Ft(HF,{"all-photos":f.value,onAddFiles:_,onRemovePhoto:w},null,8,["all-photos"]),Ft(ZF,{"is-form-valid":u.value,loading:n.loading,"is-editing":o.value,onCancel:M[3]||(M[3]=A=>I.$emit("cancel"))},null,8,["is-form-valid","loading","is-editing"])],32)]))}}),zI=Ae(QF,[["__scopeId","data-v-1f8a691a"]]),XF={class:"general-map"},JF={class:"general-map__main"},t2={class:"general-map__content"},e2={key:0,class:"general-map__modal"},n2={class:"general-map__modal-content"},i2=ue({__name:"GeneralMap",setup(e){const t=Sn(),n=sp(),i=dh(),r=Le(!1),o=Le(!1),a=Le(null),c=ee(()=>(o.value?n.userLandmarks:n.landmarks).map(B=>({id:B.id,name:B.name,latitude:B.latitude,longitude:B.longitude,averageRating:B.averageRating}))),u=ee(()=>o.value?n.userLandmarks:n.paginatedLandmarks);function f(D){i.push(`/landmark/${D}`)}ys(async()=>{await n.fetchLandmarks(),window.addEventListener("landmark-click",D=>{f(D.detail)})}),io(()=>{window.removeEventListener("landmark-click",D=>{f(D.detail)})});async function m(D){try{await n.addLandmark(D),r.value=!1,o.value?await n.fetchLandmarks(!0):await n.fetchLandmarks()}catch(B){console.error("Error adding landmark:",B),alert("Error adding landmark: "+B.message)}}async function _(){o.value?await n.fetchLandmarks(!0):await n.fetchLandmarks(),a.value=null}function y(D){f(D.id)}async function w(D,B){if(t.user)try{await n.rateLandmark(D.id,B),o.value?await n.fetchLandmarks(!0):await n.fetchLandmarks()}catch(z){console.error("Error rating landmark:",z),alert("Error rating landmark: "+z.message)}}async function b(){await n.fetchMoreLandmarks()}function I(D){const B=D.target,{scrollTop:z,scrollHeight:Q,clientHeight:rt}=B;Q-z<=rt+100&&!o.value&&n.hasMore&&!n.loading&&b()}async function M(){await t.logout(),n.clearLandmarks(),i.push("/signin")}function A(D){a.value=D,i.push(`/landmark/${D.id}`)}return(D,B)=>(_t(),bt("div",XF,[Ft(RV,{"show-only-user-landmarks":o.value,"onUpdate:showOnlyUserLandmarks":B[0]||(B[0]=z=>o.value=z),onFilterChange:_,onAddLandmark:B[1]||(B[1]=z=>r.value=!0),onLogout:M},null,8,["show-only-user-landmarks"]),lt("main",JF,[lt("div",t2,[Ft(jV,{landmarks:c.value,onMarkerClick:y},null,8,["landmarks"]),Ft(pF,{landmarks:u.value,"show-only-user-landmarks":o.value,"selected-landmark-id":a.value?.id||null,loading:wn(n).loading,"has-more":wn(n).hasMore,onScroll:I,onLoadMoreLandmarks:b,onAddFirstLandmark:B[2]||(B[2]=z=>r.value=!0),onViewLandmarkDetails:A,onRateLandmark:w},null,8,["landmarks","show-only-user-landmarks","selected-landmark-id","loading","has-more"])])]),r.value?(_t(),bt("div",e2,[lt("div",n2,[Ft(zI,{onSubmit:m,onCancel:B[3]||(B[3]=z=>r.value=!1),loading:wn(n).loading},null,8,["loading"])])])):Ve("",!0)]))}}),r2=Ae(i2,[["__scopeId","data-v-1331edf3"]]),s2={class:"landmark-detail__header"},o2={class:"landmark-detail__title"},a2={key:0,class:"landmark-detail__actions"},l2=["disabled"],c2=["disabled"],u2={key:1,class:"landmark-detail__title-placeholder"},h2=ue({__name:"Header",props:{landmarkName:{},canEdit:{type:Boolean},canDelete:{type:Boolean},saving:{type:Boolean},deleting:{type:Boolean}},emits:["edit","delete"],setup(e){return(t,n)=>(_t(),bt("div",s2,[lt("button",{onClick:n[0]||(n[0]=i=>t.$router.back()),class:"landmark-detail__back-btn"}," ← "+yt(t.$t("landmark.backToMap")),1),e.landmarkName?(_t(),bt(Ne,{key:0},[lt("h1",o2,yt(e.landmarkName),1),e.canEdit?(_t(),bt("div",a2,[lt("button",{onClick:n[1]||(n[1]=i=>t.$emit("edit")),class:"landmark-detail__edit-btn",disabled:e.saving},yt(t.$t("common.edit")),9,l2),e.canDelete?(_t(),bt("button",{key:0,onClick:n[2]||(n[2]=i=>t.$emit("delete")),class:"landmark-detail__delete-btn",disabled:e.deleting},yt(e.deleting?t.$t("common.loading"):t.$t("common.delete")),9,c2)):Ve("",!0)])):Ve("",!0)],64)):(_t(),bt("div",u2))]))}}),d2=Ae(h2,[["__scopeId","data-v-5eecd333"]]),f2={class:"landmark-detail__section"},m2={class:"landmark-detail__section-title"},p2=ue({__name:"InfoSection",props:{titleKey:{}},setup(e){return(t,n)=>(_t(),bt("div",f2,[lt("h2",m2,yt(t.$t(e.titleKey)),1),AP(t.$slots,"default",{},void 0)]))}}),Yu=Ae(p2,[["__scopeId","data-v-3ad9226c"]]),_2={class:"landmark-detail__coordinates"},g2=ue({__name:"LocationDetails",props:{id:{},name:{},latitude:{},longitude:{},averageRating:{}},setup(e){const t=e,n=ee(()=>[{id:t.id,name:t.name,latitude:t.latitude,longitude:t.longitude,averageRating:t.averageRating}]),i=ee(()=>({lat:t.latitude,lng:t.longitude}));return(r,o)=>(_t(),Ui(Yu,{"title-key":"landmark.location"},{default:Ks(()=>[lt("div",_2,yt(r.$t("landmark.coordinates"))+": "+yt(e.latitude.toFixed(4))+", "+yt(e.longitude.toFixed(4)),1),Ft(pp,{landmarks:n.value,"selected-position":i.value,class:"landmark-detail__map"},null,8,["landmarks","selected-position"])]),_:1}))}}),y2=Ae(g2,[["__scopeId","data-v-f43ef1da"]]),v2={class:"landmark-detail__ratings"},w2={class:"landmark-detail__rating-section"},E2={class:"landmark-detail__rating-title"},T2={class:"landmark-detail__rating-display"},I2={class:"landmark-detail__rating-value"},b2={class:"landmark-detail__rating-count"},P2={key:0,class:"landmark-detail__rating-section"},A2={class:"landmark-detail__rating-title"},S2={class:"landmark-detail__user-rating"},C2={class:"landmark-detail__stars"},k2=["onClick","disabled"],L2={class:"landmark-detail__user-rating-text"},R2={key:1,class:"landmark-detail__rating-section"},O2={class:"landmark-detail__admin-notice"},x2=ue({__name:"RatingSummary",props:{averageRating:{},ratingCount:{},userRating:{},canRate:{type:Boolean},ratingLandmark:{type:Boolean}},emits:["rate"],setup(e){return(t,n)=>(_t(),bt("div",v2,[lt("div",w2,[lt("h3",E2,yt(t.$t("landmark.overallRating")),1),lt("div",T2,[lt("span",I2,yt(e.averageRating.toFixed(1)),1),n[0]||(n[0]=lt("span",{class:"landmark-detail__rating-star"},"★",-1)),lt("span",b2," ("+yt(e.ratingCount)+" "+yt(t.$t("landmark.visits"))+") ",1)])]),e.canRate?(_t(),bt("div",P2,[lt("h3",A2,yt(t.$t("landmark.yourRating")),1),lt("div",S2,[lt("div",C2,[(_t(),bt(Ne,null,ro(5,i=>lt("button",{key:i,type:"button",class:Zn(["landmark-detail__star",{"landmark-detail__star_active":i<=e.userRating}]),onClick:r=>t.$emit("rate",i),disabled:e.ratingLandmark}," ★ ",10,k2)),64))]),lt("span",L2,yt(e.userRating)+"/5 ",1)])])):(_t(),bt("div",R2,[lt("p",O2,yt(t.$t("admin.cannotRate")),1)]))]))}}),M2=Ae(x2,[["__scopeId","data-v-3244dda0"]]),N2={class:"landmark-detail__photos"},D2=["src","alt","onClick"],V2=ue({__name:"PhotoGallery",props:{photos:{}},emits:["open-viewer"],setup(e){return(t,n)=>(_t(),Ui(Yu,{"title-key":"landmark.photos"},{default:Ks(()=>[lt("div",N2,[(_t(!0),bt(Ne,null,ro(e.photos,(i,r)=>(_t(),bt("div",{key:r,class:"landmark-detail__photo"},[lt("img",{src:i,alt:`Photo ${r+1}`,class:"landmark-detail__photo-img",onClick:o=>t.$emit("open-viewer",r)},null,8,D2)]))),128))])]),_:1}))}}),F2=Ae(V2,[["__scopeId","data-v-51b13cea"]]),U2={class:"landmark-detail__photo-viewer-content"},B2=["src","alt"],$2={class:"landmark-detail__photo-counter"},z2=ue({__name:"PhotoViewer",props:{photos:{},currentIndex:{}},emits:["close","prev","next"],setup(e){return(t,n)=>(_t(),bt("div",{class:"landmark-detail__photo-viewer",onClick:n[3]||(n[3]=_a(i=>t.$emit("close"),["self"]))},[lt("div",U2,[lt("button",{onClick:n[0]||(n[0]=i=>t.$emit("close")),class:"landmark-detail__photo-viewer-close"}," × "),lt("button",{onClick:n[1]||(n[1]=i=>t.$emit("prev")),class:"landmark-detail__photo-nav landmark-detail__photo-nav_prev"}," ‹ "),lt("img",{src:e.photos[e.currentIndex],alt:`Photo ${e.currentIndex+1}`,class:"landmark-detail__photo-viewer-img"},null,8,B2),lt("button",{onClick:n[2]||(n[2]=i=>t.$emit("next")),class:"landmark-detail__photo-nav landmark-detail__photo-nav_next"}," › "),lt("div",$2,yt(e.currentIndex+1)+" / "+yt(e.photos.length),1)])]))}}),j2=Ae(z2,[["__scopeId","data-v-9a8be3fc"]]),H2={class:"landmark-detail"},W2={key:0,class:"landmark-detail__loading"},q2={key:1,class:"landmark-detail__not-found"},G2={key:2,class:"landmark-detail__content"},Z2={key:1,class:"landmark-detail__view"},K2={class:"landmark-detail__info"},Y2={class:"landmark-detail__description"},Q2={class:"landmark-detail__admin-info"},X2=ue({__name:"LandmarkDetail",setup(e){const t=tC(),n=dh(),i=Sn(),r=sp(),o=Le(null),a=Le(!0),c=Le(!1),u=Le(!1),f=Le(!1),m=Le(!1),_=Le(0),y=Le(!1),w=ee(()=>t.params.id),b=ee(()=>!!o.value&&r.canEditLandmark(o.value)),I=ee(()=>!!o.value&&r.canDeleteLandmark(o.value)),M=ee(()=>!!o.value&&r.canRateLandmark(o.value)),A=ee(()=>!o.value||!i.user?0:o.value.userRatings?.[i.user.uid]||0);function D(F){return new Date(F).toLocaleString()}ys(async()=>{await B()});async function B(){try{a.value=!0;const F=os(ii,"landmarks",w.value),x=await Zu(F);if(x.exists()){const j=x.data();o.value={id:x.id,name:j.name,description:j.description,latitude:j.latitude,longitude:j.longitude,createdBy:j.createdBy,createdAt:j.createdAt.toDate(),averageRating:j.averageRating||0,visitCount:j.visitCount||0,photos:j.photos||[],userRatings:j.userRatings||{}}}else console.error("Landmark not found")}catch(F){console.error("Error fetching landmark:",F)}finally{a.value=!1}}async function z(F){if(o.value)try{u.value=!0,await r.updateLandmark(o.value.id,F,F.existingPhotos||[]),await B(),c.value=!1,alert("Landmark updated successfully!")}catch(x){console.error("Error updating landmark:",x),alert("Error updating landmark: "+x.message)}finally{u.value=!1}}async function Q(F){if(!(!i.user||!o.value))try{f.value=!0,await r.rateLandmark(o.value.id,F),await B()}catch(x){console.error("Error rating landmark:",x),alert("Error rating landmark: "+x.message)}finally{f.value=!1}}async function rt(){if(!(!o.value||!confirm("Are you sure you want to delete this landmark?")))try{y.value=!0;const F=os(ii,"landmarks",o.value.id);await ux(F),r.clearLandmarks(),n.push("/generalmap")}catch(F){console.error("Error deleting landmark:",F),alert("Error deleting landmark: "+F.message)}finally{y.value=!1}}function S(F){!o.value||!o.value.photos||(_.value=F,m.value=!0)}function C(){!o.value||!o.value.photos||(_.value=(_.value+1)%o.value.photos.length)}function O(){!o.value||!o.value.photos||(_.value=_.value===0?o.value.photos.length-1:_.value-1)}return(F,x)=>(_t(),bt("div",H2,[Ft(d2,{"landmark-name":o.value?.name,"can-edit":b.value,"can-delete":I.value,saving:u.value,deleting:y.value,onEdit:x[0]||(x[0]=j=>c.value=!0),onDelete:rt},null,8,["landmark-name","can-edit","can-delete","saving","deleting"]),a.value?(_t(),bt("div",W2,yt(F.$t("common.loading")),1)):o.value?(_t(),bt("div",G2,[c.value?(_t(),Ui(zI,{key:0,landmark:o.value,loading:u.value,onSubmit:z,onCancel:x[2]||(x[2]=j=>c.value=!1)},null,8,["landmark","loading"])):(_t(),bt("div",Z2,[lt("div",K2,[Ft(Yu,{"title-key":"landmark.description"},{default:Ks(()=>[lt("p",Y2,yt(o.value.description),1)]),_:1}),Ft(y2,{id:o.value.id,name:o.value.name,latitude:o.value.latitude,longitude:o.value.longitude,"average-rating":o.value.averageRating},null,8,["id","name","latitude","longitude","average-rating"]),Ft(M2,{"average-rating":o.value.averageRating,"rating-count":Object.keys(o.value.userRatings||{}).length,"user-rating":A.value,"can-rate":M.value,"rating-landmark":f.value,onRate:Q},null,8,["average-rating","rating-count","user-rating","can-rate","rating-landmark"]),o.value.photos&&o.value.photos.length>0?(_t(),Ui(F2,{key:0,photos:o.value.photos,onOpenViewer:S},null,8,["photos"])):Ve("",!0),wn(i).isAdmin?(_t(),Ui(Yu,{key:1,"title-key":"admin.admin"},{default:Ks(()=>[lt("div",Q2,[lt("p",null,[x[5]||(x[5]=lt("strong",null,"Created by:",-1)),zi(" "+yt(o.value.createdBy),1)]),lt("p",null,[x[6]||(x[6]=lt("strong",null,"Created at:",-1)),zi(" "+yt(D(o.value.createdAt)),1)]),lt("p",null,[x[7]||(x[7]=lt("strong",null,"Total ratings:",-1)),zi(" "+yt(Object.keys(o.value.userRatings||{}).length),1)])])]),_:1})):Ve("",!0)])]))])):(_t(),bt("div",q2,[x[4]||(x[4]=lt("p",null,"Landmark not found",-1)),lt("button",{onClick:x[1]||(x[1]=j=>F.$router.push("/generalmap")),class:"landmark-detail__back-to-map"},yt(F.$t("landmark.backToMap")),1)])),m.value&&o.value?(_t(),Ui(j2,{key:3,photos:o.value.photos,"current-index":_.value,onClose:x[3]||(x[3]=j=>m.value=!1),onNext:C,onPrev:O},null,8,["photos","current-index"])):Ve("",!0)]))}}),J2=Ae(X2,[["__scopeId","data-v-71e6293f"]]),tU=[{path:"/",redirect:"/signin"},{path:"/signin",name:"signin",component:$M,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:KM,meta:{requiresGuest:!0}},{path:"/generalmap",name:"generalmap",component:r2,meta:{requiresAuth:!0}},{path:"/landmark/:id",name:"landmark-detail",component:J2,meta:{requiresAuth:!0}}],jI=XS({history:kS(),routes:tU});jI.beforeEach(async(e,t,n)=>{const i=Sn();i.user||await i.initialize(),e.meta.requiresAuth&&!i.isAuthenticated?n("/signin"):e.meta.requiresGuest&&i.isAuthenticated?n("/generalmap"):n()});const eU={class:"app-container"},nU=ue({__name:"App",setup(e){return(t,n)=>(_t(),bt("main",eU,[Ft(wn(Aw))]))}}),iU=Ae(nU,[["__scopeId","data-v-9b16cf2d"]]),zh=jA(iU),rU=qA();zh.use(rU);zh.use(jI);zh.use(dV);zh.mount("#app");
